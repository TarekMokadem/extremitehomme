import{c as Se,d as Fe,r as n,a as q,C as qe,w as W,e as d,f as t,j as c,k as _,n as A,g,t as s,y as P,z as N,F as x,h as b,D as Ae,B as Pe,v as le,T as de,s as M,m as U,l as S,o as H,E as Me,A as Ee,p as Le,q as l}from"./index-DlgJK6M0.js";import{R as ne}from"./refresh-cw-jMjeuc1p.js";import{S as Ve}from"./search-TkKmFztP.js";import{C as je,a as Ie,b as ze,c as Be}from"./chevrons-right-DsiIExj7.js";import{C as Re}from"./chevron-up-BBmJa0UK.js";import{S as $e}from"./square-pen-Yl_Y90Jj.js";import{X as Ne}from"./x--dGNUvlK.js";import{B as ie,C as X,S as Ue,G as ce,H as ge,W as ue}from"./wrench-DQjPp6xT.js";import{E as He}from"./euro-B53o3jEP.js";const ye=Se("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),Ge={class:"flex-1 p-4 lg:p-6 overflow-auto bg-gray-50 dark:bg-gray-900"},Oe={class:"max-w-6xl mx-auto space-y-6"},Ze={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Ke=["disabled"],Qe={class:"grid grid-cols-3 gap-4"},We={class:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700"},Xe={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},Je={class:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700"},Ye={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},et={class:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700"},tt={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},at={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},rt={class:"space-y-4"},st={class:"flex flex-col lg:flex-row gap-4"},ot={class:"relative flex-1"},lt={class:"flex flex-wrap gap-2"},dt=["onClick"],nt={key:0,class:"flex flex-wrap items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-xl"},it={class:"flex items-center gap-2"},ct={class:"flex items-center gap-2"},gt={class:"flex flex-wrap items-center gap-3"},ut={class:"flex gap-2"},yt=["onClick"],xt={class:"flex items-center gap-2 ml-auto"},bt=["value"],mt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},pt={key:0,class:"p-8 text-center"},vt={key:1,class:"p-8 text-center"},kt={key:2,class:"divide-y divide-gray-100 dark:divide-gray-700"},ht=["onClick"],ft={class:"hidden sm:block w-24 flex-shrink-0"},_t={class:"text-sm font-medium text-gray-900 dark:text-white"},wt={class:"text-xs text-gray-500 dark:text-gray-400"},Ct={class:"flex-shrink-0"},Dt={class:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-xs font-mono font-medium"},Tt={class:"flex-1 min-w-0"},St={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},Ft={key:0,class:"text-xs text-gray-500 dark:text-gray-400 truncate"},qt={class:"hidden md:flex items-center gap-2"},At={class:"text-right flex-shrink-0"},Pt={class:"text-lg font-bold text-gray-900 dark:text-white"},Mt={class:"text-xs text-gray-500 dark:text-gray-400 sm:hidden"},Et={key:0,class:"px-4 pb-4 overflow-hidden"},Lt={class:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4 space-y-4"},Vt={class:"space-y-2"},jt={class:"text-gray-700 dark:text-gray-300"},It={class:"font-medium text-gray-900 dark:text-white"},zt={class:"border-t border-gray-200 dark:border-gray-600 pt-3 space-y-1"},Bt={class:"flex justify-between text-sm"},Rt={class:"text-gray-700 dark:text-gray-300"},$t={class:"flex justify-between text-sm"},Nt={class:"text-gray-700 dark:text-gray-300"},Ut={key:0,class:"flex justify-between text-sm"},Ht={class:"text-red-600 dark:text-red-400"},Gt={class:"flex justify-between text-base font-bold pt-2 border-t border-gray-200 dark:border-gray-600"},Ot={class:"text-gray-900 dark:text-white"},Zt={class:"border-t border-gray-200 dark:border-gray-600 pt-3 flex items-center justify-between gap-4 flex-wrap"},Kt={class:"flex items-center gap-2 flex-wrap"},Qt=["onClick"],Wt={key:3,class:"flex flex-wrap items-center justify-between gap-4 px-4 py-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50"},Xt={class:"flex items-center gap-3"},Jt=["max"],Yt={class:"text-sm text-gray-600 dark:text-gray-400"},ea={class:"flex items-center gap-2"},ta=["disabled"],aa=["disabled"],ra={class:"flex gap-1"},sa=["onClick"],oa=["disabled"],la=["disabled"],da={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50"},na={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-md overflow-hidden border border-gray-200 dark:border-gray-700"},ia={class:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between"},ca={class:"p-4 space-y-4"},ga={class:"text-sm text-gray-600 dark:text-gray-300"},ua={class:"font-mono font-semibold"},ya={class:"font-bold"},xa={class:"grid grid-cols-2 sm:grid-cols-3 gap-2"},ba=["onClick"],ma={class:"text-xs font-medium"},pa={class:"p-4 border-t border-gray-200 dark:border-gray-700 flex gap-3"},va=["disabled"],qa=Fe({__name:"HistoriquePage",setup(ka){const E=n([]),m=n(null),G=n(null),O=n(null),w=n(!0),L=n(""),y=n("today"),V=n(""),j=n(""),p=n("all"),C=n(50),i=n(1),I=n(null),D=n(null),F=n("card"),z=n(!1),xe=[{id:"cash",label:"Espèces",icon:ie},{id:"card",label:"CB",icon:X},{id:"contactless",label:"Sans contact",icon:Ue},{id:"amex",label:"American Express",icon:X},{id:"check",label:"Chèque",icon:Le},{id:"gift_card",label:"Chèque Cadeau",icon:ce},{id:"free",label:"Gratuit",icon:ge},{id:"technical",label:"Utilisation technique",icon:ue}],be=[{id:"today",label:"Aujourd'hui"},{id:"week",label:"Cette semaine"},{id:"month",label:"Ce mois"},{id:"custom",label:"Période"},{id:"all",label:"Tout"}],me=[{id:"all",label:"Tous"},{id:"completed",label:"Complétées"},{id:"cancelled",label:"Annulées"},{id:"refunded",label:"Remboursées"},{id:"pending",label:"En attente"}],pe=[25,50,100],v=q(()=>{const r=m.value??0,e=C.value;return Math.max(1,Math.ceil(r/e))}),Z=q(()=>{const r=m.value??0,e=C.value,a=i.value,o=r===0?0:(a-1)*e+1,u=Math.min(a*e,r);return{from:o,to:u,total:r}}),ve=q(()=>{const r=v.value,e=i.value,a=2,o=[];for(let u=Math.max(1,e-a);u<=Math.min(r,e+a);u++)o.push(u);return o});function ke(){const r=new Date,e=r.toISOString().split("T")[0]??null;return e?y.value==="today"?{startDate:e,endDate:e}:y.value==="week"?{startDate:new Date(r.getTime()-6048e5).toISOString().split("T")[0]??e,endDate:e}:y.value==="month"?{startDate:new Date(r.getTime()-2592e6).toISOString().split("T")[0]??e,endDate:e}:y.value==="custom"&&V.value&&j.value?{startDate:V.value,endDate:j.value}:{startDate:null,endDate:null}:{startDate:null,endDate:null}}const k=async()=>{w.value=!0;try{const{startDate:r,endDate:e}=ke(),a=C.value,u=(i.value-1)*a,Ce=u+a-1;let h=M.from("sales").select("*",{count:"exact",head:!0});r&&(h=h.gte("created_at",r)),e&&(h=h.lte("created_at",e+"T23:59:59.999Z")),p.value!=="all"&&(h=h.eq("status",p.value));const{count:De}=await h;m.value=De??null,G.value=null,O.value=null;try{const{data:$}=await M.rpc("get_sales_stats",{p_start_date:r??null,p_end_date:e!=null?e+"T23:59:59.999Z":null});if($&&Array.isArray($)&&$[0]){const oe=$[0];G.value=Number(oe.total_amount),O.value=Number(oe.avg_ticket)}}catch{}let f=M.from("sales").select(`
        *,
        vendor:vendors(first_name, last_name),
        client:clients(first_name, last_name),
        items:sale_items(id, product_name, quantity, price_ht, subtotal_ttc),
        payments(method, amount)
      `).order("created_at",{ascending:!1}).range(u,Ce);r&&(f=f.gte("created_at",r)),e&&(f=f.lte("created_at",e+"T23:59:59.999Z")),p.value!=="all"&&(f=f.eq("status",p.value));const{data:Te,error:se}=await f;if(se)throw se;E.value=Te||[]}catch(r){console.error("Erreur chargement historique:",r),E.value=[]}finally{w.value=!1}},T=r=>{i.value=Math.max(1,Math.min(r,v.value)),k()},B=n(""),J=()=>{B.value=String(i.value)},Y=()=>{const r=parseInt(B.value,10);!isNaN(r)&&r>=1?T(r):J()},ee=()=>{i.value=1,k()},R=q(()=>{if(!L.value.trim())return E.value;const r=L.value.toLowerCase();return E.value.filter(e=>e.ticket_number.toLowerCase().includes(r)||e.client?.first_name?.toLowerCase().includes(r)||e.client?.last_name?.toLowerCase().includes(r)||e.vendor?.first_name?.toLowerCase().includes(r)||e.vendor?.last_name?.toLowerCase().includes(r))}),K=q(()=>{const r=R.value.reduce((o,u)=>o+u.total,0),e=R.value.length,a=e>0?r/e:0;return{total:r,count:e,avgTicket:a}}),he=r=>{I.value=I.value===r?null:r},te=r=>new Date(r).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),fe=r=>new Date(r).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),ae=r=>{switch(r){case"cash":return ie;case"card":case"contactless":case"amex":return X;case"free":return ge;case"technical":return ue;case"gift_card":return ce;default:return He}},re=r=>({cash:"Espèces",card:"Carte",contactless:"Sans contact",amex:"American Express",check:"Chèque",gift_card:"Chèque Cadeau",free:"Gratuit",technical:"Utilisation technique"})[r]||r,_e=r=>{D.value=r;const e=r.payments?.[0];F.value=e?.method??"card"},Q=()=>{D.value=null},we=async()=>{const r=D.value;if(r){z.value=!0;try{await M.from("payments").delete().eq("sale_id",r.id);const{error:e}=await M.from("payments").insert({sale_id:r.id,method:F.value,amount:r.total});if(e)throw e;r.payments=[{method:F.value,amount:r.total}],Q()}catch(e){console.error("Erreur modification paiement:",e),alert("Impossible de modifier le paiement.")}finally{z.value=!1}}};return qe(k),W([i,C],()=>k()),W(i,()=>J(),{immediate:!0}),W([y,p],()=>{i.value=1,y.value!=="custom"&&k()}),(r,e)=>(l(),d("main",Ge,[t("div",Oe,[t("div",Ze,[e[10]||(e[10]=t("div",null,[t("h1",{class:"text-xl lg:text-2xl font-bold text-gray-900 dark:text-white"},"Historique des ventes"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Consultez toutes les transactions")],-1)),t("button",{onClick:k,disabled:w.value,class:"inline-flex items-center gap-2 px-4 py-2 bg-gray-900 dark:bg-emerald-600 dark:hover:bg-emerald-500 text-white rounded-xl hover:bg-gray-800 transition-colors disabled:opacity-50"},[c(g(ne),{class:A(["w-4 h-4",w.value&&"animate-spin"])},null,8,["class"]),e[9]||(e[9]=t("span",null,"Actualiser",-1))],8,Ke)]),t("div",Qe,[t("div",We,[e[11]||(e[11]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider font-semibold"},"Total",-1)),t("p",Xe,s((G.value??K.value.total).toFixed(2))+"€",1)]),t("div",Je,[e[12]||(e[12]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider font-semibold"},"Ventes",-1)),t("p",Ye,s(m.value??K.value.count),1)]),t("div",et,[e[13]||(e[13]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider font-semibold"},"Panier moyen",-1)),t("p",tt,s((O.value??K.value.avgTicket).toFixed(2))+"€",1)])]),m.value!=null&&m.value>0?(l(),d("p",at,s(Z.value.from)+"-"+s(Z.value.to)+" sur "+s(Z.value.total)+" ventes ",1)):_("",!0),t("div",rt,[t("div",st,[t("div",ot,[c(g(Ve),{class:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 dark:text-gray-500"}),P(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>L.value=a),type:"text",placeholder:"Rechercher par ticket, client, vendeur...",class:"w-full pl-12 pr-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl text-sm focus:outline-none focus:border-gray-900 dark:focus:border-emerald-500 focus:ring-2 focus:ring-gray-900/10 dark:focus:ring-emerald-500/30"},null,512),[[N,L.value]])]),t("div",lt,[(l(),d(x,null,b(be,a=>t("button",{key:a.id,onClick:o=>{y.value=a.id,a.id!=="custom"&&k()},class:A(["px-4 py-2 text-sm font-medium rounded-xl transition-colors",y.value===a.id?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"])},s(a.label),11,dt)),64))])]),y.value==="custom"?(l(),d("div",nt,[t("div",it,[e[14]||(e[14]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Du",-1)),P(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>V.value=a),type:"date",class:"px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm dark:text-gray-100"},null,512),[[N,V.value]])]),t("div",ct,[e[15]||(e[15]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Au",-1)),P(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>j.value=a),type:"date",class:"px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm dark:text-gray-100"},null,512),[[N,j.value]])]),t("button",{onClick:ee,class:"px-4 py-2 text-sm font-medium bg-gray-900 dark:bg-emerald-600 text-white rounded-xl hover:bg-gray-800 dark:hover:bg-emerald-500 transition-colors"}," Appliquer ")])):_("",!0),t("div",gt,[t("div",ut,[(l(),d(x,null,b(me,a=>t("button",{key:a.id,onClick:o=>{p.value=a.id,ee()},class:A(["px-3 py-1.5 text-sm font-medium rounded-lg transition-colors",p.value===a.id?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"])},s(a.label),11,yt)),64))]),t("div",xt,[e[16]||(e[16]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Par page",-1)),P(t("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>C.value=a),class:"px-3 py-1.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm dark:text-gray-100"},[(l(),d(x,null,b(pe,a=>t("option",{key:a,value:a},s(a),9,bt)),64))],512),[[Ae,C.value,void 0,{number:!0}]])])])]),t("div",mt,[w.value?(l(),d("div",pt,[c(g(ne),{class:"w-8 h-8 text-gray-400 dark:text-gray-500 animate-spin mx-auto"}),e[17]||(e[17]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-2"},"Chargement...",-1))])):R.value.length===0?(l(),d("div",vt,[c(g(ye),{class:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto"}),e[18]||(e[18]=t("p",{class:"text-gray-500 dark:text-gray-400 mt-2"},"Aucune vente trouvée",-1))])):(l(),d("div",kt,[(l(!0),d(x,null,b(R.value,a=>(l(),d("div",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[t("button",{onClick:o=>he(a.id),class:"w-full px-4 py-4 flex items-center gap-4 text-left"},[t("div",ft,[t("p",_t,s(te(a.created_at)),1),t("p",wt,s(fe(a.created_at)),1)]),t("div",Ct,[t("span",Dt,[c(g(ye),{class:"w-3.5 h-3.5"}),S(" "+s(a.ticket_number),1)])]),t("div",Tt,[t("p",St,s(a.client?.first_name)+" "+s(a.client?.last_name),1),a.vendor?(l(),d("p",Ft," Vendeur: "+s(a.vendor.first_name)+" "+s(a.vendor.last_name),1)):_("",!0)]),t("div",qt,[(l(!0),d(x,null,b(a.payments,o=>(l(),d("span",{key:o.method,class:"inline-flex items-center gap-1 px-2 py-1 bg-gray-50 dark:bg-gray-700 rounded text-xs text-gray-600 dark:text-gray-300"},[(l(),U(H(ae(o.method)),{class:"w-3.5 h-3.5"})),S(" "+s(re(o.method)),1)]))),128))]),t("div",At,[t("p",Pt,s(a.total.toFixed(2))+"€",1),t("p",Mt,s(te(a.created_at)),1)]),(l(),U(H(I.value===a.id?g(Re):g(Me)),{class:"w-5 h-5 text-gray-400 dark:text-gray-500 flex-shrink-0"}))],8,ht),c(de,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 max-h-0","enter-to-class":"opacity-100 max-h-96","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 max-h-96","leave-to-class":"opacity-0 max-h-0"},{default:le(()=>[I.value===a.id?(l(),d("div",Et,[t("div",Lt,[t("div",null,[e[19]||(e[19]=t("p",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2"},"Articles",-1)),t("div",Vt,[(l(!0),d(x,null,b(a.items,o=>(l(),d("div",{key:o.id,class:"flex items-center justify-between text-sm"},[t("span",jt,s(o.quantity)+"x "+s(o.product_name),1),t("span",It,s(o.subtotal_ttc.toFixed(2))+"€",1)]))),128))])]),t("div",zt,[t("div",Bt,[e[20]||(e[20]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Sous-total HT",-1)),t("span",Rt,s(a.subtotal_ht.toFixed(2))+"€",1)]),t("div",$t,[e[21]||(e[21]=t("span",{class:"text-gray-500 dark:text-gray-400"},"TVA",-1)),t("span",Nt,s(a.total_tva.toFixed(2))+"€",1)]),a.discount_amount>0?(l(),d("div",Ut,[e[22]||(e[22]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Remise",-1)),t("span",Ht,"-"+s(a.discount_amount.toFixed(2))+"€",1)])):_("",!0),t("div",Gt,[e[23]||(e[23]=t("span",{class:"text-gray-900 dark:text-white"},"Total",-1)),t("span",Ot,s(a.total.toFixed(2))+"€",1)])]),t("div",Zt,[t("div",Kt,[e[24]||(e[24]=t("span",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Paiement",-1)),(l(!0),d(x,null,b(a.payments,o=>(l(),d("span",{key:o.method,class:"inline-flex items-center gap-1 px-2 py-1 bg-white dark:bg-gray-600 rounded-lg text-sm text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-500"},[(l(),U(H(ae(o.method)),{class:"w-4 h-4"})),S(" "+s(re(o.method))+" — "+s(o.amount.toFixed(2))+"€ ",1)]))),128))]),t("button",{onClick:Ee(o=>_e(a),["stop"]),class:"inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-500 transition-colors"},[c(g($e),{class:"w-4 h-4"}),e[25]||(e[25]=S(" Modifier le paiement ",-1))],8,Qt)])])])):_("",!0)]),_:2},1024)]))),128))])),!w.value&&m.value!=null&&m.value>0?(l(),d("div",Wt,[t("div",Xt,[e[26]||(e[26]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Page",-1)),P(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>B.value=a),type:"number",min:"1",max:v.value,onKeydown:Pe(Y,["enter"]),onBlur:Y,class:"w-16 px-2 py-1.5 text-sm text-center bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500"},null,40,Jt),[[N,B.value]]),t("span",Yt,"/ "+s(v.value),1)]),t("div",ea,[t("button",{disabled:i.value<=1,onClick:e[5]||(e[5]=a=>T(1)),title:"Première page",class:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[c(g(je),{class:"w-5 h-5"})],8,ta),t("button",{disabled:i.value<=1,onClick:e[6]||(e[6]=a=>T(i.value-1)),class:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[c(g(Ie),{class:"w-5 h-5"})],8,aa),t("div",ra,[(l(!0),d(x,null,b(ve.value,a=>(l(),d("button",{key:a,onClick:o=>T(a),class:A(["min-w-[2.25rem] px-2 py-1.5 text-sm font-medium rounded-lg transition-colors",i.value===a?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"])},s(a),11,sa))),128))]),t("button",{disabled:i.value>=v.value,onClick:e[7]||(e[7]=a=>T(i.value+1)),class:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[c(g(ze),{class:"w-5 h-5"})],8,oa),t("button",{disabled:i.value>=v.value,onClick:e[8]||(e[8]=a=>T(v.value)),title:"Dernière page",class:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[c(g(Be),{class:"w-5 h-5"})],8,la)])])):_("",!0)])]),c(de,{"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:le(()=>[D.value?(l(),d("div",da,[t("div",na,[t("div",ia,[e[27]||(e[27]=t("h3",{class:"text-lg font-bold text-gray-900 dark:text-white"},"Modifier le mode de paiement",-1)),t("button",{onClick:Q,class:"p-2 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg"},[c(g(Ne),{class:"w-5 h-5"})])]),t("div",ca,[t("p",ga,[e[28]||(e[28]=S(" Ticket ",-1)),t("span",ua,s(D.value.ticket_number),1),e[29]||(e[29]=S(" — Total ",-1)),t("span",ya,s(D.value.total.toFixed(2))+"€",1)]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider mb-2"},"Nouveau mode de paiement",-1)),t("div",xa,[(l(),d(x,null,b(xe,a=>t("button",{key:a.id,onClick:o=>F.value=a.id,class:A(["flex flex-col items-center gap-1.5 p-3 rounded-xl border-2 transition-colors",F.value===a.id?"border-gray-900 dark:border-emerald-500 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white":"border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-400 hover:border-gray-300 dark:hover:border-gray-500 hover:bg-gray-50 dark:hover:bg-gray-700"])},[(l(),U(H(a.icon),{class:"w-5 h-5"})),t("span",ma,s(a.label),1)],10,ba)),64))])])]),t("div",pa,[t("button",{onClick:Q,class:"flex-1 px-4 py-2.5 border border-gray-300 dark:border-gray-600 dark:text-gray-200 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 font-medium"}," Annuler "),t("button",{onClick:we,disabled:z.value,class:"flex-1 px-4 py-2.5 bg-gray-900 dark:bg-emerald-600 dark:hover:bg-emerald-500 text-white rounded-xl hover:bg-gray-800 font-medium disabled:opacity-50"},s(z.value?"Enregistrement...":"Enregistrer"),9,va)])])])):_("",!0)]),_:1})]))}});export{qa as default};
