import{d as Se,r as n,a as A,C as Fe,w as W,e as d,f as t,j as c,k as _,n as P,g,t as s,y as q,z as N,F as x,h as b,D as Ae,B as Pe,v as le,T as de,s as E,m as U,l as S,o as G,G as qe,A as Ee,p as Me,E as Le,q as l}from"./index-Bl-DGyDc.js";import{R as ne}from"./refresh-cw-DCDDjdqj.js";import{S as Ve}from"./search-4JT1iSRQ.js";import{R as ie}from"./receipt-DDlwYCh-.js";import{C as je,a as Re,b as Be,c as Ie}from"./chevrons-right-CZ1LSBJr.js";import{C as $e}from"./chevron-up-DV54CdZu.js";import{S as ze}from"./square-pen-Dm7Kh3nX.js";import{X as Ne}from"./x-DNLlolV6.js";import{B as ce,S as Ue,G as ge,H as ue,W as ye}from"./wrench-CdUulFOc.js";import{C as X}from"./credit-card-CAUDYgFf.js";const Ge={class:"flex-1 p-4 lg:p-6 overflow-auto bg-gray-50 dark:bg-gray-900"},He={class:"max-w-6xl mx-auto space-y-6"},Oe={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Ze=["disabled"],Ke={class:"grid grid-cols-3 gap-4"},Qe={class:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700"},We={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},Xe={class:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700"},Je={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},Ye={class:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700"},et={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},tt={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},at={class:"space-y-4"},rt={class:"flex flex-col lg:flex-row gap-4"},st={class:"relative flex-1"},ot={class:"flex flex-wrap gap-2"},lt=["onClick"],dt={key:0,class:"flex flex-wrap items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-xl"},nt={class:"flex items-center gap-2"},it={class:"flex items-center gap-2"},ct={class:"flex flex-wrap items-center gap-3"},gt={class:"flex gap-2"},ut=["onClick"],yt={class:"flex items-center gap-2 ml-auto"},xt=["value"],bt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},mt={key:0,class:"p-8 text-center"},vt={key:1,class:"p-8 text-center"},pt={key:2,class:"divide-y divide-gray-100 dark:divide-gray-700"},kt=["onClick"],ht={class:"hidden sm:block w-24 flex-shrink-0"},ft={class:"text-sm font-medium text-gray-900 dark:text-white"},_t={class:"text-xs text-gray-500 dark:text-gray-400"},wt={class:"flex-shrink-0"},Ct={class:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-xs font-mono font-medium"},Dt={class:"flex-1 min-w-0"},Tt={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},St={key:0,class:"text-xs text-gray-500 dark:text-gray-400 truncate"},Ft={class:"hidden md:flex items-center gap-2"},At={class:"text-right flex-shrink-0"},Pt={class:"text-lg font-bold text-gray-900 dark:text-white"},qt={class:"text-xs text-gray-500 dark:text-gray-400 sm:hidden"},Et={key:0,class:"px-4 pb-4 overflow-hidden"},Mt={class:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4 space-y-4"},Lt={class:"space-y-2"},Vt={class:"text-gray-700 dark:text-gray-300"},jt={class:"font-medium text-gray-900 dark:text-white"},Rt={class:"border-t border-gray-200 dark:border-gray-600 pt-3 space-y-1"},Bt={class:"flex justify-between text-sm"},It={class:"text-gray-700 dark:text-gray-300"},$t={class:"flex justify-between text-sm"},zt={class:"text-gray-700 dark:text-gray-300"},Nt={key:0,class:"flex justify-between text-sm"},Ut={class:"text-red-600 dark:text-red-400"},Gt={class:"flex justify-between text-base font-bold pt-2 border-t border-gray-200 dark:border-gray-600"},Ht={class:"text-gray-900 dark:text-white"},Ot={class:"border-t border-gray-200 dark:border-gray-600 pt-3 flex items-center justify-between gap-4 flex-wrap"},Zt={class:"flex items-center gap-2 flex-wrap"},Kt=["onClick"],Qt={key:3,class:"flex flex-wrap items-center justify-between gap-4 px-4 py-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50"},Wt={class:"flex items-center gap-3"},Xt=["max"],Jt={class:"text-sm text-gray-600 dark:text-gray-400"},Yt={class:"flex items-center gap-2"},ea=["disabled"],ta=["disabled"],aa={class:"flex gap-1"},ra=["onClick"],sa=["disabled"],oa=["disabled"],la={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50"},da={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-md overflow-hidden border border-gray-200 dark:border-gray-700"},na={class:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between"},ia={class:"p-4 space-y-4"},ca={class:"text-sm text-gray-600 dark:text-gray-300"},ga={class:"font-mono font-semibold"},ua={class:"font-bold"},ya={class:"grid grid-cols-2 sm:grid-cols-3 gap-2"},xa=["onClick"],ba={class:"text-xs font-medium"},ma={class:"p-4 border-t border-gray-200 dark:border-gray-700 flex gap-3"},va=["disabled"],Aa=Se({__name:"HistoriquePage",setup(pa){const M=n([]),m=n(null),H=n(null),O=n(null),w=n(!0),L=n(""),y=n("today"),V=n(""),j=n(""),v=n("all"),C=n(50),i=n(1),R=n(null),D=n(null),F=n("card"),B=n(!1),xe=[{id:"cash",label:"Espèces",icon:ce},{id:"card",label:"CB",icon:X},{id:"contactless",label:"Sans contact",icon:Ue},{id:"amex",label:"American Express",icon:X},{id:"check",label:"Chèque",icon:Me},{id:"gift_card",label:"Chèque Cadeau",icon:ge},{id:"free",label:"Gratuit",icon:ue},{id:"technical",label:"Utilisation technique",icon:ye}],be=[{id:"today",label:"Aujourd'hui"},{id:"week",label:"Cette semaine"},{id:"month",label:"Ce mois"},{id:"custom",label:"Période"},{id:"all",label:"Tout"}],me=[{id:"all",label:"Tous"},{id:"completed",label:"Complétées"},{id:"cancelled",label:"Annulées"},{id:"refunded",label:"Remboursées"},{id:"pending",label:"En attente"}],ve=[25,50,100],p=A(()=>{const r=m.value??0,e=C.value;return Math.max(1,Math.ceil(r/e))}),Z=A(()=>{const r=m.value??0,e=C.value,a=i.value,o=r===0?0:(a-1)*e+1,u=Math.min(a*e,r);return{from:o,to:u,total:r}}),pe=A(()=>{const r=p.value,e=i.value,a=2,o=[];for(let u=Math.max(1,e-a);u<=Math.min(r,e+a);u++)o.push(u);return o});function ke(){const r=new Date,e=r.toISOString().split("T")[0]??null;return e?y.value==="today"?{startDate:e,endDate:e}:y.value==="week"?{startDate:new Date(r.getTime()-6048e5).toISOString().split("T")[0]??e,endDate:e}:y.value==="month"?{startDate:new Date(r.getTime()-2592e6).toISOString().split("T")[0]??e,endDate:e}:y.value==="custom"&&V.value&&j.value?{startDate:V.value,endDate:j.value}:{startDate:null,endDate:null}:{startDate:null,endDate:null}}const k=async()=>{w.value=!0;try{const{startDate:r,endDate:e}=ke(),a=C.value,u=(i.value-1)*a,Ce=u+a-1;let h=E.from("sales").select("*",{count:"exact",head:!0});r&&(h=h.gte("created_at",r)),e&&(h=h.lte("created_at",e+"T23:59:59.999Z")),v.value!=="all"&&(h=h.eq("status",v.value));const{count:De}=await h;m.value=De??null,H.value=null,O.value=null;try{const{data:z}=await E.rpc("get_sales_stats",{p_start_date:r??null,p_end_date:e!=null?e+"T23:59:59.999Z":null});if(z&&Array.isArray(z)&&z[0]){const oe=z[0];H.value=Number(oe.total_amount),O.value=Number(oe.avg_ticket)}}catch{}let f=E.from("sales").select(`
        *,
        vendor:vendors(first_name, last_name),
        client:clients(first_name, last_name),
        items:sale_items(id, product_name, quantity, price_ht, subtotal_ttc),
        payments(method, amount)
      `).order("created_at",{ascending:!1}).range(u,Ce);r&&(f=f.gte("created_at",r)),e&&(f=f.lte("created_at",e+"T23:59:59.999Z")),v.value!=="all"&&(f=f.eq("status",v.value));const{data:Te,error:se}=await f;if(se)throw se;M.value=Te||[]}catch(r){console.error("Erreur chargement historique:",r),M.value=[]}finally{w.value=!1}},T=r=>{i.value=Math.max(1,Math.min(r,p.value)),k()},I=n(""),J=()=>{I.value=String(i.value)},Y=()=>{const r=parseInt(I.value,10);!isNaN(r)&&r>=1?T(r):J()},ee=()=>{i.value=1,k()},$=A(()=>{if(!L.value.trim())return M.value;const r=L.value.toLowerCase();return M.value.filter(e=>e.ticket_number.toLowerCase().includes(r)||e.client?.first_name?.toLowerCase().includes(r)||e.client?.last_name?.toLowerCase().includes(r)||e.vendor?.first_name?.toLowerCase().includes(r)||e.vendor?.last_name?.toLowerCase().includes(r))}),K=A(()=>{const r=$.value.reduce((o,u)=>o+u.total,0),e=$.value.length,a=e>0?r/e:0;return{total:r,count:e,avgTicket:a}}),he=r=>{R.value=R.value===r?null:r},te=r=>new Date(r).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),fe=r=>new Date(r).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),ae=r=>{switch(r){case"cash":return ce;case"card":case"contactless":case"amex":return X;case"free":return ue;case"technical":return ye;case"gift_card":return ge;default:return Le}},re=r=>({cash:"Espèces",card:"Carte",contactless:"Sans contact",amex:"American Express",check:"Chèque",gift_card:"Chèque Cadeau",free:"Gratuit",technical:"Utilisation technique"})[r]||r,_e=r=>{D.value=r;const e=r.payments?.[0];F.value=e?.method??"card"},Q=()=>{D.value=null},we=async()=>{const r=D.value;if(r){B.value=!0;try{await E.from("payments").delete().eq("sale_id",r.id);const{error:e}=await E.from("payments").insert({sale_id:r.id,method:F.value,amount:r.total});if(e)throw e;r.payments=[{method:F.value,amount:r.total}],Q()}catch(e){console.error("Erreur modification paiement:",e),alert("Impossible de modifier le paiement.")}finally{B.value=!1}}};return Fe(k),W([i,C],()=>k()),W(i,()=>J(),{immediate:!0}),W([y,v],()=>{i.value=1,y.value!=="custom"&&k()}),(r,e)=>(l(),d("main",Ge,[t("div",He,[t("div",Oe,[e[10]||(e[10]=t("div",null,[t("h1",{class:"text-xl lg:text-2xl font-bold text-gray-900 dark:text-white"},"Historique des ventes"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Consultez toutes les transactions")],-1)),t("button",{onClick:k,disabled:w.value,class:"inline-flex items-center gap-2 px-4 py-2 bg-gray-900 dark:bg-emerald-600 dark:hover:bg-emerald-500 text-white rounded-xl hover:bg-gray-800 transition-colors disabled:opacity-50"},[c(g(ne),{class:P(["w-4 h-4",w.value&&"animate-spin"])},null,8,["class"]),e[9]||(e[9]=t("span",null,"Actualiser",-1))],8,Ze)]),t("div",Ke,[t("div",Qe,[e[11]||(e[11]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider font-semibold"},"Total",-1)),t("p",We,s((H.value??K.value.total).toFixed(2))+"€",1)]),t("div",Xe,[e[12]||(e[12]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider font-semibold"},"Ventes",-1)),t("p",Je,s(m.value??K.value.count),1)]),t("div",Ye,[e[13]||(e[13]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider font-semibold"},"Panier moyen",-1)),t("p",et,s((O.value??K.value.avgTicket).toFixed(2))+"€",1)])]),m.value!=null&&m.value>0?(l(),d("p",tt,s(Z.value.from)+"-"+s(Z.value.to)+" sur "+s(Z.value.total)+" ventes ",1)):_("",!0),t("div",at,[t("div",rt,[t("div",st,[c(g(Ve),{class:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 dark:text-gray-500"}),q(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>L.value=a),type:"text",placeholder:"Rechercher par ticket, client, vendeur...",class:"w-full pl-12 pr-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl text-sm focus:outline-none focus:border-gray-900 dark:focus:border-emerald-500 focus:ring-2 focus:ring-gray-900/10 dark:focus:ring-emerald-500/30"},null,512),[[N,L.value]])]),t("div",ot,[(l(),d(x,null,b(be,a=>t("button",{key:a.id,onClick:o=>{y.value=a.id,a.id!=="custom"&&k()},class:P(["px-4 py-2 text-sm font-medium rounded-xl transition-colors",y.value===a.id?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"])},s(a.label),11,lt)),64))])]),y.value==="custom"?(l(),d("div",dt,[t("div",nt,[e[14]||(e[14]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Du",-1)),q(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>V.value=a),type:"date",class:"px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm dark:text-gray-100"},null,512),[[N,V.value]])]),t("div",it,[e[15]||(e[15]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Au",-1)),q(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>j.value=a),type:"date",class:"px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm dark:text-gray-100"},null,512),[[N,j.value]])]),t("button",{onClick:ee,class:"px-4 py-2 text-sm font-medium bg-gray-900 dark:bg-emerald-600 text-white rounded-xl hover:bg-gray-800 dark:hover:bg-emerald-500 transition-colors"}," Appliquer ")])):_("",!0),t("div",ct,[t("div",gt,[(l(),d(x,null,b(me,a=>t("button",{key:a.id,onClick:o=>{v.value=a.id,ee()},class:P(["px-3 py-1.5 text-sm font-medium rounded-lg transition-colors",v.value===a.id?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"])},s(a.label),11,ut)),64))]),t("div",yt,[e[16]||(e[16]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Par page",-1)),q(t("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>C.value=a),class:"px-3 py-1.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm dark:text-gray-100"},[(l(),d(x,null,b(ve,a=>t("option",{key:a,value:a},s(a),9,xt)),64))],512),[[Ae,C.value,void 0,{number:!0}]])])])]),t("div",bt,[w.value?(l(),d("div",mt,[c(g(ne),{class:"w-8 h-8 text-gray-400 dark:text-gray-500 animate-spin mx-auto"}),e[17]||(e[17]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-2"},"Chargement...",-1))])):$.value.length===0?(l(),d("div",vt,[c(g(ie),{class:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto"}),e[18]||(e[18]=t("p",{class:"text-gray-500 dark:text-gray-400 mt-2"},"Aucune vente trouvée",-1))])):(l(),d("div",pt,[(l(!0),d(x,null,b($.value,a=>(l(),d("div",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[t("button",{onClick:o=>he(a.id),class:"w-full px-4 py-4 flex items-center gap-4 text-left"},[t("div",ht,[t("p",ft,s(te(a.created_at)),1),t("p",_t,s(fe(a.created_at)),1)]),t("div",wt,[t("span",Ct,[c(g(ie),{class:"w-3.5 h-3.5"}),S(" "+s(a.ticket_number),1)])]),t("div",Dt,[t("p",Tt,s(a.client?.first_name)+" "+s(a.client?.last_name),1),a.vendor?(l(),d("p",St," Vendeur: "+s(a.vendor.first_name)+" "+s(a.vendor.last_name),1)):_("",!0)]),t("div",Ft,[(l(!0),d(x,null,b(a.payments,o=>(l(),d("span",{key:o.method,class:"inline-flex items-center gap-1 px-2 py-1 bg-gray-50 dark:bg-gray-700 rounded text-xs text-gray-600 dark:text-gray-300"},[(l(),U(G(ae(o.method)),{class:"w-3.5 h-3.5"})),S(" "+s(re(o.method)),1)]))),128))]),t("div",At,[t("p",Pt,s(a.total.toFixed(2))+"€",1),t("p",qt,s(te(a.created_at)),1)]),(l(),U(G(R.value===a.id?g($e):g(qe)),{class:"w-5 h-5 text-gray-400 dark:text-gray-500 flex-shrink-0"}))],8,kt),c(de,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 max-h-0","enter-to-class":"opacity-100 max-h-96","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 max-h-96","leave-to-class":"opacity-0 max-h-0"},{default:le(()=>[R.value===a.id?(l(),d("div",Et,[t("div",Mt,[t("div",null,[e[19]||(e[19]=t("p",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2"},"Articles",-1)),t("div",Lt,[(l(!0),d(x,null,b(a.items,o=>(l(),d("div",{key:o.id,class:"flex items-center justify-between text-sm"},[t("span",Vt,s(o.quantity)+"x "+s(o.product_name),1),t("span",jt,s(o.subtotal_ttc.toFixed(2))+"€",1)]))),128))])]),t("div",Rt,[t("div",Bt,[e[20]||(e[20]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Sous-total HT",-1)),t("span",It,s(a.subtotal_ht.toFixed(2))+"€",1)]),t("div",$t,[e[21]||(e[21]=t("span",{class:"text-gray-500 dark:text-gray-400"},"TVA",-1)),t("span",zt,s(a.total_tva.toFixed(2))+"€",1)]),a.discount_amount>0?(l(),d("div",Nt,[e[22]||(e[22]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Remise",-1)),t("span",Ut,"-"+s(a.discount_amount.toFixed(2))+"€",1)])):_("",!0),t("div",Gt,[e[23]||(e[23]=t("span",{class:"text-gray-900 dark:text-white"},"Total",-1)),t("span",Ht,s(a.total.toFixed(2))+"€",1)])]),t("div",Ot,[t("div",Zt,[e[24]||(e[24]=t("span",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Paiement",-1)),(l(!0),d(x,null,b(a.payments,o=>(l(),d("span",{key:o.method,class:"inline-flex items-center gap-1 px-2 py-1 bg-white dark:bg-gray-600 rounded-lg text-sm text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-500"},[(l(),U(G(ae(o.method)),{class:"w-4 h-4"})),S(" "+s(re(o.method))+" — "+s(o.amount.toFixed(2))+"€ ",1)]))),128))]),t("button",{onClick:Ee(o=>_e(a),["stop"]),class:"inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-500 transition-colors"},[c(g(ze),{class:"w-4 h-4"}),e[25]||(e[25]=S(" Modifier le paiement ",-1))],8,Kt)])])])):_("",!0)]),_:2},1024)]))),128))])),!w.value&&m.value!=null&&m.value>0?(l(),d("div",Qt,[t("div",Wt,[e[26]||(e[26]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Page",-1)),q(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>I.value=a),type:"number",min:"1",max:p.value,onKeydown:Pe(Y,["enter"]),onBlur:Y,class:"w-16 px-2 py-1.5 text-sm text-center bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500"},null,40,Xt),[[N,I.value]]),t("span",Jt,"/ "+s(p.value),1)]),t("div",Yt,[t("button",{disabled:i.value<=1,onClick:e[5]||(e[5]=a=>T(1)),title:"Première page",class:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[c(g(je),{class:"w-5 h-5"})],8,ea),t("button",{disabled:i.value<=1,onClick:e[6]||(e[6]=a=>T(i.value-1)),class:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[c(g(Re),{class:"w-5 h-5"})],8,ta),t("div",aa,[(l(!0),d(x,null,b(pe.value,a=>(l(),d("button",{key:a,onClick:o=>T(a),class:P(["min-w-[2.25rem] px-2 py-1.5 text-sm font-medium rounded-lg transition-colors",i.value===a?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"])},s(a),11,ra))),128))]),t("button",{disabled:i.value>=p.value,onClick:e[7]||(e[7]=a=>T(i.value+1)),class:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[c(g(Be),{class:"w-5 h-5"})],8,sa),t("button",{disabled:i.value>=p.value,onClick:e[8]||(e[8]=a=>T(p.value)),title:"Dernière page",class:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[c(g(Ie),{class:"w-5 h-5"})],8,oa)])])):_("",!0)])]),c(de,{"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:le(()=>[D.value?(l(),d("div",la,[t("div",da,[t("div",na,[e[27]||(e[27]=t("h3",{class:"text-lg font-bold text-gray-900 dark:text-white"},"Modifier le mode de paiement",-1)),t("button",{onClick:Q,class:"p-2 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg"},[c(g(Ne),{class:"w-5 h-5"})])]),t("div",ia,[t("p",ca,[e[28]||(e[28]=S(" Ticket ",-1)),t("span",ga,s(D.value.ticket_number),1),e[29]||(e[29]=S(" — Total ",-1)),t("span",ua,s(D.value.total.toFixed(2))+"€",1)]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider mb-2"},"Nouveau mode de paiement",-1)),t("div",ya,[(l(),d(x,null,b(xe,a=>t("button",{key:a.id,onClick:o=>F.value=a.id,class:P(["flex flex-col items-center gap-1.5 p-3 rounded-xl border-2 transition-colors",F.value===a.id?"border-gray-900 dark:border-emerald-500 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white":"border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-400 hover:border-gray-300 dark:hover:border-gray-500 hover:bg-gray-50 dark:hover:bg-gray-700"])},[(l(),U(G(a.icon),{class:"w-5 h-5"})),t("span",ba,s(a.label),1)],10,xa)),64))])])]),t("div",ma,[t("button",{onClick:Q,class:"flex-1 px-4 py-2.5 border border-gray-300 dark:border-gray-600 dark:text-gray-200 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 font-medium"}," Annuler "),t("button",{onClick:we,disabled:B.value,class:"flex-1 px-4 py-2.5 bg-gray-900 dark:bg-emerald-600 dark:hover:bg-emerald-500 text-white rounded-xl hover:bg-gray-800 font-medium disabled:opacity-50"},s(B.value?"Enregistrement...":"Enregistrer"),9,va)])])])):_("",!0)]),_:1})]))}});export{Aa as default};
