import{c as We,a as M,r as g,s as V,d as mr,u as pr,w as Me,C as kr,e as d,f as r,k as _,m as E,j as x,l as A,g as l,P as Re,n as p,H as De,y,F as C,h as T,z as b,t as i,D as ue,B as ge,x as ye,N as Fe,q as o}from"./index-DlgJK6M0.js";import{R as X}from"./refresh-cw-jMjeuc1p.js";import{P as Ke}from"./plus-BHVcOIaE.js";import{C as vr,a as fr,b as hr,c as wr}from"./chevrons-right-DsiIExj7.js";import{X as ce}from"./x--dGNUvlK.js";import{C as Ge,a as Qe}from"./circle-arrow-up-B_mcV6JO.js";const Se=We("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);const _r=We("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),be=g([]),Ee=g([]),Pe=g([]),Y=g(!1),P=g(!1);function Cr(){const $=async()=>{Y.value=!0;try{const{data:s,error:c}=await V.from("products").select("*, category:categories(id, name, slug)").eq("type","product").order("display_order");if(c)throw c;be.value=s||[]}catch(s){console.error("Erreur chargement produits (stock):",s),be.value=[]}finally{Y.value=!1}},O=async s=>{Y.value=!0;try{let c=V.from("stock_movements").select("*").order("created_at",{ascending:!1}).limit(s?100:200);s&&(c=c.eq("product_id",s));const{data:v,error:f}=await c;if(f)throw f;Pe.value=v||[]}catch(c){console.error("Erreur chargement mouvements:",c),Pe.value=[]}finally{Y.value=!1}},xe=async s=>{const{product_id:c,type:v,reason:f,reference_id:q=null,vendor_id:pe=null}=s;let m=s.quantity;v==="out"&&m>0&&(m=-m),v==="in"&&m<0&&(m=Math.abs(m)),P.value=!0;try{const{error:L}=await V.from("stock_movements").insert({product_id:c,variant_id:null,type:v,quantity:m,reason:f,reference_id:q,vendor_id:pe});if(L)throw L;const{data:te}=await V.from("products").select("stock").eq("id",c).single(),D=te?.stock??0,z=Math.max(0,D+m),{error:U}=await V.from("products").update({stock:z,updated_at:new Date().toISOString()}).eq("id",c);if(U)throw U;await $(),await O(c)}finally{P.value=!1}},Q=async()=>{try{const{data:s,error:c}=await V.from("categories").select("*").eq("is_active",!0).order("display_order");if(c)throw c;Ee.value=s||[]}catch(s){console.error("Erreur chargement catégories:",s),Ee.value=[]}},R=async s=>{P.value=!0;try{const{error:c}=await V.from("products").insert({name:s.name,code:s.code||null,category_id:s.category_id||null,brand:s.brand??null,model:s.model??null,barcode:s.barcode?.trim()||null,type:"product",price_ht:s.price_ht,price_ttc:s.price_ttc,tva_rate:s.tva_rate??.2,size:s.size||null,stock:s.stock??0,alert_threshold:s.alert_threshold??5,is_active:!0,display_order:999});if(c)throw c;await $()}finally{P.value=!1}},J=async(s,c)=>{P.value=!0;try{const{error:v}=await V.from("products").update({alert_threshold:Math.max(0,c),updated_at:new Date().toISOString()}).eq("id",s);if(v)throw v;await $()}finally{P.value=!1}},ee=async(s,c)=>{P.value=!0;try{const v=c?.trim()||null,{error:f}=await V.from("products").update({barcode:v,updated_at:new Date().toISOString()}).eq("id",s);if(f)throw f;await $()}finally{P.value=!1}},j=async(s,c)=>{P.value=!0;try{const{error:v}=await V.from("products").update({...c,updated_at:new Date().toISOString()}).eq("id",s);if(v)throw v;await $()}finally{P.value=!1}},re=M(()=>be.value),me=M(()=>be.value.filter(s=>s.stock<=s.alert_threshold));return{productsWithStock:re,productsOnly:re,lowStockList:me,categories:Ee,movements:Pe,loadProducts:$,loadCategories:Q,loadMovements:O,addMovement:xe,createProduct:R,updateAlertThreshold:J,updateBarcode:ee,updateProduct:j,isLoading:Y,isSaving:P}}const Mr={class:"flex-1 px-3 py-4 lg:px-4 lg:py-6 overflow-auto bg-gray-50 dark:bg-gray-900"},Sr={class:"max-w-7xl mx-auto space-y-6"},Er={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Pr={class:"text-xl lg:text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2"},Vr=["disabled"],Ar={class:"flex rounded-xl border border-gray-200 dark:border-gray-600 overflow-hidden bg-white dark:bg-gray-800"},Tr={key:0,class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 p-4"},Ur={class:"flex flex-wrap items-center gap-3"},jr={class:"flex rounded-xl border border-gray-200 dark:border-gray-600 overflow-hidden"},qr=["onClick"],Nr={key:1,class:"flex justify-center py-20"},$r={key:2,class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},Lr={class:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between"},zr=["disabled"],Ir={class:"overflow-x-auto"},Br={class:"w-full text-left"},Hr={class:"divide-y divide-gray-100 dark:divide-gray-700"},Or={class:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400"},Rr={class:"px-4 py-3 text-sm font-medium text-gray-900 dark:text-white"},Dr={class:"px-4 py-3"},Fr={class:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400"},Kr={key:0,class:"p-8 text-center text-gray-500 dark:text-gray-400"},Gr={key:3,class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},Qr={class:"overflow-x-auto lg:overflow-x-visible"},Wr={class:"w-full text-left table-fixed"},Zr={class:"divide-y divide-gray-100 dark:divide-gray-700"},Xr={class:"px-3 py-3 w-[20%]"},Yr={class:"flex items-center gap-2 min-w-0"},Jr=["title"],et={class:"px-3 py-3 text-sm text-gray-500 dark:text-gray-400 w-[6%]"},rt={class:"px-3 py-3 text-sm w-[12%] min-w-0"},tt=["title"],at=["onClick"],ot=["title"],lt=["title"],dt=["title"],st={class:"px-3 py-3 text-center w-[9%]"},nt={key:0,class:"flex items-center justify-center gap-2"},it={class:"text-gray-600 dark:text-gray-300"},ut=["onClick"],gt={class:"px-3 py-3 w-[19%]"},yt={class:"flex items-center gap-2 flex-wrap"},ct=["onClick"],bt=["onClick"],xt=["onClick"],mt={key:0,class:"p-6 text-center text-gray-500 dark:text-gray-400"},pt={key:1,class:"flex flex-wrap items-center justify-between gap-4 px-4 py-3 border-t border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-800/50"},kt={class:"flex items-center gap-3"},vt={class:"text-sm text-gray-600 dark:text-gray-400"},ft=["value"],ht={class:"flex items-center gap-2"},wt=["max"],_t={class:"text-sm text-gray-600 dark:text-gray-400"},Ct=["disabled"],Mt=["disabled"],St={class:"flex gap-1"},Et=["onClick"],Pt=["disabled"],Vt=["disabled"],At={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50"},Tt={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-md w-full p-6 border border-gray-200 dark:border-gray-700"},Ut={class:"flex items-center justify-between mb-4"},jt={class:"text-sm text-gray-600 dark:text-gray-300 mb-4"},qt={class:"space-y-4"},Nt=["min","placeholder"],$t={class:"flex gap-3 mt-6"},Lt=["disabled"],zt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50"},It={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-2xl w-full max-h-[80vh] flex flex-col border border-gray-200 dark:border-gray-700"},Bt={class:"p-6 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between"},Ht={class:"text-lg font-semibold text-gray-900 dark:text-white"},Ot={class:"p-6 overflow-y-auto flex-1"},Rt={key:0,class:"text-center text-gray-500 dark:text-gray-400 py-8"},Dt={key:1,class:"space-y-2"},Ft={class:"flex items-center gap-3"},Kt={class:"text-sm font-medium text-gray-900 dark:text-white"},Gt={class:"text-xs text-gray-500 dark:text-gray-400"},Qt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 overflow-y-auto"},Wt={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-lg w-full my-8 p-6 border border-gray-200 dark:border-gray-700"},Zt={class:"flex items-center justify-between mb-6"},Xt={class:"space-y-4"},Yt=["value"],Jt={key:0,class:"space-y-2"},ea={key:0,class:"flex gap-2 mb-2"},ra={class:"flex flex-wrap gap-2"},ta=["onClick"],aa={class:"grid grid-cols-2 gap-4"},oa={class:"grid grid-cols-2 gap-4"},la={class:"grid grid-cols-2 gap-4"},da={class:"flex gap-3 mt-6"},sa=["disabled"],na={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 overflow-y-auto"},ia={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-lg w-full my-8 p-6 border border-gray-200 dark:border-gray-700"},ua={class:"flex items-center justify-between mb-6"},ga={class:"space-y-4"},ya=["value"],ca={key:0,class:"space-y-2"},ba={key:0,class:"flex gap-2 mb-2"},xa={class:"flex flex-wrap gap-2"},ma=["onClick"],pa={class:"grid grid-cols-2 gap-4"},ka={class:"grid grid-cols-2 gap-4"},va={class:"flex gap-3 mt-6"},fa=["disabled"],Ea=mr({__name:"StockPage",setup($){const{productsWithStock:O,lowStockList:xe,categories:Q,movements:R,loadProducts:J,loadCategories:ee,loadMovements:j,addMovement:re,createProduct:me,updateProduct:s,updateAlertThreshold:c,updateBarcode:v,isLoading:f,isSaving:q}=Cr(),{vendor:pe}=pr(),m=g("products"),L=g("all"),te=M(()=>L.value==="alert"?xe.value:O.value),D=g(""),z=M(()=>{const a=D.value.trim().toLowerCase();return a?te.value.filter(e=>e.name.toLowerCase().includes(a)||e.code&&e.code.toLowerCase().includes(a)||e.barcode&&e.barcode.toLowerCase().includes(a)||e.brand&&e.brand.toLowerCase().includes(a)||e.model&&e.model.toLowerCase().includes(a)):te.value}),U=g(25),Ze=[25,50,100],h=g(1),I=M(()=>Math.max(1,Math.ceil(z.value.length/U.value))),ke=M(()=>{const a=z.value.length,e=U.value,t=h.value,k=a===0?0:(t-1)*e+1,Z=Math.min(t*e,a);return{from:k,to:Z,total:a}}),Xe=M(()=>{const a=I.value,e=h.value,t=2,k=[];for(let Z=Math.max(1,e-t);Z<=Math.min(a,e+t);Z++)k.push(Z);return k}),Ye=M(()=>{const a=(h.value-1)*U.value;return z.value.slice(a,a+U.value)}),F=a=>{h.value=Math.max(1,Math.min(a,I.value))},ae=g(""),Ve=()=>{ae.value=String(h.value)},Ae=()=>{const a=parseInt(ae.value,10);!isNaN(a)&&a>=1&&F(a),Ve()};Me(h,()=>Ve(),{immediate:!0}),Me([L,D],()=>{h.value=1});const ve=g(!1),B=g(null),w=g("in"),H=g(1),oe=g("");function Je(a){B.value=a,w.value="in",H.value=1,oe.value="",ve.value=!0}function fe(){ve.value=!1,B.value=null}async function er(){if(!B.value)return;const a=H.value;if(!(a<=0&&w.value!=="adjustment")&&!(w.value==="adjustment"&&a===0))try{await re({product_id:B.value.id,type:w.value,quantity:H.value,reason:oe.value||(w.value==="in"?"Entrée stock":w.value==="out"?"Sortie stock":"Ajustement"),vendor_id:pe.value?.id??null}),fe()}catch(e){alert(e instanceof Error?e.message:"Erreur lors de l'enregistrement")}}const he=g(!1),le=g(null);function rr(a){le.value=a,he.value=!0,j(a.id)}function tr(){m.value="history",j()}function ar(){he.value=!1,le.value=null}const K=g(null),de=g(0);function or(a){K.value=a.id,de.value=a.alert_threshold}const G=g(null),se=g("");function lr(a){G.value=a.id,se.value=a.barcode||""}function Te(){G.value=null}async function Ue(){if(G.value)try{await v(G.value,se.value||null),G.value=null}catch(a){alert(a instanceof Error?a.message:"Erreur")}}function dr(){K.value=null}async function je(){if(K.value)try{await c(K.value,de.value),K.value=null}catch(a){alert(a instanceof Error?a.message:"Erreur")}}const qe=a=>new Date(a).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),sr=a=>O.value.find(e=>e.id===a)?.name??"Produit inconnu",nr=(a,e)=>{const t=Math.abs(e);return a==="in"?`+${t}`:a==="out"?`-${t}`:e>=0?`+${e}`:`${e}`},Ne=["chaussures","boots","bottines","mocassins","souliers","tennis","baskets"],ir=[36,36.5,37,37.5,38,38.5,39,39.5,40,40.5,41,41.5,42,42.5,43,43.5,44,44.5,45,45.5,46,46.5,47],ur=[{fr:36,uk:3},{fr:37,uk:4},{fr:38,uk:5},{fr:39,uk:6},{fr:40,uk:6.5},{fr:40.5,uk:7},{fr:41,uk:7.5},{fr:42,uk:8},{fr:42.5,uk:8.5},{fr:43,uk:9},{fr:43.5,uk:9.5},{fr:44,uk:10},{fr:45,uk:10.5},{fr:45.5,uk:11},{fr:46,uk:11.5},{fr:47,uk:12}],gr=[90,95,100,105,110,115,120,125,130],$e=M(()=>{const a=ie.value?n.value.category_id:u.value.category_id;return Q.value.find(e=>e.id===a)?.slug||""}),Le=M(()=>Ne.includes($e.value)),S=g("fr"),N=g(null),ne=M(()=>{const a=$e.value;return Ne.includes(a)?S.value==="fr"?ir.map(e=>String(e)):ur.map(e=>`${e.fr} (${e.uk} UK)`):a==="ceintures"?gr.map(e=>String(e)):a&&!["echarpes","chaussettes","ceintures-tressees"].includes(a)?["TU"]:[]}),ie=g(!1),n=g({name:"",code:"",barcode:"",category_id:"",brand:"",model:"",price_ht:0,price_ttc:0,tva_rate:.2,stock:0,alert_threshold:5}),ze=g(null);function yr(){n.value={name:"",code:"",barcode:"",category_id:"",brand:"",model:"",price_ht:0,price_ttc:0,tva_rate:.2,stock:0,alert_threshold:5},N.value=null,S.value="fr",ie.value=!0,ee(),Fe(()=>ze.value?.focus())}function we(){ie.value=!1}const Ie=M({get:()=>{const a=Number(n.value.price_ht)||0,e=Number(n.value.price_ttc)||0;return a>0?e/a:1.2},set:a=>{const e=Number(n.value.price_ht)||0;n.value.price_ttc=e>0?e*a:0}}),Be=M({get:()=>{const a=Number(u.value.price_ht)||0,e=Number(u.value.price_ttc)||0;return a>0?e/a:1.2},set:a=>{const e=Number(u.value.price_ht)||0;u.value.price_ttc=e>0?e*a:0}});function He(a){N.value=N.value===a?null:a}async function cr(){if(!n.value.name.trim()){alert("Nom du produit requis.");return}try{await me({name:n.value.name.trim(),code:n.value.code.trim()||null,barcode:n.value.barcode.trim()||null,category_id:n.value.category_id||null,brand:n.value.brand.trim()||null,model:n.value.model.trim()||null,price_ht:Number(n.value.price_ht)||0,price_ttc:Number(n.value.price_ttc)||0,tva_rate:.2,size:N.value||null,stock:Math.max(0,Number(n.value.stock)||0),alert_threshold:Math.max(0,Number(n.value.alert_threshold)||5)}),we()}catch(a){alert(a instanceof Error?a.message:"Erreur lors de l'enregistrement")}}const _e=g(!1),W=g(null),u=g({name:"",code:"",barcode:"",category_id:"",brand:"",model:"",price_ht:0,price_ttc:0,tva_rate:.2,alert_threshold:5}),Oe=g(null);function br(a){W.value=a;const e=a.price_ttc??a.price_ht*(1+(a.tva_rate??.2));u.value={name:a.name,code:a.code||"",barcode:a.barcode||"",category_id:a.category_id||"",brand:a.brand||"",model:a.model||"",price_ht:a.price_ht,price_ttc:e,tva_rate:a.tva_rate??.2,alert_threshold:a.alert_threshold??5},N.value=a.size??null,S.value="fr",_e.value=!0,ee(),Fe(()=>Oe.value?.focus())}function Ce(){_e.value=!1,W.value=null}async function xr(){if(!(!W.value||!u.value.name.trim()))try{await s(W.value.id,{name:u.value.name.trim(),code:u.value.code.trim()||null,barcode:u.value.barcode.trim()||null,category_id:u.value.category_id||null,brand:u.value.brand.trim()||null,model:u.value.model.trim()||null,price_ht:Number(u.value.price_ht)||0,price_ttc:Number(u.value.price_ttc)||0,tva_rate:.2,size:N.value||null,alert_threshold:Math.max(0,Number(u.value.alert_threshold)||5)}),Ce()}catch(a){alert(a instanceof Error?a.message:"Erreur lors de la mise à jour")}}return Me(m,a=>{a==="history"&&j()}),kr(()=>{J(),m.value==="history"&&j()}),(a,e)=>(o(),d("main",Mr,[r("div",Sr,[r("div",Er,[r("div",null,[r("h1",Pr,[x(l(Re),{class:"w-7 h-7 text-gray-600 dark:text-gray-400"}),e[40]||(e[40]=A(" Gestion du stock ",-1))]),e[41]||(e[41]=r("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Produits, mouvements et alertes",-1))]),r("button",{onClick:e[0]||(e[0]=t=>{l(J)(),l(j)()}),disabled:l(f),class:"inline-flex items-center gap-2 px-4 py-2 bg-gray-900 dark:bg-emerald-600 dark:hover:bg-emerald-500 text-white rounded-xl hover:bg-gray-800 transition-colors disabled:opacity-50"},[x(l(X),{class:p(["w-4 h-4",l(f)&&"animate-spin"])},null,8,["class"]),e[42]||(e[42]=A(" Actualiser ",-1))],8,Vr)]),r("div",Ar,[r("button",{onClick:e[1]||(e[1]=t=>m.value="products"),class:p(["flex-1 px-6 py-3 text-sm font-medium transition-colors flex items-center justify-center gap-2",m.value==="products"?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"])},[x(l(Re),{class:"w-4 h-4"}),e[43]||(e[43]=A(" Produits ",-1))],2),r("button",{onClick:tr,class:p(["flex-1 px-6 py-3 text-sm font-medium transition-colors flex items-center justify-center gap-2",m.value==="history"?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"])},[x(l(De),{class:"w-4 h-4"}),e[44]||(e[44]=A(" Historique global ",-1))],2)]),m.value==="products"?(o(),d("div",Tr,[r("div",Ur,[r("div",jr,[(o(),d(C,null,T([{id:"all",label:"Tous"},{id:"alert",label:"Alerte stock"}],t=>r("button",{key:t.id,onClick:k=>L.value=t.id,class:p(["px-4 py-2 text-sm font-medium transition-colors",L.value===t.id?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"])},i(t.label),11,qr)),64))]),r("button",{onClick:yr,class:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 dark:hover:bg-emerald-500"},[x(l(Ke),{class:"w-4 h-4"}),e[45]||(e[45]=A(" Ajouter un produit ",-1))]),y(r("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>D.value=t),type:"text",placeholder:"Rechercher un produit...",class:"flex-1 min-w-[200px] px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl text-sm focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},null,512),[[b,D.value]])])])):_("",!0),l(f)&&(m.value!=="products"||l(O).length===0)?(o(),d("div",Nr,[x(l(X),{class:"w-8 h-8 text-gray-400 dark:text-gray-500 animate-spin"})])):m.value==="history"?(o(),d("div",$r,[r("div",Lr,[e[47]||(e[47]=r("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider"},"Tous les mouvements de stock",-1)),r("button",{onClick:e[3]||(e[3]=t=>l(j)()),disabled:l(f),class:"inline-flex items-center gap-2 px-3 py-1.5 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50"},[x(l(X),{class:p(["w-4 h-4",l(f)&&"animate-spin"])},null,8,["class"]),e[46]||(e[46]=A(" Actualiser ",-1))],8,zr)]),r("div",Ir,[r("table",Br,[e[48]||(e[48]=r("thead",{class:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600"},[r("tr",null,[r("th",{class:"px-4 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider"},"Date"),r("th",{class:"px-4 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider"},"Produit"),r("th",{class:"px-4 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider"},"Type"),r("th",{class:"px-4 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider"},"Quantité"),r("th",{class:"px-4 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider"},"Motif")])],-1)),r("tbody",Hr,[(o(!0),d(C,null,T(l(R),t=>(o(),d("tr",{key:t.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[r("td",Or,i(qe(t.created_at)),1),r("td",Rr,i(sr(t.product_id)),1),r("td",Dr,[r("span",{class:p(["inline-flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium",t.type==="in"?"bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300":t.type==="out"?"bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"])},[t.type==="in"?(o(),E(l(Ge),{key:0,class:"w-3.5 h-3.5"})):t.type==="out"?(o(),E(l(Qe),{key:1,class:"w-3.5 h-3.5"})):(o(),E(l(X),{key:2,class:"w-3.5 h-3.5"})),A(" "+i(t.type==="in"?"Entrée":t.type==="out"?"Sortie":"Ajustement"),1)],2)]),r("td",{class:p(["px-4 py-3 font-semibold",t.quantity>0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"])},i(t.quantity>0?"+":"")+i(t.quantity),3),r("td",Fr,i(t.reason||"—"),1)]))),128))])])]),l(R).length===0?(o(),d("p",Kr," Aucun mouvement enregistré. ")):_("",!0)])):(o(),d("div",Gr,[r("div",Qr,[r("table",Wr,[e[52]||(e[52]=r("thead",{class:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600"},[r("tr",null,[r("th",{class:"px-3 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider w-[20%]"},"Produit"),r("th",{class:"px-3 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider w-[6%]"},"Code"),r("th",{class:"px-3 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider w-[12%]"},"Code-barres"),r("th",{class:"px-3 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider w-[9%]"},"Marque"),r("th",{class:"px-3 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider w-[9%]"},"Modèle"),r("th",{class:"px-3 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider w-[10%]"},"Catégorie"),r("th",{class:"px-3 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider text-center w-[6%]"},"Stock"),r("th",{class:"px-3 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider text-center w-[9%]"},"Seuil alerte"),r("th",{class:"px-3 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider w-[19%]"},"Actions")])],-1)),r("tbody",Zr,[(o(!0),d(C,null,T(Ye.value,t=>(o(),d("tr",{key:t.id,class:p(["hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",{"bg-amber-50 dark:bg-amber-900/20":t.stock<=t.alert_threshold}])},[r("td",Xr,[r("div",Yr,[r("span",{class:"font-medium text-gray-900 dark:text-white truncate",title:t.name},i(t.name),9,Jr),t.stock<=t.alert_threshold?(o(),E(l(_r),{key:0,class:"w-4 h-4 text-amber-500 shrink-0"})):_("",!0)])]),r("td",et,i(t.code||"—"),1),r("td",rt,[G.value===t.id?(o(),d(C,{key:0},[y(r("input",{"onUpdate:modelValue":e[4]||(e[4]=k=>se.value=k),type:"text",class:"w-full max-w-full px-2 py-1 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded text-sm box-border",placeholder:"EAN...",onKeydown:[ge(Ue,["enter"]),ge(Te,["escape"])]},null,544),[[b,se.value]]),r("div",{class:"flex gap-1 mt-1 flex-wrap"},[r("button",{type:"button",onClick:Ue,class:"text-xs text-emerald-600 hover:underline"},"OK"),r("button",{type:"button",onClick:Te,class:"text-xs text-gray-500 hover:underline"},"Annuler")])],64)):(o(),d(C,{key:1},[r("span",{class:"text-gray-600 dark:text-gray-300 truncate block",title:t.barcode||""},i(t.barcode||"—"),9,tt),r("button",{type:"button",onClick:k=>lr(t),class:"mt-0.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-xs shrink-0",title:"Modifier le code-barres"},[x(l(Se),{class:"w-3.5 h-3.5 inline"})],8,at)],64))]),r("td",{class:"px-3 py-3 text-sm text-gray-600 dark:text-gray-300 w-[9%] truncate",title:t.brand||""},i(t.brand||"—"),9,ot),r("td",{class:"px-3 py-3 text-sm text-gray-600 dark:text-gray-300 w-[9%] truncate",title:t.model||""},i(t.model||"—"),9,lt),r("td",{class:"px-3 py-3 text-sm text-gray-500 dark:text-gray-400 w-[10%] truncate",title:t.category?.name||""},i(t.category?.name||"—"),9,dt),r("td",{class:p(["px-3 py-3 text-center font-semibold w-[6%]",t.stock<=t.alert_threshold?"text-amber-600 dark:text-amber-400":"text-gray-900 dark:text-white"])},i(t.stock),3),r("td",st,[K.value===t.id?(o(),d("div",nt,[y(r("input",{"onUpdate:modelValue":e[5]||(e[5]=k=>de.value=k),type:"number",min:"0",class:"w-16 px-2 py-1 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded text-sm text-center",onKeydown:ge(je,["enter"])},null,544),[[b,de.value,void 0,{number:!0}]]),r("button",{onClick:je,class:"text-emerald-600 hover:underline text-sm"},"OK"),r("button",{onClick:dr,class:"text-gray-500 hover:underline text-sm"},"Annuler")])):(o(),d(C,{key:1},[r("span",it,i(t.alert_threshold),1),r("button",{onClick:k=>or(t),class:"ml-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 inline-flex",title:"Modifier le seuil"},[x(l(Se),{class:"w-3.5 h-3.5"})],8,ut)],64))]),r("td",gt,[r("div",yt,[r("button",{onClick:k=>Je(t),class:"inline-flex items-center gap-1 px-2 py-1.5 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",title:"Ajouter un mouvement"},[x(l(Ke),{class:"w-3.5 h-3.5"}),e[49]||(e[49]=A(" Mouvement ",-1))],8,ct),r("button",{onClick:k=>rr(t),class:"inline-flex items-center gap-1 px-2 py-1.5 text-xs font-medium text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",title:"Historique"},[x(l(De),{class:"w-3.5 h-3.5"}),e[50]||(e[50]=A(" Historique ",-1))],8,bt),r("button",{onClick:k=>br(t),class:"inline-flex items-center gap-1 px-2 py-1.5 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",title:"Modifier le produit"},[x(l(Se),{class:"w-3.5 h-3.5"}),e[51]||(e[51]=A(" Modifier ",-1))],8,xt)])])],2))),128))])])]),z.value.length===0?(o(),d("p",mt," Aucun produit à afficher. ")):_("",!0),!l(f)&&z.value.length>0?(o(),d("div",pt,[r("div",kt,[r("span",vt,i(ke.value.from)+"-"+i(ke.value.to)+" sur "+i(ke.value.total)+" produits ",1),e[53]||(e[53]=r("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Par page",-1)),y(r("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>U.value=t),class:"px-3 py-1.5 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-sm dark:text-gray-100"},[(o(),d(C,null,T(Ze,t=>r("option",{key:t,value:t},i(t),9,ft)),64))],512),[[ue,U.value,void 0,{number:!0}]])]),r("div",ht,[e[54]||(e[54]=r("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Page",-1)),y(r("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>ae.value=t),type:"number",min:"1",max:I.value,onKeydown:ge(Ae,["enter"]),onBlur:Ae,class:"w-16 px-2 py-1.5 text-sm text-center bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500"},null,40,wt),[[b,ae.value]]),r("span",_t,"/ "+i(I.value),1),r("button",{disabled:h.value<=1,onClick:e[8]||(e[8]=t=>F(1)),title:"Première page",class:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[x(l(vr),{class:"w-5 h-5"})],8,Ct),r("button",{disabled:h.value<=1,onClick:e[9]||(e[9]=t=>F(h.value-1)),class:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[x(l(fr),{class:"w-5 h-5"})],8,Mt),r("div",St,[(o(!0),d(C,null,T(Xe.value,t=>(o(),d("button",{key:t,onClick:k=>F(t),class:p(["min-w-[2.25rem] px-2 py-1.5 text-sm font-medium rounded-lg transition-colors",h.value===t?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"])},i(t),11,Et))),128))]),r("button",{disabled:h.value>=I.value,onClick:e[10]||(e[10]=t=>F(h.value+1)),class:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[x(l(hr),{class:"w-5 h-5"})],8,Pt),r("button",{disabled:h.value>=I.value,onClick:e[11]||(e[11]=t=>F(I.value)),title:"Dernière page",class:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[x(l(wr),{class:"w-5 h-5"})],8,Vt)])])):_("",!0)])),(o(),E(ye,{to:"body"},[ve.value&&B.value?(o(),d("div",At,[r("div",Tt,[r("div",Ut,[e[55]||(e[55]=r("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Mouvement de stock",-1)),r("button",{onClick:fe,class:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded"},[x(l(ce),{class:"w-5 h-5"})])]),r("p",jt,i(B.value.name)+" (stock actuel : "+i(B.value.stock)+")",1),r("div",qt,[r("div",null,[e[57]||(e[57]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Type",-1)),y(r("select",{"onUpdate:modelValue":e[12]||(e[12]=t=>w.value=t),class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},[...e[56]||(e[56]=[r("option",{value:"in"},"Entrée",-1),r("option",{value:"out"},"Sortie",-1),r("option",{value:"adjustment"},"Ajustement (+/-)",-1)])],512),[[ue,w.value]])]),r("div",null,[e[58]||(e[58]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Quantité",-1)),y(r("input",{"onUpdate:modelValue":e[13]||(e[13]=t=>H.value=t),type:"number",min:w.value==="out"?1:w.value==="adjustment"?void 0:1,class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:w.value==="adjustment"?"Ex. -2 ou +5":""},null,8,Nt),[[b,H.value,void 0,{number:!0}]])]),r("div",null,[e[59]||(e[59]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Motif",-1)),y(r("input",{"onUpdate:modelValue":e[14]||(e[14]=t=>oe.value=t),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Livraison, inventaire, perte..."},null,512),[[b,oe.value]])])]),r("div",$t,[r("button",{onClick:fe,class:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700"}," Annuler "),r("button",{onClick:er,disabled:l(q)||H.value<=0&&w.value!=="adjustment"||w.value==="adjustment"&&H.value===0,class:"flex-1 px-4 py-2 bg-gray-900 dark:bg-emerald-600 dark:hover:bg-emerald-500 text-white rounded-xl hover:bg-gray-800 disabled:opacity-50"},i(l(q)?"Enregistrement...":"Enregistrer"),9,Lt)])])])):_("",!0)])),(o(),E(ye,{to:"body"},[he.value?(o(),d("div",zt,[r("div",It,[r("div",Bt,[r("h3",Ht," Historique des mouvements "+i(le.value?`— ${le.value.name}`:""),1),r("button",{onClick:ar,class:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded"},[x(l(ce),{class:"w-5 h-5"})])]),r("div",Ot,[l(R).length===0?(o(),d("div",Rt," Aucun mouvement pour ce produit. ")):(o(),d("ul",Dt,[(o(!0),d(C,null,T(l(R),t=>(o(),d("li",{key:t.id,class:"flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-700 last:border-0"},[r("div",Ft,[r("span",{class:p(["inline-flex items-center justify-center w-8 h-8 rounded-full",t.type==="in"?"bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300":t.type==="out"?"bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"])},[t.type==="in"?(o(),E(l(Ge),{key:0,class:"w-4 h-4"})):t.type==="out"?(o(),E(l(Qe),{key:1,class:"w-4 h-4"})):(o(),E(l(X),{key:2,class:"w-4 h-4"}))],2),r("div",null,[r("p",Kt,i(nr(t.type,t.quantity))+" — "+i(t.reason),1),r("p",Gt,i(qe(t.created_at)),1)])]),r("span",{class:p(["font-semibold",t.quantity>0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"])},i(t.quantity>0?"+":"")+i(t.quantity),3)]))),128))]))])])])):_("",!0)])),(o(),E(ye,{to:"body"},[ie.value?(o(),d("div",Qt,[r("div",Wt,[r("div",Zt,[e[60]||(e[60]=r("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Nouveau produit",-1)),r("button",{onClick:we,class:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded"},[x(l(ce),{class:"w-5 h-5"})])]),r("div",Xt,[r("div",null,[e[61]||(e[61]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Code-barres",-1)),y(r("input",{ref_key:"barcodeInputRef",ref:ze,"onUpdate:modelValue":e[15]||(e[15]=t=>n.value.barcode=t),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Scannez ici ou saisissez (EAN…)"},null,512),[[b,n.value.barcode]]),e[62]||(e[62]=r("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Le champ se remplit automatiquement au scan. Obligatoire pour vendre en caisse.",-1))]),r("div",null,[e[63]||(e[63]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Nom *",-1)),y(r("input",{"onUpdate:modelValue":e[16]||(e[16]=t=>n.value.name=t),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Ex. Mocassin cuir"},null,512),[[b,n.value.name]])]),r("div",null,[e[64]||(e[64]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Code",-1)),y(r("input",{"onUpdate:modelValue":e[17]||(e[17]=t=>n.value.code=t),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Ex. MOC01"},null,512),[[b,n.value.code]])]),r("div",null,[e[66]||(e[66]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Catégorie",-1)),y(r("select",{"onUpdate:modelValue":e[18]||(e[18]=t=>n.value.category_id=t),class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},[e[65]||(e[65]=r("option",{value:""},"— Choisir —",-1)),(o(!0),d(C,null,T(l(Q),t=>(o(),d("option",{key:t.id,value:t.id},i(t.name),9,Yt))),128))],512),[[ue,n.value.category_id]])]),ne.value.length>0?(o(),d("div",Jt,[e[67]||(e[67]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tailles",-1)),Le.value?(o(),d("div",ea,[r("button",{type:"button",onClick:e[19]||(e[19]=t=>S.value="fr"),class:p(["px-3 py-1.5 rounded-lg text-sm font-medium",S.value==="fr"?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"])}," Française ",2),r("button",{type:"button",onClick:e[20]||(e[20]=t=>S.value="uk"),class:p(["px-3 py-1.5 rounded-lg text-sm font-medium",S.value==="uk"?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"])}," Anglaise ",2)])):_("",!0),r("div",ra,[(o(!0),d(C,null,T(ne.value,t=>(o(),d("button",{key:t,type:"button",onClick:k=>He(t),class:p(["px-3 py-2 rounded-lg text-sm font-medium transition-colors",N.value===t?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"])},i(t),11,ta))),128))])])):_("",!0),r("div",aa,[r("div",null,[e[68]||(e[68]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Marque",-1)),y(r("input",{"onUpdate:modelValue":e[21]||(e[21]=t=>n.value.brand=t),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Ex. Lacoste"},null,512),[[b,n.value.brand]])]),r("div",null,[e[69]||(e[69]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Modèle",-1)),y(r("input",{"onUpdate:modelValue":e[22]||(e[22]=t=>n.value.model=t),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Ex. Classic"},null,512),[[b,n.value.model]])])]),r("div",oa,[r("div",null,[e[70]||(e[70]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Prix HT (€)",-1)),y(r("input",{"onUpdate:modelValue":e[23]||(e[23]=t=>n.value.price_ht=t),type:"number",min:"0",step:"0.01",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},null,512),[[b,n.value.price_ht,void 0,{number:!0}]])]),e[73]||(e[73]=r("div",null,[r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"TVA"),r("input",{value:"20%",readonly:"",class:"w-full px-4 py-2 border border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-400 rounded-xl"})],-1)),r("div",null,[e[71]||(e[71]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Coef",-1)),y(r("input",{"onUpdate:modelValue":e[24]||(e[24]=t=>Ie.value=t),type:"number",min:"0",step:"0.01",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},null,512),[[b,Ie.value,void 0,{number:!0}]])]),r("div",null,[e[72]||(e[72]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Prix de vente TTC (€)",-1)),y(r("input",{"onUpdate:modelValue":e[25]||(e[25]=t=>n.value.price_ttc=t),type:"number",min:"0",step:"0.01",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},null,512),[[b,n.value.price_ttc,void 0,{number:!0}]])])]),r("div",la,[r("div",null,[e[74]||(e[74]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Stock initial",-1)),y(r("input",{"onUpdate:modelValue":e[26]||(e[26]=t=>n.value.stock=t),type:"number",min:"0",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},null,512),[[b,n.value.stock,void 0,{number:!0}]])]),r("div",null,[e[75]||(e[75]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Seuil alerte",-1)),y(r("input",{"onUpdate:modelValue":e[27]||(e[27]=t=>n.value.alert_threshold=t),type:"number",min:"0",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},null,512),[[b,n.value.alert_threshold,void 0,{number:!0}]])])])]),r("div",da,[r("button",{onClick:we,class:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700"}," Annuler "),r("button",{onClick:cr,disabled:l(q)||!n.value.name.trim(),class:"flex-1 px-4 py-2 bg-gray-900 dark:bg-emerald-600 dark:hover:bg-emerald-500 text-white rounded-xl hover:bg-gray-800 disabled:opacity-50"},i(l(q)?"Enregistrement...":"Créer le produit"),9,sa)])])])):_("",!0)])),(o(),E(ye,{to:"body"},[_e.value&&W.value?(o(),d("div",na,[r("div",ia,[r("div",ua,[e[76]||(e[76]=r("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Modifier le produit",-1)),r("button",{onClick:Ce,class:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded"},[x(l(ce),{class:"w-5 h-5"})])]),r("div",ga,[r("div",null,[e[77]||(e[77]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Code-barres",-1)),y(r("input",{ref_key:"editBarcodeInputRef",ref:Oe,"onUpdate:modelValue":e[28]||(e[28]=t=>u.value.barcode=t),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Scannez ici ou saisissez (EAN…)"},null,512),[[b,u.value.barcode]])]),r("div",null,[e[78]||(e[78]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Nom *",-1)),y(r("input",{"onUpdate:modelValue":e[29]||(e[29]=t=>u.value.name=t),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Ex. Mocassin cuir"},null,512),[[b,u.value.name]])]),r("div",null,[e[79]||(e[79]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Code",-1)),y(r("input",{"onUpdate:modelValue":e[30]||(e[30]=t=>u.value.code=t),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Ex. MOC01"},null,512),[[b,u.value.code]])]),r("div",null,[e[81]||(e[81]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Catégorie",-1)),y(r("select",{"onUpdate:modelValue":e[31]||(e[31]=t=>u.value.category_id=t),class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},[e[80]||(e[80]=r("option",{value:""},"— Choisir —",-1)),(o(!0),d(C,null,T(l(Q),t=>(o(),d("option",{key:t.id,value:t.id},i(t.name),9,ya))),128))],512),[[ue,u.value.category_id]])]),ne.value.length>0?(o(),d("div",ca,[e[82]||(e[82]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tailles",-1)),Le.value?(o(),d("div",ba,[r("button",{type:"button",onClick:e[32]||(e[32]=t=>S.value="fr"),class:p(["px-3 py-1.5 rounded-lg text-sm font-medium",S.value==="fr"?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"])}," Française ",2),r("button",{type:"button",onClick:e[33]||(e[33]=t=>S.value="uk"),class:p(["px-3 py-1.5 rounded-lg text-sm font-medium",S.value==="uk"?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"])}," Anglaise ",2)])):_("",!0),r("div",xa,[(o(!0),d(C,null,T(ne.value,t=>(o(),d("button",{key:t,type:"button",onClick:k=>He(t),class:p(["px-3 py-2 rounded-lg text-sm font-medium transition-colors",N.value===t?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"])},i(t),11,ma))),128))])])):_("",!0),r("div",pa,[r("div",null,[e[83]||(e[83]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Marque",-1)),y(r("input",{"onUpdate:modelValue":e[34]||(e[34]=t=>u.value.brand=t),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Ex. Lacoste"},null,512),[[b,u.value.brand]])]),r("div",null,[e[84]||(e[84]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Modèle",-1)),y(r("input",{"onUpdate:modelValue":e[35]||(e[35]=t=>u.value.model=t),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Ex. Classic"},null,512),[[b,u.value.model]])])]),r("div",ka,[r("div",null,[e[85]||(e[85]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Prix HT (€)",-1)),y(r("input",{"onUpdate:modelValue":e[36]||(e[36]=t=>u.value.price_ht=t),type:"number",min:"0",step:"0.01",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},null,512),[[b,u.value.price_ht,void 0,{number:!0}]])]),e[88]||(e[88]=r("div",null,[r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"TVA"),r("input",{value:"20%",readonly:"",class:"w-full px-4 py-2 border border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-400 rounded-xl"})],-1)),r("div",null,[e[86]||(e[86]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Coef",-1)),y(r("input",{"onUpdate:modelValue":e[37]||(e[37]=t=>Be.value=t),type:"number",min:"0",step:"0.01",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},null,512),[[b,Be.value,void 0,{number:!0}]])]),r("div",null,[e[87]||(e[87]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Prix de vente TTC (€)",-1)),y(r("input",{"onUpdate:modelValue":e[38]||(e[38]=t=>u.value.price_ttc=t),type:"number",min:"0",step:"0.01",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},null,512),[[b,u.value.price_ttc,void 0,{number:!0}]])])]),r("div",null,[e[89]||(e[89]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Seuil alerte",-1)),y(r("input",{"onUpdate:modelValue":e[39]||(e[39]=t=>u.value.alert_threshold=t),type:"number",min:"0",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},null,512),[[b,u.value.alert_threshold,void 0,{number:!0}]])])]),r("div",va,[r("button",{onClick:Ce,class:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700"}," Annuler "),r("button",{onClick:xr,disabled:l(q)||!u.value.name.trim(),class:"flex-1 px-4 py-2 bg-gray-900 dark:bg-emerald-600 dark:hover:bg-emerald-500 text-white rounded-xl hover:bg-gray-800 disabled:opacity-50"},i(l(q)?"Enregistrement...":"Enregistrer"),9,fa)])])])):_("",!0)]))])]))}});export{Ea as default};
