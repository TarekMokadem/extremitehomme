import{d as De,r as l,a as P,o as Ae,w as X,e as d,f as t,j as g,k as _,n as q,g as u,t as o,z as E,A as N,F as x,h as m,G as Fe,C as Pe,x as ne,T as de,s as w,m as U,l as C,q as G,I as qe,B as Ee,p as Le,E as Me,v as n}from"./index-8JeweAIN.js";import{R as le}from"./refresh-cw--HoeajCP.js";import{S as Ve}from"./search-BDQz4LAv.js";import{R as ie}from"./receipt-DBVjBL_P.js";import{C as $e,a as je,b as Ie,c as Re}from"./chevrons-right-WBGZq0DN.js";import{C as ze}from"./chevron-up-fpBn9qCd.js";import{S as Be}from"./square-pen-CRj-Z67E.js";import{X as Ne}from"./x-CKgEYpDX.js";import{B as ce,S as Ue,G as ge,H as ue}from"./smartphone-hvDIJb-d.js";import{C as J}from"./credit-card-Cst-oZcd.js";const Ge={class:"flex-1 p-4 lg:p-6 overflow-auto bg-gray-50 dark:bg-gray-900"},He={class:"max-w-6xl mx-auto space-y-6"},Oe={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Ze=["disabled"],Ke={class:"grid grid-cols-3 gap-4"},Qe={class:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700"},Xe={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},Je={class:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700"},We={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},Ye={class:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700"},et={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},tt={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},at={class:"space-y-4"},rt={class:"flex flex-col lg:flex-row gap-4"},st={class:"relative flex-1"},ot={class:"flex flex-wrap gap-2"},nt=["onClick"],dt={key:0,class:"flex flex-wrap items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-xl"},lt={class:"flex items-center gap-2"},it={class:"flex items-center gap-2"},ct={class:"flex flex-wrap items-center gap-3"},gt={class:"flex gap-2"},ut=["onClick"],yt={class:"flex items-center gap-2 ml-auto"},xt=["value"],mt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},bt={key:0,class:"p-8 text-center"},vt={key:1,class:"p-8 text-center"},pt={key:2,class:"divide-y divide-gray-100 dark:divide-gray-700"},ft=["onClick"],kt={class:"hidden sm:block w-24 flex-shrink-0"},ht={class:"text-sm font-medium text-gray-900 dark:text-white"},_t={class:"text-xs text-gray-500 dark:text-gray-400"},wt={class:"flex-shrink-0"},Ct={class:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-xs font-mono font-medium"},St={class:"flex-1 min-w-0"},Tt={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},Dt={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},At={class:"hidden md:flex items-center gap-2"},Ft={class:"text-right flex-shrink-0"},Pt={class:"text-lg font-bold text-gray-900 dark:text-white"},qt={class:"text-xs text-gray-500 dark:text-gray-400 sm:hidden"},Et={key:0,class:"px-4 pb-4 overflow-hidden"},Lt={class:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4 space-y-4"},Mt={class:"space-y-2"},Vt={class:"text-gray-700 dark:text-gray-300 flex-1 min-w-0"},$t={key:0,class:"text-gray-500 dark:text-gray-400 text-xs"},jt={class:"font-medium text-gray-900 dark:text-white shrink-0"},It={class:"border-t border-gray-200 dark:border-gray-600 pt-3 space-y-1"},Rt={class:"flex justify-between text-sm"},zt={class:"text-gray-700 dark:text-gray-300"},Bt={class:"flex justify-between text-sm"},Nt={class:"text-gray-700 dark:text-gray-300"},Ut={key:0,class:"flex justify-between text-sm"},Gt={class:"text-red-600 dark:text-red-400"},Ht={class:"flex justify-between text-base font-bold pt-2 border-t border-gray-200 dark:border-gray-600"},Ot={class:"text-gray-900 dark:text-white"},Zt={class:"border-t border-gray-200 dark:border-gray-600 pt-3 flex items-center justify-between gap-4 flex-wrap"},Kt={class:"flex items-center gap-2 flex-wrap"},Qt=["onClick"],Xt={key:3,class:"flex flex-wrap items-center justify-between gap-4 px-4 py-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50"},Jt={class:"flex items-center gap-3"},Wt=["max"],Yt={class:"text-sm text-gray-600 dark:text-gray-400"},ea={class:"flex items-center gap-2"},ta=["disabled"],aa=["disabled"],ra={class:"flex gap-1"},sa=["onClick"],oa=["disabled"],na=["disabled"],da={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50"},la={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-md overflow-hidden border border-gray-200 dark:border-gray-700"},ia={class:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between"},ca={class:"p-4 space-y-4"},ga={class:"text-sm text-gray-600 dark:text-gray-300"},ua={class:"font-mono font-semibold"},ya={class:"font-bold"},xa={class:"grid grid-cols-2 sm:grid-cols-3 gap-2"},ma=["onClick"],ba={class:"text-xs font-medium"},va={class:"p-4 border-t border-gray-200 dark:border-gray-700 flex gap-3"},pa=["disabled"],Pa=De({__name:"HistoriquePage",setup(fa){const L=l([]),b=l(null),H=l(null),O=l(null),S=l(!0),M=l(""),y=l("today"),V=l(""),$=l(""),v=l("all"),T=l(50),i=l(1),j=l(null),D=l(null),F=l("card"),I=l(!1),ye=[{id:"cash",label:"Espèces",icon:ce},{id:"card",label:"CB",icon:J},{id:"contactless",label:"Sans contact",icon:Ue},{id:"amex",label:"American Express",icon:J},{id:"check",label:"Chèque",icon:Le},{id:"gift_card",label:"Chèque Cadeau",icon:ge},{id:"free",label:"Gratuit",icon:ue}],xe=[{id:"today",label:"Aujourd'hui"},{id:"week",label:"Cette semaine"},{id:"month",label:"Ce mois"},{id:"custom",label:"Période"},{id:"all",label:"Tout"}],me=[{id:"all",label:"Tous"},{id:"completed",label:"Complétées"},{id:"cancelled",label:"Annulées"},{id:"refunded",label:"Remboursées"},{id:"pending",label:"En attente"}],be=[25,50,100],p=P(()=>{const r=b.value??0,e=T.value;return Math.max(1,Math.ceil(r/e))}),Z=P(()=>{const r=b.value??0,e=T.value,a=i.value,s=r===0?0:(a-1)*e+1,c=Math.min(a*e,r);return{from:s,to:c,total:r}}),ve=P(()=>{const r=p.value,e=i.value,a=2,s=[];for(let c=Math.max(1,e-a);c<=Math.min(r,e+a);c++)s.push(c);return s});function pe(){const r=new Date,e=r.toISOString().split("T")[0]??null;return e?y.value==="today"?{startDate:e,endDate:e}:y.value==="week"?{startDate:new Date(r.getTime()-6048e5).toISOString().split("T")[0]??e,endDate:e}:y.value==="month"?{startDate:new Date(r.getTime()-2592e6).toISOString().split("T")[0]??e,endDate:e}:y.value==="custom"&&V.value&&$.value?{startDate:V.value,endDate:$.value}:{startDate:null,endDate:null}:{startDate:null,endDate:null}}const f=async()=>{S.value=!0;try{const{startDate:r,endDate:e}=pe(),a=T.value,c=(i.value-1)*a,Ce=c+a-1;let k=w.from("sales").select("*",{count:"exact",head:!0});r&&(k=k.gte("created_at",r)),e&&(k=k.lte("created_at",e+"T23:59:59.999Z")),v.value!=="all"&&(k=k.eq("status",v.value));const{count:Se}=await k;b.value=Se??null,H.value=null,O.value=null;try{const{data:B}=await w.rpc("get_sales_stats",{p_start_date:r??null,p_end_date:e!=null?e+"T23:59:59.999Z":null});if(B&&Array.isArray(B)&&B[0]){const oe=B[0];H.value=Number(oe.total_amount),O.value=Number(oe.avg_ticket)}}catch{}let h=w.from("sales").select(`
        *,
        vendor:vendors(first_name, last_name),
        client:clients(first_name, last_name),
        items:sale_items(id, product_name, quantity, price_ht, subtotal_ttc, vendor_id, vendor:vendors(first_name, last_name)),
        payments(method, amount)
      `).order("created_at",{ascending:!1}).range(c,Ce);r&&(h=h.gte("created_at",r)),e&&(h=h.lte("created_at",e+"T23:59:59.999Z")),v.value!=="all"&&(h=h.eq("status",v.value));const{data:Te,error:se}=await h;if(se)throw se;L.value=Te||[]}catch(r){console.error("Erreur chargement historique:",r),L.value=[]}finally{S.value=!1}},A=r=>{i.value=Math.max(1,Math.min(r,p.value)),f()},R=l(""),W=()=>{R.value=String(i.value)},Y=()=>{const r=parseInt(R.value,10);!isNaN(r)&&r>=1?A(r):W()},ee=()=>{i.value=1,f()},z=P(()=>{if(!M.value.trim())return L.value;const r=M.value.toLowerCase();return L.value.filter(e=>{if(e.ticket_number.toLowerCase().includes(r)||e.client?.first_name?.toLowerCase().includes(r)||e.client?.last_name?.toLowerCase().includes(r)||e.vendor?.first_name?.toLowerCase().includes(r)||e.vendor?.last_name?.toLowerCase().includes(r))return!0;for(const a of e.items||[]){const s=a.vendor;if(s?.first_name?.toLowerCase().includes(r)||s?.last_name?.toLowerCase().includes(r))return!0}return!1})}),K=P(()=>{const r=z.value.reduce((s,c)=>s+c.total,0),e=z.value.length,a=e>0?r/e:0;return{total:r,count:e,avgTicket:a}}),fe=r=>{j.value=j.value===r?null:r},te=r=>new Date(r).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),ke=r=>new Date(r).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),he=r=>{const e=r.items||[],a=new Set;for(const s of e){const c=s.vendor;c&&a.add(`${c.first_name} ${c.last_name}`.trim())}return a.size===0?r.vendor?`${r.vendor.first_name} ${r.vendor.last_name}`:"—":Array.from(a).join(", ")},ae=r=>{switch(r){case"cash":return ce;case"card":case"contactless":case"amex":return J;case"free":return ue;case"gift_card":return ge;default:return Me}},re=r=>({cash:"Espèces",card:"Carte",contactless:"Sans contact",amex:"American Express",check:"Chèque",gift_card:"Chèque Cadeau",free:"Gratuit"})[r]||r,_e=r=>{D.value=r;const e=r.payments?.[0];F.value=e?.method??"card"},Q=()=>{D.value=null},we=async()=>{const r=D.value;if(!r)return;I.value=!0;const e=r.status==="completed";try{if(e){const{error:a}=await w.from("sales").update({status:"pending"}).eq("id",r.id);if(a)throw a}try{const{error:a}=await w.from("payments").delete().eq("sale_id",r.id);if(a)throw a;const{error:s}=await w.from("payments").insert({sale_id:r.id,method:F.value,amount:r.total});if(s)throw s}finally{e&&await w.from("sales").update({status:"completed"}).eq("id",r.id)}r.payments=[{method:F.value,amount:r.total}],Q()}catch(a){console.error("Erreur modification paiement:",a),alert("Impossible de modifier le paiement.")}finally{I.value=!1}};return Ae(f),X([i,T],()=>f()),X(i,()=>W(),{immediate:!0}),X([y,v],()=>{i.value=1,y.value!=="custom"&&f()}),(r,e)=>(n(),d("main",Ge,[t("div",He,[t("div",Oe,[e[10]||(e[10]=t("div",null,[t("h1",{class:"text-xl lg:text-2xl font-bold text-gray-900 dark:text-white"},"Historique des ventes"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Consultez toutes les transactions")],-1)),t("button",{onClick:f,disabled:S.value,class:"inline-flex items-center gap-2 px-4 py-2 bg-gray-900 dark:bg-emerald-600 dark:hover:bg-emerald-500 text-white rounded-xl hover:bg-gray-800 transition-colors disabled:opacity-50"},[g(u(le),{class:q(["w-4 h-4",S.value&&"animate-spin"])},null,8,["class"]),e[9]||(e[9]=t("span",null,"Actualiser",-1))],8,Ze)]),t("div",Ke,[t("div",Qe,[e[11]||(e[11]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider font-semibold"},"Total",-1)),t("p",Xe,o((H.value??K.value.total).toFixed(2))+"€",1)]),t("div",Je,[e[12]||(e[12]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider font-semibold"},"Ventes",-1)),t("p",We,o(b.value??K.value.count),1)]),t("div",Ye,[e[13]||(e[13]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider font-semibold"},"Panier moyen",-1)),t("p",et,o((O.value??K.value.avgTicket).toFixed(2))+"€",1)])]),b.value!=null&&b.value>0?(n(),d("p",tt,o(Z.value.from)+"-"+o(Z.value.to)+" sur "+o(Z.value.total)+" ventes ",1)):_("",!0),t("div",at,[t("div",rt,[t("div",st,[g(u(Ve),{class:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 dark:text-gray-500"}),E(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>M.value=a),type:"text",placeholder:"Rechercher par ticket, client, vendeur...",class:"w-full pl-12 pr-4 py-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl text-sm focus:outline-none focus:border-gray-900 dark:focus:border-emerald-500 focus:ring-2 focus:ring-gray-900/10 dark:focus:ring-emerald-500/30"},null,512),[[N,M.value]])]),t("div",ot,[(n(),d(x,null,m(xe,a=>t("button",{key:a.id,onClick:s=>{y.value=a.id,a.id!=="custom"&&f()},class:q(["px-4 py-2 text-sm font-medium rounded-xl transition-colors",y.value===a.id?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"])},o(a.label),11,nt)),64))])]),y.value==="custom"?(n(),d("div",dt,[t("div",lt,[e[14]||(e[14]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Du",-1)),E(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>V.value=a),type:"date",class:"px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm dark:text-gray-100"},null,512),[[N,V.value]])]),t("div",it,[e[15]||(e[15]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Au",-1)),E(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>$.value=a),type:"date",class:"px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm dark:text-gray-100"},null,512),[[N,$.value]])]),t("button",{onClick:ee,class:"px-4 py-2 text-sm font-medium bg-gray-900 dark:bg-emerald-600 text-white rounded-xl hover:bg-gray-800 dark:hover:bg-emerald-500 transition-colors"}," Appliquer ")])):_("",!0),t("div",ct,[t("div",gt,[(n(),d(x,null,m(me,a=>t("button",{key:a.id,onClick:s=>{v.value=a.id,ee()},class:q(["px-3 py-1.5 text-sm font-medium rounded-lg transition-colors",v.value===a.id?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"])},o(a.label),11,ut)),64))]),t("div",yt,[e[16]||(e[16]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Par page",-1)),E(t("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>T.value=a),class:"px-3 py-1.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm dark:text-gray-100"},[(n(),d(x,null,m(be,a=>t("option",{key:a,value:a},o(a),9,xt)),64))],512),[[Fe,T.value,void 0,{number:!0}]])])])]),t("div",mt,[S.value?(n(),d("div",bt,[g(u(le),{class:"w-8 h-8 text-gray-400 dark:text-gray-500 animate-spin mx-auto"}),e[17]||(e[17]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-2"},"Chargement...",-1))])):z.value.length===0?(n(),d("div",vt,[g(u(ie),{class:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto"}),e[18]||(e[18]=t("p",{class:"text-gray-500 dark:text-gray-400 mt-2"},"Aucune vente trouvée",-1))])):(n(),d("div",pt,[(n(!0),d(x,null,m(z.value,a=>(n(),d("div",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[t("button",{onClick:s=>fe(a.id),class:"w-full px-4 py-4 flex items-center gap-4 text-left"},[t("div",kt,[t("p",ht,o(te(a.created_at)),1),t("p",_t,o(ke(a.created_at)),1)]),t("div",wt,[t("span",Ct,[g(u(ie),{class:"w-3.5 h-3.5"}),C(" "+o(a.ticket_number),1)])]),t("div",St,[t("p",Tt,o(a.client?.first_name)+" "+o(a.client?.last_name),1),t("p",Dt," Vendeur(s): "+o(he(a)),1)]),t("div",At,[(n(!0),d(x,null,m(a.payments,s=>(n(),d("span",{key:s.method,class:"inline-flex items-center gap-1 px-2 py-1 bg-gray-50 dark:bg-gray-700 rounded text-xs text-gray-600 dark:text-gray-300"},[(n(),U(G(ae(s.method)),{class:"w-3.5 h-3.5"})),C(" "+o(re(s.method)),1)]))),128))]),t("div",Ft,[t("p",Pt,o(a.total.toFixed(2))+"€",1),t("p",qt,o(te(a.created_at)),1)]),(n(),U(G(j.value===a.id?u(ze):u(qe)),{class:"w-5 h-5 text-gray-400 dark:text-gray-500 flex-shrink-0"}))],8,ft),g(de,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 max-h-0","enter-to-class":"opacity-100 max-h-96","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 max-h-96","leave-to-class":"opacity-0 max-h-0"},{default:ne(()=>[j.value===a.id?(n(),d("div",Et,[t("div",Lt,[t("div",null,[e[19]||(e[19]=t("p",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2"},"Articles",-1)),t("div",Mt,[(n(!0),d(x,null,m(a.items,s=>(n(),d("div",{key:s.id,class:"flex items-center justify-between text-sm gap-2"},[t("span",Vt,[C(o(s.quantity)+"x "+o(s.product_name)+" ",1),s.vendor?(n(),d("span",$t," ("+o(s.vendor.first_name)+" "+o(s.vendor.last_name)+") ",1)):_("",!0)]),t("span",jt,o(s.subtotal_ttc.toFixed(2))+"€",1)]))),128))])]),t("div",It,[t("div",Rt,[e[20]||(e[20]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Sous-total HT",-1)),t("span",zt,o(a.subtotal_ht.toFixed(2))+"€",1)]),t("div",Bt,[e[21]||(e[21]=t("span",{class:"text-gray-500 dark:text-gray-400"},"TVA",-1)),t("span",Nt,o(a.total_tva.toFixed(2))+"€",1)]),a.discount_amount>0?(n(),d("div",Ut,[e[22]||(e[22]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Remise",-1)),t("span",Gt,"-"+o(a.discount_amount.toFixed(2))+"€",1)])):_("",!0),t("div",Ht,[e[23]||(e[23]=t("span",{class:"text-gray-900 dark:text-white"},"Total",-1)),t("span",Ot,o(a.total.toFixed(2))+"€",1)])]),t("div",Zt,[t("div",Kt,[e[24]||(e[24]=t("span",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Paiement",-1)),(n(!0),d(x,null,m(a.payments,s=>(n(),d("span",{key:s.method,class:"inline-flex items-center gap-1 px-2 py-1 bg-white dark:bg-gray-600 rounded-lg text-sm text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-500"},[(n(),U(G(ae(s.method)),{class:"w-4 h-4"})),C(" "+o(re(s.method))+" — "+o(s.amount.toFixed(2))+"€ ",1)]))),128))]),t("button",{onClick:Ee(s=>_e(a),["stop"]),class:"inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-500 transition-colors"},[g(u(Be),{class:"w-4 h-4"}),e[25]||(e[25]=C(" Modifier le paiement ",-1))],8,Qt)])])])):_("",!0)]),_:2},1024)]))),128))])),!S.value&&b.value!=null&&b.value>0?(n(),d("div",Xt,[t("div",Jt,[e[26]||(e[26]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Page",-1)),E(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>R.value=a),type:"number",min:"1",max:p.value,onKeydown:Pe(Y,["enter"]),onBlur:Y,class:"w-16 px-2 py-1.5 text-sm text-center bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500"},null,40,Wt),[[N,R.value]]),t("span",Yt,"/ "+o(p.value),1)]),t("div",ea,[t("button",{disabled:i.value<=1,onClick:e[5]||(e[5]=a=>A(1)),title:"Première page",class:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[g(u($e),{class:"w-5 h-5"})],8,ta),t("button",{disabled:i.value<=1,onClick:e[6]||(e[6]=a=>A(i.value-1)),class:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[g(u(je),{class:"w-5 h-5"})],8,aa),t("div",ra,[(n(!0),d(x,null,m(ve.value,a=>(n(),d("button",{key:a,onClick:s=>A(a),class:q(["min-w-[2.25rem] px-2 py-1.5 text-sm font-medium rounded-lg transition-colors",i.value===a?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"])},o(a),11,sa))),128))]),t("button",{disabled:i.value>=p.value,onClick:e[7]||(e[7]=a=>A(i.value+1)),class:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[g(u(Ie),{class:"w-5 h-5"})],8,oa),t("button",{disabled:i.value>=p.value,onClick:e[8]||(e[8]=a=>A(p.value)),title:"Dernière page",class:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[g(u(Re),{class:"w-5 h-5"})],8,na)])])):_("",!0)])]),g(de,{"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:ne(()=>[D.value?(n(),d("div",da,[t("div",la,[t("div",ia,[e[27]||(e[27]=t("h3",{class:"text-lg font-bold text-gray-900 dark:text-white"},"Modifier le mode de paiement",-1)),t("button",{onClick:Q,class:"p-2 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg"},[g(u(Ne),{class:"w-5 h-5"})])]),t("div",ca,[t("p",ga,[e[28]||(e[28]=C(" Ticket ",-1)),t("span",ua,o(D.value.ticket_number),1),e[29]||(e[29]=C(" — Total ",-1)),t("span",ya,o(D.value.total.toFixed(2))+"€",1)]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider mb-2"},"Nouveau mode de paiement",-1)),t("div",xa,[(n(),d(x,null,m(ye,a=>t("button",{key:a.id,onClick:s=>F.value=a.id,class:q(["flex flex-col items-center gap-1.5 p-3 rounded-xl border-2 transition-colors",F.value===a.id?"border-gray-900 dark:border-emerald-500 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white":"border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-400 hover:border-gray-300 dark:hover:border-gray-500 hover:bg-gray-50 dark:hover:bg-gray-700"])},[(n(),U(G(a.icon),{class:"w-5 h-5"})),t("span",ba,o(a.label),1)],10,ma)),64))])])]),t("div",va,[t("button",{onClick:Q,class:"flex-1 px-4 py-2.5 border border-gray-300 dark:border-gray-600 dark:text-gray-200 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 font-medium"}," Annuler "),t("button",{onClick:we,disabled:I.value,class:"flex-1 px-4 py-2.5 bg-gray-900 dark:bg-emerald-600 dark:hover:bg-emerald-500 text-white rounded-xl hover:bg-gray-800 font-medium disabled:opacity-50"},o(I.value?"Enregistrement...":"Enregistrer"),9,pa)])])])):_("",!0)]),_:1})]))}});export{Pa as default};
