import{d as Nt,a as i,m as y,q as zt,o as Vt,c as l,e as t,h,f as c,z as st,g,F as p,U as G,R as E,t as o,M as Ft,y as j,x as A,i as rt,K as Rt,v as pt,V as Bt,S as bt,E as Lt,Q as It,P as Ot,s as ot,b as Yt,j as Ut,k as d}from"./index-DpJ3Ann9.js";import{F as Gt}from"./file-down-Cg0z4IW9.js";import{R as Jt}from"./refresh-cw-DaqxTwSR.js";import{S as Qt}from"./shopping-bag-DOM1ey1u.js";import{A as Kt}from"./award-CKVZET5F.js";import{C as Wt}from"./credit-card-DSDKrTdc.js";const Xt={class:"flex-1 p-4 lg:p-6 overflow-auto bg-gray-50 dark:bg-gray-900"},Zt={class:"max-w-7xl mx-auto space-y-6"},te={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},ee={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-200 dark:border-gray-700"},ae={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},se={key:1,class:"relative"},re={class:"text-sm font-medium text-gray-900 dark:text-white"},oe={key:0,class:"absolute z-20 mt-2 w-full sm:w-96 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl overflow-hidden"},le=["onClick"],de={class:"text-sm font-medium text-gray-900 dark:text-white"},ne={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-200 dark:border-gray-700 space-y-4"},ie={class:"flex flex-wrap items-center gap-3"},ue=["value"],ce={class:"flex flex-wrap gap-2"},ge=["onClick"],xe={class:"flex flex-wrap items-end gap-3"},me=["disabled"],ye={key:0,class:"text-xs text-amber-600 dark:text-amber-400"},pe={key:0,class:"flex items-center justify-center py-20"},be={key:1,class:"text-center py-16 text-gray-500 dark:text-gray-400"},he={class:"flex gap-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-xl w-fit"},ve={key:0,"data-print-content":""},fe={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden mb-6"},_e={class:"px-5 py-3 bg-gray-100 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600"},ke={class:"text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider"},we={class:"overflow-x-auto"},Ce={class:"w-full text-sm"},Te={class:"divide-y divide-gray-100 dark:divide-gray-700"},Se={class:"px-4 py-2"},Ae={class:"px-4 py-2 text-right tabular-nums"},Pe={class:"px-4 py-2 text-right tabular-nums"},$e={class:"px-4 py-2 text-right tabular-nums"},Me={class:"px-4 py-2 text-right tabular-nums font-semibold"},qe={class:"font-bold bg-gray-50 dark:bg-gray-700/50 border-t-2 border-gray-300 dark:border-gray-600"},De={class:"px-4 py-2.5 text-right tabular-nums"},Ee={class:"px-4 py-2.5 text-right tabular-nums"},je={class:"px-4 py-2.5 text-right tabular-nums"},He={class:"px-4 py-2.5 text-right tabular-nums"},Ne={key:0,class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},ze={class:"px-5 py-3 bg-purple-50 dark:bg-purple-900/20 border-b border-gray-200 dark:border-gray-600"},Ve={class:"text-sm font-semibold text-purple-800 dark:text-purple-300 uppercase tracking-wider flex items-center gap-2"},Fe={class:"overflow-x-auto"},Re={class:"w-full text-sm"},Be={class:"divide-y divide-gray-100 dark:divide-gray-700"},Le={class:"px-4 py-2"},Ie={class:"px-4 py-2 text-right tabular-nums"},Oe={class:"px-4 py-2 text-right tabular-nums"},Ye={class:"px-4 py-2 text-right tabular-nums"},Ue={class:"px-4 py-2 text-right tabular-nums font-semibold"},Ge={class:"font-bold bg-purple-50/50 dark:bg-purple-900/10 border-t-2 border-gray-300 dark:border-gray-600"},Je={class:"px-4 py-2.5 text-right tabular-nums"},Qe={class:"px-4 py-2.5 text-right tabular-nums"},Ke={class:"px-4 py-2.5 text-right tabular-nums"},We={class:"px-4 py-2.5 text-right tabular-nums"},Xe={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},Ze={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-200 dark:border-gray-700"},ta={class:"flex items-center justify-between mb-3"},ea={class:"w-10 h-10 rounded-xl bg-emerald-100 dark:bg-emerald-900/40 flex items-center justify-center"},aa={class:"text-2xl font-bold text-gray-900 dark:text-white"},sa={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-200 dark:border-gray-700"},ra={class:"flex items-center justify-between mb-3"},oa={class:"w-10 h-10 rounded-xl bg-blue-100 dark:bg-blue-900/40 flex items-center justify-center"},la={class:"text-2xl font-bold text-gray-900 dark:text-white"},da={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-200 dark:border-gray-700"},na={class:"flex items-center justify-between mb-3"},ia={class:"w-10 h-10 rounded-xl bg-amber-100 dark:bg-amber-900/40 flex items-center justify-center"},ua={class:"text-2xl font-bold text-gray-900 dark:text-white"},ca={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-200 dark:border-gray-700"},ga={class:"flex items-center justify-between mb-3"},xa={class:"w-10 h-10 rounded-xl bg-purple-100 dark:bg-purple-900/40 flex items-center justify-center"},ma={class:"text-2xl font-bold text-gray-900 dark:text-white truncate"},ya={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},pa={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-200 dark:border-gray-700"},ba={key:0,class:"text-center py-8 text-gray-500 dark:text-gray-400 text-sm"},ha={key:1,class:"space-y-2 max-h-80 overflow-y-auto"},va={class:"w-14 text-xs text-gray-500 dark:text-gray-400 shrink-0"},fa={class:"flex-1 h-7 bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden relative"},_a={key:0,class:"absolute right-2 top-1/2 -translate-y-1/2 text-xs font-semibold text-gray-700 dark:text-gray-200"},ka={class:"w-10 text-xs text-gray-400 dark:text-gray-500 text-right shrink-0"},wa={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-200 dark:border-gray-700"},Ca={class:"text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider mb-4 flex items-center gap-2"},Ta={key:0,class:"text-center py-8 text-gray-500 dark:text-gray-400 text-sm"},Sa={key:1,class:"space-y-3"},Aa={class:"flex-1 min-w-0"},Pa={class:"flex items-center justify-between mb-1"},$a={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},Ma={class:"text-sm font-bold text-gray-900 dark:text-white ml-2 shrink-0"},qa={class:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden"},Da={class:"text-xs text-gray-500 dark:text-gray-400 mt-0.5"},Ea={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-200 dark:border-gray-700"},ja={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Ha={class:"flex items-center gap-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl"},Na={class:"w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900/40 flex items-center justify-center"},za={class:"flex-1 min-w-0"},Va={class:"text-xs text-gray-500 dark:text-gray-400"},Fa={class:"text-right"},Ra={class:"text-lg font-bold text-gray-900 dark:text-white"},Ba={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},La={class:"flex items-center gap-4 p-4 bg-purple-50 dark:bg-purple-900/20 rounded-xl"},Ia={class:"w-12 h-12 rounded-full bg-purple-100 dark:bg-purple-900/40 flex items-center justify-center"},Oa={class:"flex-1 min-w-0"},Ya={class:"text-xs text-gray-500 dark:text-gray-400"},Ua={class:"text-right"},Ga={class:"text-lg font-bold text-gray-900 dark:text-white"},Ja={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},Qa={key:0,class:"mt-4 h-4 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden flex"},ht=.2,ss=Nt({__name:"StatsEmployePage",setup(Ka){const J=Yt(),lt=Ut(),Q=["Chaussure","Chaussette","Produit barbe","Produit cheveux","Shampooing","Conditioner","Gel douche","Accessoire rasage","Accessoire chaussure","Produit chaussure","Ceinture","Portefeuille","Textile","Porte monnaie","Porte cartes","Sac","Noeud pap","Cravate","Parfum","Echarpe","Produit esthetique","Trousse","Bonnet","Casquette","Acomptes","Clients","ESTHETIQUE","PRESTATION"],dt=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],vt={cash:"Espèces",card:"Carte bancaire",contactless:"Sans contact",check:"Chèque",gift_card:"Bon cadeau",amex:"Amex",free:"Gratuit",technical:"Technique"},H=i([]),m=i(""),N=i(!1),T=i(new Date().getFullYear()),v=i(null),w=i(""),C=i(""),P=i("performance"),z=i(!1),K=i(!1),S=i([]),V=i([]),F=i([]),R=i([]),b=i(0),B=i(0),nt=i(0),W=i(0),L=i(0),$=i(0),M=y(()=>H.value.find(r=>r.id===m.value)),ft=y(()=>B.value>0?b.value/B.value:0),_t=y(()=>S.value.length===0?"—":[...S.value].sort((e,a)=>a.amount-e.amount)[0]?.name??"—"),kt=y(()=>S.value.reduce((r,e)=>r+e.count,0)),it=y(()=>S.value.reduce((r,e)=>r+e.amount,0)),wt=y(()=>S.value.reduce((r,e)=>r+e.amountHT,0)),Ct=y(()=>V.value.reduce((r,e)=>r+e.amountHT,0)),X=y(()=>{if(m.value==="__all__")return"Tout le monde";const r=M.value;return r?`${r.first_name} ${r.last_name}`:""}),Tt=()=>{const r=document.querySelector("[data-print-content]");if(!r)return;const e=window.open("","_blank");if(!e){alert("Autorisez les pop-ups pour télécharger le PDF.");return}const a=v.value!==null?`${dt[v.value]} ${T.value}`:w.value&&C.value?`${w.value} au ${C.value}`:`${T.value}`;e.document.write(`<!DOCTYPE html><html><head><meta charset="utf-8"><title>Stats Employé - ${X.value}</title>
<style>
  @page { size: A4 portrait; margin: 10mm; }
  * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; color: #000; }
  body { padding: 10mm; }
  h1 { font-size: 16px; margin-bottom: 6px; text-align: center; }
  h2 { font-size: 13px; margin: 12px 0 6px; }
  table { width: 100%; border-collapse: collapse; font-size: 10px; margin-bottom: 12px; }
  th, td { border: 1px solid #ccc; padding: 3px 6px; text-align: right; }
  th { background: #f3f4f6; font-weight: 600; }
  td:first-child, th:first-child { text-align: left; }
  tfoot td { font-weight: bold; background: #f9fafb; }
</style></head><body>
<h1>Statistiques Employé — ${X.value}</h1>
<h2 style="text-align:center;font-weight:normal;color:#666">${a}</h2>
${r.innerHTML}
</body></html>`),e.document.close(),e.focus(),setTimeout(()=>{e.print()},400)},St=y(()=>Math.max(...F.value.map(r=>r.total),1)),At=y(()=>Math.max(...R.value.map(r=>r.amount),1)),Pt=y(()=>{const r=new Date().getFullYear();return Array.from({length:5},(e,a)=>r-a)}),$t=y(()=>{if(w.value&&C.value)return{start:w.value,end:C.value};if(v.value!==null){const r=T.value,e=v.value,a=`${r}-${String(e+1).padStart(2,"0")}-01`,f=new Date(r,e+1,0).getDate(),q=`${r}-${String(e+1).padStart(2,"0")}-${String(f).padStart(2,"0")}`;return{start:a,end:q}}return{start:`${T.value}-01-01`,end:`${T.value}-12-31`}}),u=r=>r.toFixed(2),Mt=r=>new Date(r).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"}),qt=r=>{v.value=r,w.value="",C.value=""},Dt=()=>{v.value=null},ut=()=>{w.value&&C.value&&(v.value=null)},Et=async()=>{const{data:r}=await ot.from("vendors").select("*").eq("is_active",!0);r&&(H.value=r.map(a=>({id:a.id,first_name:a.first_name,last_name:a.last_name,initials:a.initials??"",color:a.color??"#6B7280"})));const e=J.query.vendorId;e&&H.value.some(a=>a.id===e)&&(m.value=e)},jt=async()=>{if(m.value){z.value=!0,K.value=!0;try{const{start:r,end:e}=$t.value,a=m.value==="__all__",{data:f,error:q}=await ot.from("sales").select(`
        id,
        total,
        created_at,
        items:sale_items(id, product_name, quantity, subtotal_ttc, product_id, vendor_id),
        payments:payments(method, amount)
      `).gte("created_at",`${r}T00:00:00`).lte("created_at",`${e}T23:59:59.999`).eq("status","completed");if(q)throw console.error("Erreur Supabase stats employé:",q),q;let _=f||[];a||(_=_.map(n=>({...n,items:(n.items||[]).filter(s=>s.vendor_id===m.value)})).filter(n=>n.items.length>0));const Z=new Set;for(const n of _)for(const s of n.items||[])s.product_id&&Z.add(s.product_id);const ct=new Map;if(Z.size>0){const{data:n}=await ot.from("products").select("id, name, type, category:categories(name)").in("id",Array.from(Z));if(n)for(const s of n)ct.set(s.id,{name:s.name,type:s.type??"product",categoryName:s.category?.name??"Autre"})}a?b.value=_.reduce((n,s)=>n+s.total,0):b.value=_.reduce((n,s)=>n+(s.items||[]).reduce((x,k)=>x+(k.subtotal_ttc??0),0),0),B.value=_.length;const D=new Map;for(const n of Q)D.set(n,{name:n,count:0,amount:0,amountHT:0});const I=new Map;let gt=0,xt=0,mt=0,yt=0;for(const n of _)for(const s of n.items||[]){const x=s.product_id?ct.get(s.product_id):null,k=x?.categoryName??"Autre",Ht=x?.type??"product";D.has(k)||D.set(k,{name:k,count:0,amount:0,amountHT:0});const et=D.get(k);if(et.count+=s.quantity,et.amount+=s.subtotal_ttc,et.amountHT+=s.subtotal_ttc/(1+ht),Ht==="service"){xt+=s.quantity,yt+=s.subtotal_ttc;const U=s.product_name||x?.name||"Service";I.has(U)||I.set(U,{name:U,count:0,amount:0,amountHT:0});const at=I.get(U);at.count+=s.quantity,at.amount+=s.subtotal_ttc,at.amountHT+=s.subtotal_ttc/(1+ht)}else gt+=s.quantity,mt+=s.subtotal_ttc}const tt=[];for(const n of Q){const s=D.get(n);s&&s.amount>0&&tt.push(s)}for(const[n,s]of D)!Q.includes(n)&&s.amount>0&&tt.push(s);S.value=tt,V.value=Array.from(I.values()).sort((n,s)=>s.amount-n.amount),nt.value=gt,W.value=xt,L.value=mt,$.value=yt;const O=new Map;for(const n of _)for(const s of n.payments||[]){const x=s.method;O.has(x)||O.set(x,{method:x,label:vt[x]||x,amount:0,count:0});const k=O.get(x);k.amount+=s.amount,k.count+=1}R.value=Array.from(O.values()).sort((n,s)=>s.amount-n.amount);const Y=new Map;for(const n of _){const s=n.created_at.split("T")[0];Y.has(s)||Y.set(s,{date:s,total:0,count:0});const x=Y.get(s);x.total+=n.total,x.count+=1}F.value=Array.from(Y.values()).sort((n,s)=>n.date.localeCompare(s.date))}catch(r){console.error("Erreur chargement stats employé:",r)}finally{z.value=!1}}};return zt(m,r=>{if(r&&r!=="__all__")lt.replace({query:{...J.query,vendorId:r}});else if(r==="__all__"){const e={...J.query};delete e.vendorId,lt.replace({query:e})}}),Vt(Et),(r,e)=>(d(),l("main",Xt,[t("div",Zt,[t("div",te,[e[8]||(e[8]=t("div",null,[t("h1",{class:"text-xl lg:text-2xl font-bold text-gray-900 dark:text-white"},"Statistiques Employé"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Performance individuelle par période")],-1)),K.value&&!z.value?(d(),l("button",{key:0,onClick:Tt,class:"inline-flex items-center gap-2 px-4 py-2 bg-amber-600 text-white rounded-xl hover:bg-amber-700 transition-colors"},[c(g(Gt),{class:"w-4 h-4"}),e[7]||(e[7]=st(" Télécharger PDF ",-1))])):h("",!0)]),t("div",ee,[e[12]||(e[12]=t("label",{class:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Sélectionner un employé",-1)),H.value.length===0?(d(),l("div",ae," Chargement des employés... ")):(d(),l("div",se,[t("button",{type:"button",onClick:e[0]||(e[0]=a=>N.value=!N.value),class:"w-full sm:w-96 flex items-center gap-3 px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl text-left hover:border-emerald-400 dark:hover:border-emerald-500 transition-colors"},[m.value==="__all__"?(d(),l(p,{key:0},[c(g(G),{class:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}),e[9]||(e[9]=t("span",{class:"text-sm font-medium text-gray-900 dark:text-white"},"Tout le monde",-1))],64)):M.value?(d(),l(p,{key:1},[t("div",{style:E({backgroundColor:M.value.color}),class:"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold shrink-0"},o(M.value.initials),5),t("span",re,o(M.value.first_name)+" "+o(M.value.last_name),1)],64)):(d(),l(p,{key:2},[c(g(G),{class:"w-5 h-5 text-gray-400"}),e[10]||(e[10]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Choisir un employé...",-1))],64)),c(g(Ft),{class:"w-4 h-4 ml-auto text-gray-400"})]),N.value?(d(),l("div",oe,[t("button",{type:"button",onClick:e[1]||(e[1]=a=>{m.value="__all__",N.value=!1}),class:j(["w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border-b border-gray-200 dark:border-gray-700",m.value==="__all__"&&"bg-emerald-50 dark:bg-emerald-900/20"])},[c(g(G),{class:"w-5 h-5 text-emerald-600 dark:text-emerald-400 shrink-0"}),e[11]||(e[11]=t("span",{class:"text-sm font-medium text-gray-900 dark:text-white"},"Tout le monde",-1))],2),(d(!0),l(p,null,A(H.value,a=>(d(),l("button",{key:a.id,type:"button",onClick:f=>{m.value=a.id,N.value=!1},class:j(["w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",m.value===a.id&&"bg-emerald-50 dark:bg-emerald-900/20"])},[t("div",{style:E({backgroundColor:a.color}),class:"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold shrink-0"},o(a.initials),5),t("span",de,o(a.first_name)+" "+o(a.last_name),1)],10,le))),128))])):h("",!0)]))]),t("div",ne,[t("div",ie,[e[13]||(e[13]=t("label",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300"},"Année :",-1)),rt(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>T.value=a),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-lg text-sm"},[(d(!0),l(p,null,A(Pt.value,a=>(d(),l("option",{key:a,value:a},o(a),9,ue))),128))],512),[[Rt,T.value]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2 block"},"Mois :",-1)),t("div",ce,[(d(),l(p,null,A(dt,(a,f)=>t("button",{key:f,type:"button",onClick:q=>v.value===f?Dt():qt(f),class:j(["px-3 py-1.5 rounded-lg text-xs font-medium transition-colors",v.value===f?"bg-emerald-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"])},o(a.substring(0,3)),11,ge)),64))])]),t("div",xe,[t("div",null,[e[15]||(e[15]=t("label",{class:"text-xs font-medium text-gray-600 dark:text-gray-400 block mb-1"},"Du",-1)),rt(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>w.value=a),onChange:ut,type:"date",class:"px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-lg text-sm"},null,544),[[pt,w.value]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"text-xs font-medium text-gray-600 dark:text-gray-400 block mb-1"},"Au",-1)),rt(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>C.value=a),onChange:ut,type:"date",class:"px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-lg text-sm"},null,544),[[pt,C.value]])]),t("button",{onClick:jt,disabled:z.value||!m.value,class:"inline-flex items-center gap-2 px-5 py-2 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[c(g(Bt),{class:"w-4 h-4"}),e[17]||(e[17]=t("span",null,"Calculer",-1))],8,me)]),m.value?h("",!0):(d(),l("p",ye," Veuillez sélectionner un employé avant de calculer. "))]),z.value?(d(),l("div",pe,[c(g(Jt),{class:"w-8 h-8 text-gray-400 animate-spin"})])):K.value?(d(),l(p,{key:2},[t("div",he,[t("button",{onClick:e[5]||(e[5]=a=>P.value="performance"),class:j(["px-5 py-2 rounded-lg text-sm font-medium transition-colors",P.value==="performance"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"])}," Performance ",2),t("button",{onClick:e[6]||(e[6]=a=>P.value="statistiques"),class:j(["px-5 py-2 rounded-lg text-sm font-medium transition-colors",P.value==="statistiques"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"])}," Statistiques ",2)]),P.value==="performance"?(d(),l("div",ve,[t("div",fe,[t("div",_e,[t("h2",ke," Totaux — "+o(X.value),1)]),t("div",we,[t("table",Ce,[e[20]||(e[20]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-600"},[t("th",{class:"px-4 py-2.5 text-left font-semibold text-gray-700 dark:text-gray-300"},"Catégorie"),t("th",{class:"px-4 py-2.5 text-right font-semibold text-gray-700 dark:text-gray-300"},"Nb"),t("th",{class:"px-4 py-2.5 text-right font-semibold text-gray-700 dark:text-gray-300"},"Prix HT"),t("th",{class:"px-4 py-2.5 text-right font-semibold text-gray-700 dark:text-gray-300"},"Prix TTC"),t("th",{class:"px-4 py-2.5 text-right font-semibold text-gray-700 dark:text-gray-300"},"Montant")])],-1)),t("tbody",Te,[(d(!0),l(p,null,A(S.value,a=>(d(),l("tr",{key:a.name,class:j(["text-gray-900 dark:text-gray-100",a.count===0&&"opacity-40"])},[t("td",Se,o(a.name),1),t("td",Ae,o(a.count),1),t("td",Pe,o(u(a.amountHT))+" €",1),t("td",$e,o(u(a.amount))+" €",1),t("td",Me,o(u(a.amount))+" €",1)],2))),128))]),t("tfoot",null,[t("tr",qe,[e[19]||(e[19]=t("td",{class:"px-4 py-2.5"},"Total",-1)),t("td",De,o(kt.value),1),t("td",Ee,o(u(wt.value))+" €",1),t("td",je,o(u(it.value))+" €",1),t("td",He,o(u(it.value))+" €",1)])])])])]),V.value.length>0?(d(),l("div",Ne,[t("div",ze,[t("h2",Ve,[c(g(bt),{class:"w-4 h-4"}),e[21]||(e[21]=st(" Prestations (Services) ",-1))])]),t("div",Fe,[t("table",Re,[e[23]||(e[23]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-600"},[t("th",{class:"px-4 py-2.5 text-left font-semibold text-gray-700 dark:text-gray-300"},"Service"),t("th",{class:"px-4 py-2.5 text-right font-semibold text-gray-700 dark:text-gray-300"},"Nb"),t("th",{class:"px-4 py-2.5 text-right font-semibold text-gray-700 dark:text-gray-300"},"Prix HT"),t("th",{class:"px-4 py-2.5 text-right font-semibold text-gray-700 dark:text-gray-300"},"Prix TTC"),t("th",{class:"px-4 py-2.5 text-right font-semibold text-gray-700 dark:text-gray-300"},"Montant")])],-1)),t("tbody",Be,[(d(!0),l(p,null,A(V.value,a=>(d(),l("tr",{key:a.name,class:"text-gray-900 dark:text-gray-100"},[t("td",Le,o(a.name),1),t("td",Ie,o(a.count),1),t("td",Oe,o(u(a.amountHT))+" €",1),t("td",Ye,o(u(a.amount))+" €",1),t("td",Ue,o(u(a.amount))+" €",1)]))),128))]),t("tfoot",null,[t("tr",Ge,[e[22]||(e[22]=t("td",{class:"px-4 py-2.5"},"Total Prestations",-1)),t("td",Je,o(W.value),1),t("td",Qe,o(u(Ct.value))+" €",1),t("td",Ke,o(u($.value))+" €",1),t("td",We,o(u($.value))+" €",1)])])])])])):h("",!0)])):h("",!0),P.value==="statistiques"?(d(),l(p,{key:1},[t("div",Xe,[t("div",Ze,[t("div",ta,[t("div",ea,[c(g(Lt),{class:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})])]),t("p",aa,o(u(b.value))+" €",1),e[24]||(e[24]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Total CA",-1))]),t("div",sa,[t("div",ra,[t("div",oa,[c(g(Qt),{class:"w-5 h-5 text-blue-600 dark:text-blue-400"})])]),t("p",la,o(B.value),1),e[25]||(e[25]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Nombre de ventes",-1))]),t("div",da,[t("div",na,[t("div",ia,[c(g(It),{class:"w-5 h-5 text-amber-600 dark:text-amber-400"})])]),t("p",ua,o(u(ft.value))+" €",1),e[26]||(e[26]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Panier moyen",-1))]),t("div",ca,[t("div",ga,[t("div",xa,[c(g(Kt),{class:"w-5 h-5 text-purple-600 dark:text-purple-400"})])]),t("p",ma,o(_t.value),1),e[27]||(e[27]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Top catégorie",-1))])]),t("div",ya,[t("div",pa,[e[28]||(e[28]=t("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider mb-4"}," CA journalier ",-1)),F.value.length===0?(d(),l("div",ba," Aucune donnée ")):(d(),l("div",ha,[(d(!0),l(p,null,A(F.value,a=>(d(),l("div",{key:a.date,class:"flex items-center gap-3"},[t("span",va,o(Mt(a.date)),1),t("div",fa,[t("div",{class:"h-full bg-gradient-to-r from-emerald-500 to-emerald-400 dark:from-emerald-600 dark:to-emerald-500 rounded-lg transition-all duration-500",style:E({width:`${a.total/St.value*100}%`})},null,4),a.total>0?(d(),l("span",_a,o(u(a.total))+" € ",1)):h("",!0)]),t("span",ka,o(a.count)+"v.",1)]))),128))]))]),t("div",wa,[t("h3",Ca,[c(g(Wt),{class:"w-4 h-4 text-gray-500 dark:text-gray-400"}),e[29]||(e[29]=st(" Modes de paiement ",-1))]),R.value.length===0?(d(),l("div",Ta," Aucune donnée ")):(d(),l("div",Sa,[(d(!0),l(p,null,A(R.value,a=>(d(),l("div",{key:a.method,class:"flex items-center gap-3"},[t("div",Aa,[t("div",Pa,[t("span",$a,o(a.label),1),t("span",Ma,o(u(a.amount))+" €",1)]),t("div",qa,[t("div",{class:"h-full bg-gradient-to-r from-blue-500 to-blue-400 dark:from-blue-600 dark:to-blue-500 rounded-full",style:E({width:`${a.amount/At.value*100}%`})},null,4)]),t("p",Da,o(a.count)+" paiement(s)",1)])]))),128))]))])]),t("div",Ea,[e[32]||(e[32]=t("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider mb-4"}," Produits vs Services ",-1)),t("div",ja,[t("div",Ha,[t("div",Na,[c(g(Ot),{class:"w-6 h-6 text-blue-600 dark:text-blue-400"})]),t("div",za,[e[30]||(e[30]=t("p",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Produits",-1)),t("p",Va,o(nt.value)+" article(s)",1)]),t("div",Fa,[t("p",Ra,o(u(L.value))+" €",1),b.value>0?(d(),l("p",Ba,o((L.value/b.value*100).toFixed(0))+"% ",1)):h("",!0)])]),t("div",La,[t("div",Ia,[c(g(bt),{class:"w-6 h-6 text-purple-600 dark:text-purple-400"})]),t("div",Oa,[e[31]||(e[31]=t("p",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Services",-1)),t("p",Ya,o(W.value)+" prestation(s)",1)]),t("div",Ua,[t("p",Ga,o(u($.value))+" €",1),b.value>0?(d(),l("p",Ja,o(($.value/b.value*100).toFixed(0))+"% ",1)):h("",!0)])])]),b.value>0?(d(),l("div",Qa,[t("div",{class:"h-full bg-gradient-to-r from-blue-500 to-blue-400 transition-all duration-500",style:E({width:`${L.value/b.value*100}%`})},null,4),t("div",{class:"h-full bg-gradient-to-r from-purple-500 to-purple-400 transition-all duration-500",style:E({width:`${$.value/b.value*100}%`})},null,4)])):h("",!0)])],64)):h("",!0)],64)):(d(),l("div",be,[c(g(G),{class:"w-12 h-12 mx-auto mb-3 opacity-40"}),e[18]||(e[18]=t("p",{class:"text-sm"},"Sélectionnez un employé et une période puis cliquez sur Calculer",-1))]))])]))}});export{ss as default};
