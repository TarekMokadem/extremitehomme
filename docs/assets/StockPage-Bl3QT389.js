import{c as Ye,a as w,r as g,s as U,d as vt,u as ft,w as Ee,C as ht,e as n,f as t,k as C,m as T,j as m,l as A,g as l,P as Ke,n as x,H as Ge,y,F as M,h as j,z as b,t as d,D as ye,B as ce,x as be,V as Qe,q as o}from"./index-1XmwSQZZ.js";import{R as J}from"./refresh-cw-CA2xZwrN.js";import{P as We}from"./plus-CzJP4T3u.js";import{C as wt,a as _t,b as Ct,c as Mt}from"./chevrons-right-Leqjt1rD.js";import{X as xe}from"./x-BsMOqToj.js";import{C as Ze,a as Xe}from"./circle-arrow-up-B5-U0-Ei.js";const Pe=Ye("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);const St=Ye("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),me=g([]),Ve=g([]),Te=g([]),ee=g(!1),q=g(!1);function Et(){const B=async()=>{ee.value=!0;try{const{data:i,error:c}=await U.from("products").select("*, category:categories(id, name, slug)").eq("type","product").order("display_order");if(c)throw c;me.value=(i||[]).map(k=>({...k,stock_technical:k.stock_technical??0}))}catch(i){console.error("Erreur chargement produits (stock):",i),me.value=[]}finally{ee.value=!1}},O=async i=>{ee.value=!0;try{let c=U.from("stock_movements").select("*").order("created_at",{ascending:!1}).limit(i?100:200);i&&(c=c.eq("product_id",i));const{data:k,error:h}=await c;if(h)throw h;Te.value=(k||[]).map(E=>({...E,stock_type:E.stock_type??"sale"}))}catch(c){console.error("Erreur chargement mouvements:",c),Te.value=[]}finally{ee.value=!1}},ke=async i=>{const{product_id:c,type:k,reason:h,reference_id:E=null,vendor_id:ve=null,stock_type:S="sale"}=i;let f=i.quantity;const F=S==="technical"?"stock_technical":"stock",{data:K}=await U.from("products").select(`${F}, stock, stock_technical`).eq("id",c).single(),L=K?.[F]??0;let P;k==="adjustment"?(P=Math.max(0,f),f=P-L):(k==="out"&&f>0&&(f=-f),k==="in"&&f<0&&(f=Math.abs(f)),P=Math.max(0,L+f)),q.value=!0;try{const{error:oe}=await U.from("stock_movements").insert({product_id:c,variant_id:null,type:k,quantity:f,reason:h,reference_id:E,vendor_id:ve,stock_type:S});if(oe)throw oe;const{error:p}=await U.from("products").update({[F]:P,updated_at:new Date().toISOString()}).eq("id",c);if(p)throw p;await B(),await O(c)}finally{q.value=!1}},Z=async()=>{try{const{data:i,error:c}=await U.from("categories").select("*").eq("is_active",!0).order("display_order");if(c)throw c;Ve.value=i||[]}catch(i){console.error("Erreur chargement catégories:",i),Ve.value=[]}},D=async i=>{q.value=!0;try{const{error:c}=await U.from("products").insert({name:i.name,code:i.code||null,category_id:i.category_id||null,brand:i.brand??null,model:i.model??null,barcode:i.barcode?.trim()||null,type:"product",price_ht:i.price_ht,price_ttc:i.price_ttc,tva_rate:i.tva_rate??.2,size:i.size||null,stock:i.stock??0,stock_technical:i.stock_technical??0,alert_threshold:i.alert_threshold??5,is_active:!0,display_order:999});if(c)throw c;await B()}finally{q.value=!1}},te=async(i,c)=>{q.value=!0;try{const{error:k}=await U.from("products").update({alert_threshold:Math.max(0,c),updated_at:new Date().toISOString()}).eq("id",i);if(k)throw k;await B()}finally{q.value=!1}},re=async(i,c)=>{q.value=!0;try{const k=c?.trim()||null,{error:h}=await U.from("products").update({barcode:k,updated_at:new Date().toISOString()}).eq("id",i);if(h)throw h;await B()}finally{q.value=!1}},N=async(i,c)=>{q.value=!0;try{const{error:k}=await U.from("products").update({...c,updated_at:new Date().toISOString()}).eq("id",i);if(k)throw k;await B()}finally{q.value=!1}},ae=w(()=>me.value),pe=w(()=>me.value.filter(i=>i.stock<=i.alert_threshold));return{productsWithStock:ae,productsOnly:ae,lowStockList:pe,categories:Ve,movements:Te,loadProducts:B,loadCategories:Z,loadMovements:O,addMovement:ke,createProduct:D,updateAlertThreshold:te,updateBarcode:re,updateProduct:N,isLoading:ee,isSaving:q}}const Pt={class:"flex-1 px-3 py-4 lg:px-4 lg:py-6 overflow-auto bg-gray-50 dark:bg-gray-900"},Vt={class:"max-w-7xl mx-auto space-y-6"},Tt={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},At={class:"text-xl lg:text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2"},qt=["disabled"],Ut={class:"flex rounded-xl border border-gray-200 dark:border-gray-600 overflow-hidden bg-white dark:bg-gray-800"},jt={key:0,class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 p-4"},$t={class:"flex flex-wrap items-center gap-3"},Nt={class:"flex rounded-xl border border-gray-200 dark:border-gray-600 overflow-hidden"},Lt=["onClick"],zt={key:1,class:"flex justify-center py-20"},It={key:2,class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},Bt={class:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between"},Ht=["disabled"],Rt={class:"overflow-x-auto"},Ot={class:"w-full text-left"},Dt={class:"divide-y divide-gray-100 dark:divide-gray-700"},Ft={class:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400"},Kt={class:"px-4 py-3 text-sm font-medium text-gray-900 dark:text-white"},Gt={class:"px-4 py-3"},Qt={class:"px-4 py-3"},Wt={class:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400"},Zt={key:0,class:"p-8 text-center text-gray-500 dark:text-gray-400"},Xt={key:3,class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},Yt={class:"overflow-x-auto lg:overflow-x-visible"},Jt={class:"w-full text-left table-fixed"},er={class:"divide-y divide-gray-100 dark:divide-gray-700"},tr={class:"px-3 py-3 w-[16%]"},rr={class:"flex items-center gap-2 min-w-0"},ar=["title"],or={class:"px-3 py-3 text-sm text-gray-600 dark:text-gray-300 w-[5%]"},lr={class:"px-3 py-3 text-sm text-gray-500 dark:text-gray-400 w-[5%]"},sr={class:"px-3 py-3 text-sm w-[10%] min-w-0"},dr=["title"],nr=["onClick"],ir=["title"],ur=["title"],gr=["title"],yr={class:"px-3 py-3 text-center font-semibold w-[5%] text-blue-600 dark:text-blue-400"},cr={class:"px-3 py-3 text-center w-[6%]"},br={key:0,class:"flex items-center justify-center gap-2"},xr={class:"text-gray-600 dark:text-gray-300"},mr=["onClick"],kr={class:"px-3 py-3 w-[24%]"},pr={class:"flex items-center gap-2 flex-wrap"},vr=["onClick"],fr=["onClick"],hr=["onClick"],wr={key:0,class:"p-6 text-center text-gray-500 dark:text-gray-400"},_r={key:1,class:"flex flex-wrap items-center justify-between gap-4 px-4 py-3 border-t border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-800/50"},Cr={class:"flex items-center gap-3"},Mr={class:"text-sm text-gray-600 dark:text-gray-400"},Sr=["value"],Er={class:"flex items-center gap-2"},Pr=["max"],Vr={class:"text-sm text-gray-600 dark:text-gray-400"},Tr=["disabled"],Ar=["disabled"],qr={class:"flex gap-1"},Ur=["onClick"],jr=["disabled"],$r=["disabled"],Nr={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50"},Lr={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-md w-full p-6 border border-gray-200 dark:border-gray-700"},zr={class:"flex items-center justify-between mb-4"},Ir={class:"text-sm text-gray-600 dark:text-gray-300 mb-4"},Br={class:"space-y-4"},Hr={class:"flex rounded-xl border border-gray-200 dark:border-gray-600 overflow-hidden"},Rr={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Or=["min","placeholder"],Dr={class:"flex gap-3 mt-6"},Fr=["disabled"],Kr={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50"},Gr={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-2xl w-full max-h-[80vh] flex flex-col border border-gray-200 dark:border-gray-700"},Qr={class:"p-6 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between"},Wr={class:"text-lg font-semibold text-gray-900 dark:text-white"},Zr={class:"p-6 overflow-y-auto flex-1"},Xr={key:0,class:"text-center text-gray-500 dark:text-gray-400 py-8"},Yr={key:1,class:"space-y-2"},Jr={class:"flex items-center gap-3"},ea={class:"text-sm font-medium text-gray-900 dark:text-white"},ta={class:"text-xs text-gray-500 dark:text-gray-400"},ra={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 overflow-y-auto"},aa={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-lg w-full my-8 p-6 border border-gray-200 dark:border-gray-700"},oa={class:"flex items-center justify-between mb-6"},la={class:"space-y-4"},sa=["value"],da={key:0,class:"space-y-2"},na={key:0,class:"flex gap-2 mb-2"},ia={class:"flex flex-wrap gap-2"},ua=["onClick"],ga={class:"grid grid-cols-2 gap-4"},ya={class:"grid grid-cols-2 gap-4"},ca={class:"grid grid-cols-3 gap-4"},ba={class:"flex gap-3 mt-6"},xa=["disabled"],ma={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 overflow-y-auto"},ka={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-lg w-full my-8 p-6 border border-gray-200 dark:border-gray-700"},pa={class:"flex items-center justify-between mb-6"},va={class:"space-y-4"},fa=["value"],ha={key:0,class:"space-y-2"},wa={key:0,class:"flex gap-2 mb-2"},_a={class:"flex flex-wrap gap-2"},Ca=["onClick"],Ma={class:"grid grid-cols-2 gap-4"},Sa={class:"grid grid-cols-2 gap-4"},Ea={class:"flex gap-3 mt-6"},Pa=["disabled"],$a=vt({__name:"StockPage",setup(B){const{productsWithStock:O,lowStockList:ke,categories:Z,movements:D,loadProducts:te,loadCategories:re,loadMovements:N,addMovement:ae,createProduct:pe,updateProduct:i,updateAlertThreshold:c,updateBarcode:k,isLoading:h,isSaving:E}=Et(),{vendor:ve}=ft(),S=g("products"),f=g("all"),F=w(()=>f.value==="alert"?ke.value:O.value),K=g(""),L=w(()=>{const a=K.value.trim().toLowerCase();return a?F.value.filter(e=>e.name.toLowerCase().includes(a)||e.code&&e.code.toLowerCase().includes(a)||e.barcode&&e.barcode.toLowerCase().includes(a)||e.brand&&e.brand.toLowerCase().includes(a)||e.model&&e.model.toLowerCase().includes(a)):F.value}),P=g(25),oe=[25,50,100],p=g(1),H=w(()=>Math.max(1,Math.ceil(L.value.length/P.value))),fe=w(()=>{const a=L.value.length,e=P.value,r=p.value,v=a===0?0:(r-1)*e+1,Y=Math.min(r*e,a);return{from:v,to:Y,total:a}}),Je=w(()=>{const a=H.value,e=p.value,r=2,v=[];for(let Y=Math.max(1,e-r);Y<=Math.min(a,e+r);Y++)v.push(Y);return v}),et=w(()=>{const a=(p.value-1)*P.value;return L.value.slice(a,a+P.value)}),G=a=>{p.value=Math.max(1,Math.min(a,H.value))},le=g(""),Ae=()=>{le.value=String(p.value)},qe=()=>{const a=parseInt(le.value,10);!isNaN(a)&&a>=1&&G(a),Ae()};Ee(p,()=>Ae(),{immediate:!0}),Ee([f,K],()=>{p.value=1});const he=g(!1),$=g(null),_=g("in"),R=g(1),se=g(""),z=g("sale"),Ue=w(()=>$.value?z.value==="technical"?$.value.stock_technical??0:$.value.stock:0);function tt(a){$.value=a,_.value="in",R.value=1,se.value="",z.value="sale",he.value=!0}function we(){he.value=!1,$.value=null}async function rt(){if(!$.value)return;const a=R.value;if(!(_.value==="adjustment"&&a<0)&&!(a<=0&&_.value!=="adjustment"))try{const e=_.value==="in"?"Entrée stock":_.value==="out"?"Sortie stock":`Ajustement → ${a}`;await ae({product_id:$.value.id,type:_.value,quantity:R.value,reason:se.value||e,vendor_id:ve.value?.id??null,stock_type:z.value}),we()}catch(e){alert(e instanceof Error?e.message:"Erreur lors de l'enregistrement")}}const _e=g(!1),de=g(null);function at(a){de.value=a,_e.value=!0,N(a.id)}function ot(){S.value="history",N()}function lt(){_e.value=!1,de.value=null}const Q=g(null),ne=g(0);function st(a){Q.value=a.id,ne.value=a.alert_threshold}const W=g(null),ie=g("");function dt(a){W.value=a.id,ie.value=a.barcode||""}function je(){W.value=null}async function $e(){if(W.value)try{await k(W.value,ie.value||null),W.value=null}catch(a){alert(a instanceof Error?a.message:"Erreur")}}function nt(){Q.value=null}async function Ne(){if(Q.value)try{await c(Q.value,ne.value),Q.value=null}catch(a){alert(a instanceof Error?a.message:"Erreur")}}const Le=a=>new Date(a).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),it=a=>O.value.find(e=>e.id===a)?.name??"Produit inconnu",ut=(a,e)=>{const r=Math.abs(e);return a==="in"?`+${r}`:a==="out"?`-${r}`:e>=0?`+${e}`:`${e}`},gt=a=>a==="technical"?"Technique":"Vente",ze=["chaussures","boots","bottines","mocassins","souliers","tennis","baskets"],yt=[36,36.5,37,37.5,38,38.5,39,39.5,40,40.5,41,41.5,42,42.5,43,43.5,44,44.5,45,45.5,46,46.5,47],ct=[{fr:36,uk:3},{fr:37,uk:4},{fr:38,uk:5},{fr:39,uk:6},{fr:40,uk:6.5},{fr:40.5,uk:7},{fr:41,uk:7.5},{fr:42,uk:8},{fr:42.5,uk:8.5},{fr:43,uk:9},{fr:43.5,uk:9.5},{fr:44,uk:10},{fr:45,uk:10.5},{fr:45.5,uk:11},{fr:46,uk:11.5},{fr:47,uk:12}],bt=[90,95,100,105,110,115,120,125,130],Ie=w(()=>{const a=ge.value?s.value.category_id:u.value.category_id;return Z.value.find(e=>e.id===a)?.slug||""}),Be=w(()=>ze.includes(Ie.value)),V=g("fr"),I=g(null),ue=w(()=>{const a=Ie.value;return ze.includes(a)?V.value==="fr"?yt.map(e=>String(e)):ct.map(e=>`${e.fr} (${e.uk} UK)`):a==="ceintures"?bt.map(e=>String(e)):a&&!["echarpes","chaussettes","ceintures-tressees"].includes(a)?["TU"]:[]}),ge=g(!1),s=g({name:"",code:"",barcode:"",category_id:"",brand:"",model:"",price_ht:0,price_ttc:0,tva_rate:.2,stock:0,stock_technical:0,alert_threshold:5}),He=g(null);function xt(){s.value={name:"",code:"",barcode:"",category_id:"",brand:"",model:"",price_ht:0,price_ttc:0,tva_rate:.2,stock:0,stock_technical:0,alert_threshold:5},I.value=null,V.value="fr",ge.value=!0,re(),Qe(()=>He.value?.focus())}function Ce(){ge.value=!1}const Re=w({get:()=>{const a=Number(s.value.price_ht)||0,e=Number(s.value.price_ttc)||0;return a>0?e/a:1.2},set:a=>{const e=Number(s.value.price_ht)||0;s.value.price_ttc=e>0?e*a:0}}),Oe=w({get:()=>{const a=Number(u.value.price_ht)||0,e=Number(u.value.price_ttc)||0;return a>0?e/a:1.2},set:a=>{const e=Number(u.value.price_ht)||0;u.value.price_ttc=e>0?e*a:0}});function De(a){I.value=I.value===a?null:a}async function mt(){if(!s.value.name.trim()){alert("Nom du produit requis.");return}try{await pe({name:s.value.name.trim(),code:s.value.code.trim()||null,barcode:s.value.barcode.trim()||null,category_id:s.value.category_id||null,brand:s.value.brand.trim()||null,model:s.value.model.trim()||null,price_ht:Number(s.value.price_ht)||0,price_ttc:Number(s.value.price_ttc)||0,tva_rate:.2,size:I.value||null,stock:Math.max(0,Number(s.value.stock)||0),stock_technical:Math.max(0,Number(s.value.stock_technical)||0),alert_threshold:Math.max(0,Number(s.value.alert_threshold)||5)}),Ce()}catch(a){alert(a instanceof Error?a.message:"Erreur lors de l'enregistrement")}}const Me=g(!1),X=g(null),u=g({name:"",code:"",barcode:"",category_id:"",brand:"",model:"",price_ht:0,price_ttc:0,tva_rate:.2,alert_threshold:5}),Fe=g(null);function kt(a){X.value=a;const e=a.price_ttc??a.price_ht*(1+(a.tva_rate??.2));u.value={name:a.name,code:a.code||"",barcode:a.barcode||"",category_id:a.category_id||"",brand:a.brand||"",model:a.model||"",price_ht:a.price_ht,price_ttc:e,tva_rate:a.tva_rate??.2,alert_threshold:a.alert_threshold??5},I.value=a.size??null,V.value="fr",Me.value=!0,re(),Qe(()=>Fe.value?.focus())}function Se(){Me.value=!1,X.value=null}async function pt(){if(!(!X.value||!u.value.name.trim()))try{await i(X.value.id,{name:u.value.name.trim(),code:u.value.code.trim()||null,barcode:u.value.barcode.trim()||null,category_id:u.value.category_id||null,brand:u.value.brand.trim()||null,model:u.value.model.trim()||null,price_ht:Number(u.value.price_ht)||0,price_ttc:Number(u.value.price_ttc)||0,tva_rate:.2,size:I.value||null,alert_threshold:Math.max(0,Number(u.value.alert_threshold)||5)}),Se()}catch(a){alert(a instanceof Error?a.message:"Erreur lors de la mise à jour")}}return Ee(S,a=>{a==="history"&&N()}),ht(()=>{te(),S.value==="history"&&N()}),(a,e)=>(o(),n("main",Pt,[t("div",Vt,[t("div",Tt,[t("div",null,[t("h1",At,[m(l(Ke),{class:"w-7 h-7 text-gray-600 dark:text-gray-400"}),e[43]||(e[43]=A(" Gestion du stock ",-1))]),e[44]||(e[44]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Produits, mouvements et alertes",-1))]),t("button",{onClick:e[0]||(e[0]=r=>{l(te)(),l(N)()}),disabled:l(h),class:"inline-flex items-center gap-2 px-4 py-2 bg-gray-900 dark:bg-emerald-600 dark:hover:bg-emerald-500 text-white rounded-xl hover:bg-gray-800 transition-colors disabled:opacity-50"},[m(l(J),{class:x(["w-4 h-4",l(h)&&"animate-spin"])},null,8,["class"]),e[45]||(e[45]=A(" Actualiser ",-1))],8,qt)]),t("div",Ut,[t("button",{onClick:e[1]||(e[1]=r=>S.value="products"),class:x(["flex-1 px-6 py-3 text-sm font-medium transition-colors flex items-center justify-center gap-2",S.value==="products"?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"])},[m(l(Ke),{class:"w-4 h-4"}),e[46]||(e[46]=A(" Produits ",-1))],2),t("button",{onClick:ot,class:x(["flex-1 px-6 py-3 text-sm font-medium transition-colors flex items-center justify-center gap-2",S.value==="history"?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"])},[m(l(Ge),{class:"w-4 h-4"}),e[47]||(e[47]=A(" Historique global ",-1))],2)]),S.value==="products"?(o(),n("div",jt,[t("div",$t,[t("div",Nt,[(o(),n(M,null,j([{id:"all",label:"Tous"},{id:"alert",label:"Alerte stock"}],r=>t("button",{key:r.id,onClick:v=>f.value=r.id,class:x(["px-4 py-2 text-sm font-medium transition-colors",f.value===r.id?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"])},d(r.label),11,Lt)),64))]),t("button",{onClick:xt,class:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 dark:hover:bg-emerald-500"},[m(l(We),{class:"w-4 h-4"}),e[48]||(e[48]=A(" Ajouter un produit ",-1))]),y(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>K.value=r),type:"text",placeholder:"Rechercher un produit...",class:"flex-1 min-w-[200px] px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl text-sm focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},null,512),[[b,K.value]])])])):C("",!0),l(h)&&(S.value!=="products"||l(O).length===0)?(o(),n("div",zt,[m(l(J),{class:"w-8 h-8 text-gray-400 dark:text-gray-500 animate-spin"})])):S.value==="history"?(o(),n("div",It,[t("div",Bt,[e[50]||(e[50]=t("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider"},"Tous les mouvements de stock",-1)),t("button",{onClick:e[3]||(e[3]=r=>l(N)()),disabled:l(h),class:"inline-flex items-center gap-2 px-3 py-1.5 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50"},[m(l(J),{class:x(["w-4 h-4",l(h)&&"animate-spin"])},null,8,["class"]),e[49]||(e[49]=A(" Actualiser ",-1))],8,Ht)]),t("div",Rt,[t("table",Ot,[e[51]||(e[51]=t("thead",{class:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600"},[t("tr",null,[t("th",{class:"px-4 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider"},"Date"),t("th",{class:"px-4 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider"},"Produit"),t("th",{class:"px-4 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider"},"Stock"),t("th",{class:"px-4 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider"},"Type"),t("th",{class:"px-4 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider"},"Quantité"),t("th",{class:"px-4 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider"},"Motif")])],-1)),t("tbody",Dt,[(o(!0),n(M,null,j(l(D),r=>(o(),n("tr",{key:r.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[t("td",Ft,d(Le(r.created_at)),1),t("td",Kt,d(it(r.product_id)),1),t("td",Gt,[t("span",{class:x(["inline-flex px-2 py-0.5 rounded text-xs font-medium",r.stock_type==="technical"?"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"])},d(gt(r.stock_type)),3)]),t("td",Qt,[t("span",{class:x(["inline-flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium",r.type==="in"?"bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300":r.type==="out"?"bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"])},[r.type==="in"?(o(),T(l(Ze),{key:0,class:"w-3.5 h-3.5"})):r.type==="out"?(o(),T(l(Xe),{key:1,class:"w-3.5 h-3.5"})):(o(),T(l(J),{key:2,class:"w-3.5 h-3.5"})),A(" "+d(r.type==="in"?"Entrée":r.type==="out"?"Sortie":"Ajustement"),1)],2)]),t("td",{class:x(["px-4 py-3 font-semibold",r.quantity>0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"])},d(r.quantity>0?"+":"")+d(r.quantity),3),t("td",Wt,d(r.reason||"—"),1)]))),128))])])]),l(D).length===0?(o(),n("p",Zt," Aucun mouvement enregistré. ")):C("",!0)])):(o(),n("div",Xt,[t("div",Yt,[t("table",Jt,[e[55]||(e[55]=t("thead",{class:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600"},[t("tr",null,[t("th",{class:"px-3 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider w-[16%]"},"Produit"),t("th",{class:"px-3 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider w-[5%]"},"Taille"),t("th",{class:"px-3 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider w-[5%]"},"Code"),t("th",{class:"px-3 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider w-[10%]"},"Code-barres"),t("th",{class:"px-3 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider w-[8%]"},"Marque"),t("th",{class:"px-3 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider w-[8%]"},"Modèle"),t("th",{class:"px-3 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider w-[8%]"},"Catégorie"),t("th",{class:"px-3 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider text-center w-[5%]",title:"Stock de vente"},"Vente"),t("th",{class:"px-3 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider text-center w-[5%]",title:"Stock technique"},"Tech."),t("th",{class:"px-3 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider text-center w-[6%]"},"Seuil"),t("th",{class:"px-3 py-3 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider w-[24%]"},"Actions")])],-1)),t("tbody",er,[(o(!0),n(M,null,j(et.value,r=>(o(),n("tr",{key:r.id,class:x(["hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",{"bg-amber-50 dark:bg-amber-900/20":r.stock<=r.alert_threshold}])},[t("td",tr,[t("div",rr,[t("span",{class:"font-medium text-gray-900 dark:text-white truncate",title:r.name},d(r.name),9,ar),r.stock<=r.alert_threshold?(o(),T(l(St),{key:0,class:"w-4 h-4 text-amber-500 shrink-0"})):C("",!0)])]),t("td",or,d(r.size||"—"),1),t("td",lr,d(r.code||"—"),1),t("td",sr,[W.value===r.id?(o(),n(M,{key:0},[y(t("input",{"onUpdate:modelValue":e[4]||(e[4]=v=>ie.value=v),type:"text",class:"w-full max-w-full px-2 py-1 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded text-sm box-border",placeholder:"EAN...",onKeydown:[ce($e,["enter"]),ce(je,["escape"])]},null,544),[[b,ie.value]]),t("div",{class:"flex gap-1 mt-1 flex-wrap"},[t("button",{type:"button",onClick:$e,class:"text-xs text-emerald-600 hover:underline"},"OK"),t("button",{type:"button",onClick:je,class:"text-xs text-gray-500 hover:underline"},"Annuler")])],64)):(o(),n(M,{key:1},[t("span",{class:"text-gray-600 dark:text-gray-300 truncate block",title:r.barcode||""},d(r.barcode||"—"),9,dr),t("button",{type:"button",onClick:v=>dt(r),class:"mt-0.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-xs shrink-0",title:"Modifier le code-barres"},[m(l(Pe),{class:"w-3.5 h-3.5 inline"})],8,nr)],64))]),t("td",{class:"px-3 py-3 text-sm text-gray-600 dark:text-gray-300 w-[8%] truncate",title:r.brand||""},d(r.brand||"—"),9,ir),t("td",{class:"px-3 py-3 text-sm text-gray-600 dark:text-gray-300 w-[8%] truncate",title:r.model||""},d(r.model||"—"),9,ur),t("td",{class:"px-3 py-3 text-sm text-gray-500 dark:text-gray-400 w-[8%] truncate",title:r.category?.name||""},d(r.category?.name||"—"),9,gr),t("td",{class:x(["px-3 py-3 text-center font-semibold w-[5%]",r.stock<=r.alert_threshold?"text-amber-600 dark:text-amber-400":"text-gray-900 dark:text-white"])},d(r.stock),3),t("td",yr,d(r.stock_technical??0),1),t("td",cr,[Q.value===r.id?(o(),n("div",br,[y(t("input",{"onUpdate:modelValue":e[5]||(e[5]=v=>ne.value=v),type:"number",min:"0",class:"w-16 px-2 py-1 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded text-sm text-center",onKeydown:ce(Ne,["enter"])},null,544),[[b,ne.value,void 0,{number:!0}]]),t("button",{onClick:Ne,class:"text-emerald-600 hover:underline text-sm"},"OK"),t("button",{onClick:nt,class:"text-gray-500 hover:underline text-sm"},"Annuler")])):(o(),n(M,{key:1},[t("span",xr,d(r.alert_threshold),1),t("button",{onClick:v=>st(r),class:"ml-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 inline-flex",title:"Modifier le seuil"},[m(l(Pe),{class:"w-3.5 h-3.5"})],8,mr)],64))]),t("td",kr,[t("div",pr,[t("button",{onClick:v=>tt(r),class:"inline-flex items-center gap-1 px-2 py-1.5 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",title:"Ajouter un mouvement"},[m(l(We),{class:"w-3.5 h-3.5"}),e[52]||(e[52]=A(" Mouvement ",-1))],8,vr),t("button",{onClick:v=>at(r),class:"inline-flex items-center gap-1 px-2 py-1.5 text-xs font-medium text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",title:"Historique"},[m(l(Ge),{class:"w-3.5 h-3.5"}),e[53]||(e[53]=A(" Historique ",-1))],8,fr),t("button",{onClick:v=>kt(r),class:"inline-flex items-center gap-1 px-2 py-1.5 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",title:"Modifier le produit"},[m(l(Pe),{class:"w-3.5 h-3.5"}),e[54]||(e[54]=A(" Modifier ",-1))],8,hr)])])],2))),128))])])]),L.value.length===0?(o(),n("p",wr," Aucun produit à afficher. ")):C("",!0),!l(h)&&L.value.length>0?(o(),n("div",_r,[t("div",Cr,[t("span",Mr,d(fe.value.from)+"-"+d(fe.value.to)+" sur "+d(fe.value.total)+" produits ",1),e[56]||(e[56]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Par page",-1)),y(t("select",{"onUpdate:modelValue":e[6]||(e[6]=r=>P.value=r),class:"px-3 py-1.5 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-sm dark:text-gray-100"},[(o(),n(M,null,j(oe,r=>t("option",{key:r,value:r},d(r),9,Sr)),64))],512),[[ye,P.value,void 0,{number:!0}]])]),t("div",Er,[e[57]||(e[57]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Page",-1)),y(t("input",{"onUpdate:modelValue":e[7]||(e[7]=r=>le.value=r),type:"number",min:"1",max:H.value,onKeydown:ce(qe,["enter"]),onBlur:qe,class:"w-16 px-2 py-1.5 text-sm text-center bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500"},null,40,Pr),[[b,le.value]]),t("span",Vr,"/ "+d(H.value),1),t("button",{disabled:p.value<=1,onClick:e[8]||(e[8]=r=>G(1)),title:"Première page",class:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[m(l(wt),{class:"w-5 h-5"})],8,Tr),t("button",{disabled:p.value<=1,onClick:e[9]||(e[9]=r=>G(p.value-1)),class:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[m(l(_t),{class:"w-5 h-5"})],8,Ar),t("div",qr,[(o(!0),n(M,null,j(Je.value,r=>(o(),n("button",{key:r,onClick:v=>G(r),class:x(["min-w-[2.25rem] px-2 py-1.5 text-sm font-medium rounded-lg transition-colors",p.value===r?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"])},d(r),11,Ur))),128))]),t("button",{disabled:p.value>=H.value,onClick:e[10]||(e[10]=r=>G(p.value+1)),class:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[m(l(Ct),{class:"w-5 h-5"})],8,jr),t("button",{disabled:p.value>=H.value,onClick:e[11]||(e[11]=r=>G(H.value)),title:"Dernière page",class:"p-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[m(l(Mt),{class:"w-5 h-5"})],8,$r)])])):C("",!0)])),(o(),T(be,{to:"body"},[he.value&&$.value?(o(),n("div",Nr,[t("div",Lr,[t("div",zr,[e[58]||(e[58]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Mouvement de stock",-1)),t("button",{onClick:we,class:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded"},[m(l(xe),{class:"w-5 h-5"})])]),t("p",Ir,[A(d($.value.name)+" — Stock "+d(z.value==="technical"?"technique":"vente")+" actuel : ",1),t("strong",null,d(Ue.value),1)]),t("div",Br,[t("div",null,[e[59]||(e[59]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Type de stock",-1)),t("div",Hr,[t("button",{type:"button",onClick:e[12]||(e[12]=r=>z.value="sale"),class:x(["flex-1 px-4 py-2 text-sm font-medium transition-colors",z.value==="sale"?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"])},"Vente",2),t("button",{type:"button",onClick:e[13]||(e[13]=r=>z.value="technical"),class:x(["flex-1 px-4 py-2 text-sm font-medium transition-colors",z.value==="technical"?"bg-blue-600 text-white":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"])},"Technique",2)])]),t("div",null,[e[61]||(e[61]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Type",-1)),y(t("select",{"onUpdate:modelValue":e[14]||(e[14]=r=>_.value=r),class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},[...e[60]||(e[60]=[t("option",{value:"in"},"Entrée",-1),t("option",{value:"out"},"Sortie",-1),t("option",{value:"adjustment"},"Fixer le stock",-1)])],512),[[ye,_.value]])]),t("div",null,[t("label",Rr,d(_.value==="adjustment"?"Nouvelle valeur du stock":"Quantité"),1),y(t("input",{"onUpdate:modelValue":e[15]||(e[15]=r=>R.value=r),type:"number",min:_.value==="adjustment"?0:1,class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:_.value==="adjustment"?`Actuellement : ${Ue.value}`:""},null,8,Or),[[b,R.value,void 0,{number:!0}]])]),t("div",null,[e[62]||(e[62]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Motif",-1)),y(t("input",{"onUpdate:modelValue":e[16]||(e[16]=r=>se.value=r),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Livraison, inventaire, perte..."},null,512),[[b,se.value]])])]),t("div",Dr,[t("button",{onClick:we,class:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700"}," Annuler "),t("button",{onClick:rt,disabled:l(E)||_.value!=="adjustment"&&R.value<=0||_.value==="adjustment"&&R.value<0,class:"flex-1 px-4 py-2 bg-gray-900 dark:bg-emerald-600 dark:hover:bg-emerald-500 text-white rounded-xl hover:bg-gray-800 disabled:opacity-50"},d(l(E)?"Enregistrement...":"Enregistrer"),9,Fr)])])])):C("",!0)])),(o(),T(be,{to:"body"},[_e.value?(o(),n("div",Kr,[t("div",Gr,[t("div",Qr,[t("h3",Wr," Historique des mouvements "+d(de.value?`— ${de.value.name}`:""),1),t("button",{onClick:lt,class:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded"},[m(l(xe),{class:"w-5 h-5"})])]),t("div",Zr,[l(D).length===0?(o(),n("div",Xr," Aucun mouvement pour ce produit. ")):(o(),n("ul",Yr,[(o(!0),n(M,null,j(l(D),r=>(o(),n("li",{key:r.id,class:"flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-700 last:border-0"},[t("div",Jr,[t("span",{class:x(["inline-flex items-center justify-center w-8 h-8 rounded-full",r.type==="in"?"bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300":r.type==="out"?"bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"])},[r.type==="in"?(o(),T(l(Ze),{key:0,class:"w-4 h-4"})):r.type==="out"?(o(),T(l(Xe),{key:1,class:"w-4 h-4"})):(o(),T(l(J),{key:2,class:"w-4 h-4"}))],2),t("div",null,[t("p",ea,d(ut(r.type,r.quantity))+" — "+d(r.reason),1),t("p",ta,d(Le(r.created_at)),1)])]),t("span",{class:x(["font-semibold",r.quantity>0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"])},d(r.quantity>0?"+":"")+d(r.quantity),3)]))),128))]))])])])):C("",!0)])),(o(),T(be,{to:"body"},[ge.value?(o(),n("div",ra,[t("div",aa,[t("div",oa,[e[63]||(e[63]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Nouveau produit",-1)),t("button",{onClick:Ce,class:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded"},[m(l(xe),{class:"w-5 h-5"})])]),t("div",la,[t("div",null,[e[64]||(e[64]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Code-barres",-1)),y(t("input",{ref_key:"barcodeInputRef",ref:He,"onUpdate:modelValue":e[17]||(e[17]=r=>s.value.barcode=r),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Scannez ici ou saisissez (EAN…)"},null,512),[[b,s.value.barcode]]),e[65]||(e[65]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Le champ se remplit automatiquement au scan. Obligatoire pour vendre en caisse.",-1))]),t("div",null,[e[66]||(e[66]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Nom *",-1)),y(t("input",{"onUpdate:modelValue":e[18]||(e[18]=r=>s.value.name=r),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Ex. Mocassin cuir"},null,512),[[b,s.value.name]])]),t("div",null,[e[67]||(e[67]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Code",-1)),y(t("input",{"onUpdate:modelValue":e[19]||(e[19]=r=>s.value.code=r),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Ex. MOC01"},null,512),[[b,s.value.code]])]),t("div",null,[e[69]||(e[69]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Catégorie",-1)),y(t("select",{"onUpdate:modelValue":e[20]||(e[20]=r=>s.value.category_id=r),class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},[e[68]||(e[68]=t("option",{value:""},"— Choisir —",-1)),(o(!0),n(M,null,j(l(Z),r=>(o(),n("option",{key:r.id,value:r.id},d(r.name),9,sa))),128))],512),[[ye,s.value.category_id]])]),ue.value.length>0?(o(),n("div",da,[e[70]||(e[70]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tailles",-1)),Be.value?(o(),n("div",na,[t("button",{type:"button",onClick:e[21]||(e[21]=r=>V.value="fr"),class:x(["px-3 py-1.5 rounded-lg text-sm font-medium",V.value==="fr"?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"])}," Française ",2),t("button",{type:"button",onClick:e[22]||(e[22]=r=>V.value="uk"),class:x(["px-3 py-1.5 rounded-lg text-sm font-medium",V.value==="uk"?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"])}," Anglaise ",2)])):C("",!0),t("div",ia,[(o(!0),n(M,null,j(ue.value,r=>(o(),n("button",{key:r,type:"button",onClick:v=>De(r),class:x(["px-3 py-2 rounded-lg text-sm font-medium transition-colors",I.value===r?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"])},d(r),11,ua))),128))])])):C("",!0),t("div",ga,[t("div",null,[e[71]||(e[71]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Marque",-1)),y(t("input",{"onUpdate:modelValue":e[23]||(e[23]=r=>s.value.brand=r),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Ex. Lacoste"},null,512),[[b,s.value.brand]])]),t("div",null,[e[72]||(e[72]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Modèle",-1)),y(t("input",{"onUpdate:modelValue":e[24]||(e[24]=r=>s.value.model=r),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Ex. Classic"},null,512),[[b,s.value.model]])])]),t("div",ya,[t("div",null,[e[73]||(e[73]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Prix HT (€)",-1)),y(t("input",{"onUpdate:modelValue":e[25]||(e[25]=r=>s.value.price_ht=r),type:"number",min:"0",step:"0.01",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},null,512),[[b,s.value.price_ht,void 0,{number:!0}]])]),e[76]||(e[76]=t("div",null,[t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"TVA"),t("input",{value:"20%",readonly:"",class:"w-full px-4 py-2 border border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-400 rounded-xl"})],-1)),t("div",null,[e[74]||(e[74]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Coef",-1)),y(t("input",{"onUpdate:modelValue":e[26]||(e[26]=r=>Re.value=r),type:"number",min:"0",step:"0.01",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},null,512),[[b,Re.value,void 0,{number:!0}]])]),t("div",null,[e[75]||(e[75]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Prix de vente TTC (€)",-1)),y(t("input",{"onUpdate:modelValue":e[27]||(e[27]=r=>s.value.price_ttc=r),type:"number",min:"0",step:"0.01",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},null,512),[[b,s.value.price_ttc,void 0,{number:!0}]])])]),t("div",ca,[t("div",null,[e[77]||(e[77]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Stock vente",-1)),y(t("input",{"onUpdate:modelValue":e[28]||(e[28]=r=>s.value.stock=r),type:"number",min:"0",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},null,512),[[b,s.value.stock,void 0,{number:!0}]])]),t("div",null,[e[78]||(e[78]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Stock technique",-1)),y(t("input",{"onUpdate:modelValue":e[29]||(e[29]=r=>s.value.stock_technical=r),type:"number",min:"0",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},null,512),[[b,s.value.stock_technical,void 0,{number:!0}]])]),t("div",null,[e[79]||(e[79]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Seuil alerte",-1)),y(t("input",{"onUpdate:modelValue":e[30]||(e[30]=r=>s.value.alert_threshold=r),type:"number",min:"0",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},null,512),[[b,s.value.alert_threshold,void 0,{number:!0}]])])])]),t("div",ba,[t("button",{onClick:Ce,class:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700"}," Annuler "),t("button",{onClick:mt,disabled:l(E)||!s.value.name.trim(),class:"flex-1 px-4 py-2 bg-gray-900 dark:bg-emerald-600 dark:hover:bg-emerald-500 text-white rounded-xl hover:bg-gray-800 disabled:opacity-50"},d(l(E)?"Enregistrement...":"Créer le produit"),9,xa)])])])):C("",!0)])),(o(),T(be,{to:"body"},[Me.value&&X.value?(o(),n("div",ma,[t("div",ka,[t("div",pa,[e[80]||(e[80]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Modifier le produit",-1)),t("button",{onClick:Se,class:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded"},[m(l(xe),{class:"w-5 h-5"})])]),t("div",va,[t("div",null,[e[81]||(e[81]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Code-barres",-1)),y(t("input",{ref_key:"editBarcodeInputRef",ref:Fe,"onUpdate:modelValue":e[31]||(e[31]=r=>u.value.barcode=r),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Scannez ici ou saisissez (EAN…)"},null,512),[[b,u.value.barcode]])]),t("div",null,[e[82]||(e[82]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Nom *",-1)),y(t("input",{"onUpdate:modelValue":e[32]||(e[32]=r=>u.value.name=r),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Ex. Mocassin cuir"},null,512),[[b,u.value.name]])]),t("div",null,[e[83]||(e[83]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Code",-1)),y(t("input",{"onUpdate:modelValue":e[33]||(e[33]=r=>u.value.code=r),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Ex. MOC01"},null,512),[[b,u.value.code]])]),t("div",null,[e[85]||(e[85]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Catégorie",-1)),y(t("select",{"onUpdate:modelValue":e[34]||(e[34]=r=>u.value.category_id=r),class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},[e[84]||(e[84]=t("option",{value:""},"— Choisir —",-1)),(o(!0),n(M,null,j(l(Z),r=>(o(),n("option",{key:r.id,value:r.id},d(r.name),9,fa))),128))],512),[[ye,u.value.category_id]])]),ue.value.length>0?(o(),n("div",ha,[e[86]||(e[86]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tailles",-1)),Be.value?(o(),n("div",wa,[t("button",{type:"button",onClick:e[35]||(e[35]=r=>V.value="fr"),class:x(["px-3 py-1.5 rounded-lg text-sm font-medium",V.value==="fr"?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"])}," Française ",2),t("button",{type:"button",onClick:e[36]||(e[36]=r=>V.value="uk"),class:x(["px-3 py-1.5 rounded-lg text-sm font-medium",V.value==="uk"?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"])}," Anglaise ",2)])):C("",!0),t("div",_a,[(o(!0),n(M,null,j(ue.value,r=>(o(),n("button",{key:r,type:"button",onClick:v=>De(r),class:x(["px-3 py-2 rounded-lg text-sm font-medium transition-colors",I.value===r?"bg-gray-900 dark:bg-emerald-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"])},d(r),11,Ca))),128))])])):C("",!0),t("div",Ma,[t("div",null,[e[87]||(e[87]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Marque",-1)),y(t("input",{"onUpdate:modelValue":e[37]||(e[37]=r=>u.value.brand=r),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Ex. Lacoste"},null,512),[[b,u.value.brand]])]),t("div",null,[e[88]||(e[88]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Modèle",-1)),y(t("input",{"onUpdate:modelValue":e[38]||(e[38]=r=>u.value.model=r),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Ex. Classic"},null,512),[[b,u.value.model]])])]),t("div",Sa,[t("div",null,[e[89]||(e[89]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Prix HT (€)",-1)),y(t("input",{"onUpdate:modelValue":e[39]||(e[39]=r=>u.value.price_ht=r),type:"number",min:"0",step:"0.01",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},null,512),[[b,u.value.price_ht,void 0,{number:!0}]])]),e[92]||(e[92]=t("div",null,[t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"TVA"),t("input",{value:"20%",readonly:"",class:"w-full px-4 py-2 border border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-400 rounded-xl"})],-1)),t("div",null,[e[90]||(e[90]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Coef",-1)),y(t("input",{"onUpdate:modelValue":e[40]||(e[40]=r=>Oe.value=r),type:"number",min:"0",step:"0.01",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},null,512),[[b,Oe.value,void 0,{number:!0}]])]),t("div",null,[e[91]||(e[91]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Prix de vente TTC (€)",-1)),y(t("input",{"onUpdate:modelValue":e[41]||(e[41]=r=>u.value.price_ttc=r),type:"number",min:"0",step:"0.01",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},null,512),[[b,u.value.price_ttc,void 0,{number:!0}]])])]),t("div",null,[e[93]||(e[93]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Seuil alerte",-1)),y(t("input",{"onUpdate:modelValue":e[42]||(e[42]=r=>u.value.alert_threshold=r),type:"number",min:"0",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},null,512),[[b,u.value.alert_threshold,void 0,{number:!0}]])])]),t("div",Ea,[t("button",{onClick:Se,class:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700"}," Annuler "),t("button",{onClick:pt,disabled:l(E)||!u.value.name.trim(),class:"flex-1 px-4 py-2 bg-gray-900 dark:bg-emerald-600 dark:hover:bg-emerald-500 text-white rounded-xl hover:bg-gray-800 disabled:opacity-50"},d(l(E)?"Enregistrement...":"Enregistrer"),9,Pa)])])])):C("",!0)]))])]))}});export{$a as default};
