import{d as zt,r as i,a as y,w as Ft,D as Vt,e as l,f as t,k as v,j as c,l as rt,g,F as p,U as G,N as D,t as o,I as Rt,n as E,h as S,y as ot,G as Bt,z as bt,Q as It,S as ht,E as Lt,M as Ot,P as Yt,s as lt,R as Ut,O as Gt,q as d}from"./index-CmA_YBSG.js";import{F as Jt}from"./file-down-CxvZRLsg.js";import{R as Qt}from"./refresh-cw-DrNKGNc5.js";import{S as Kt}from"./shopping-bag-D2AE6vFK.js";import{A as Wt}from"./award-BHaxxwhY.js";import{C as Xt}from"./credit-card-D1mVmzVu.js";const Zt={class:"flex-1 p-4 lg:p-6 overflow-auto bg-gray-50 dark:bg-gray-900"},te={class:"max-w-7xl mx-auto space-y-6"},ee={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},ae={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-200 dark:border-gray-700"},se={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},re={key:1,class:"relative"},oe={class:"text-sm font-medium text-gray-900 dark:text-white"},le={key:0,class:"absolute z-20 mt-2 w-full sm:w-96 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl overflow-hidden"},de=["onClick"],ne={class:"text-sm font-medium text-gray-900 dark:text-white"},ie={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-200 dark:border-gray-700 space-y-4"},ue={class:"flex flex-wrap items-center gap-3"},ce=["value"],ge={class:"flex flex-wrap gap-2"},xe=["onClick"],me={class:"flex flex-wrap items-end gap-3"},ye=["disabled"],pe={key:0,class:"text-xs text-amber-600 dark:text-amber-400"},be={key:0,class:"flex items-center justify-center py-20"},he={key:1,class:"text-center py-16 text-gray-500 dark:text-gray-400"},ve={class:"flex gap-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-xl w-fit"},fe={key:0,"data-print-content":""},_e={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden mb-6"},ke={class:"px-5 py-3 bg-gray-100 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600"},we={class:"text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider"},Ce={class:"overflow-x-auto"},Te={class:"w-full text-sm"},Se={class:"divide-y divide-gray-100 dark:divide-gray-700"},Ae={class:"px-4 py-2"},Pe={class:"px-4 py-2 text-right tabular-nums"},$e={class:"px-4 py-2 text-right tabular-nums"},qe={class:"px-4 py-2 text-right tabular-nums"},Me={class:"px-4 py-2 text-right tabular-nums font-semibold"},De={class:"font-bold bg-gray-50 dark:bg-gray-700/50 border-t-2 border-gray-300 dark:border-gray-600"},Ee={class:"px-4 py-2.5 text-right tabular-nums"},je={class:"px-4 py-2.5 text-right tabular-nums"},Ne={class:"px-4 py-2.5 text-right tabular-nums"},He={class:"px-4 py-2.5 text-right tabular-nums"},ze={key:0,class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},Fe={class:"px-5 py-3 bg-purple-50 dark:bg-purple-900/20 border-b border-gray-200 dark:border-gray-600"},Ve={class:"text-sm font-semibold text-purple-800 dark:text-purple-300 uppercase tracking-wider flex items-center gap-2"},Re={class:"overflow-x-auto"},Be={class:"w-full text-sm"},Ie={class:"divide-y divide-gray-100 dark:divide-gray-700"},Le={class:"px-4 py-2"},Oe={class:"px-4 py-2 text-right tabular-nums"},Ye={class:"px-4 py-2 text-right tabular-nums"},Ue={class:"px-4 py-2 text-right tabular-nums"},Ge={class:"px-4 py-2 text-right tabular-nums font-semibold"},Je={class:"font-bold bg-purple-50/50 dark:bg-purple-900/10 border-t-2 border-gray-300 dark:border-gray-600"},Qe={class:"px-4 py-2.5 text-right tabular-nums"},Ke={class:"px-4 py-2.5 text-right tabular-nums"},We={class:"px-4 py-2.5 text-right tabular-nums"},Xe={class:"px-4 py-2.5 text-right tabular-nums"},Ze={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},ta={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-200 dark:border-gray-700"},ea={class:"flex items-center justify-between mb-3"},aa={class:"w-10 h-10 rounded-xl bg-emerald-100 dark:bg-emerald-900/40 flex items-center justify-center"},sa={class:"text-2xl font-bold text-gray-900 dark:text-white"},ra={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-200 dark:border-gray-700"},oa={class:"flex items-center justify-between mb-3"},la={class:"w-10 h-10 rounded-xl bg-blue-100 dark:bg-blue-900/40 flex items-center justify-center"},da={class:"text-2xl font-bold text-gray-900 dark:text-white"},na={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-200 dark:border-gray-700"},ia={class:"flex items-center justify-between mb-3"},ua={class:"w-10 h-10 rounded-xl bg-amber-100 dark:bg-amber-900/40 flex items-center justify-center"},ca={class:"text-2xl font-bold text-gray-900 dark:text-white"},ga={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-200 dark:border-gray-700"},xa={class:"flex items-center justify-between mb-3"},ma={class:"w-10 h-10 rounded-xl bg-purple-100 dark:bg-purple-900/40 flex items-center justify-center"},ya={class:"text-2xl font-bold text-gray-900 dark:text-white truncate"},pa={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ba={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-200 dark:border-gray-700"},ha={key:0,class:"text-center py-8 text-gray-500 dark:text-gray-400 text-sm"},va={key:1,class:"space-y-2 max-h-80 overflow-y-auto"},fa={class:"w-14 text-xs text-gray-500 dark:text-gray-400 shrink-0"},_a={class:"flex-1 h-7 bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden relative"},ka={key:0,class:"absolute right-2 top-1/2 -translate-y-1/2 text-xs font-semibold text-gray-700 dark:text-gray-200"},wa={class:"w-10 text-xs text-gray-400 dark:text-gray-500 text-right shrink-0"},Ca={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-200 dark:border-gray-700"},Ta={class:"text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider mb-4 flex items-center gap-2"},Sa={key:0,class:"text-center py-8 text-gray-500 dark:text-gray-400 text-sm"},Aa={key:1,class:"space-y-3"},Pa={class:"flex-1 min-w-0"},$a={class:"flex items-center justify-between mb-1"},qa={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},Ma={class:"text-sm font-bold text-gray-900 dark:text-white ml-2 shrink-0"},Da={class:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden"},Ea={class:"text-xs text-gray-500 dark:text-gray-400 mt-0.5"},ja={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm border border-gray-200 dark:border-gray-700"},Na={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Ha={class:"flex items-center gap-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl"},za={class:"w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900/40 flex items-center justify-center"},Fa={class:"flex-1 min-w-0"},Va={class:"text-xs text-gray-500 dark:text-gray-400"},Ra={class:"text-right"},Ba={class:"text-lg font-bold text-gray-900 dark:text-white"},Ia={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},La={class:"flex items-center gap-4 p-4 bg-purple-50 dark:bg-purple-900/20 rounded-xl"},Oa={class:"w-12 h-12 rounded-full bg-purple-100 dark:bg-purple-900/40 flex items-center justify-center"},Ya={class:"flex-1 min-w-0"},Ua={class:"text-xs text-gray-500 dark:text-gray-400"},Ga={class:"text-right"},Ja={class:"text-lg font-bold text-gray-900 dark:text-white"},Qa={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},Ka={key:0,class:"mt-4 h-4 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden flex"},vt=.2,rs=zt({__name:"StatsEmployePage",setup(Wa){const J=Ut(),dt=Gt(),Q=["Chaussure","Chaussette","Produit barbe","Produit cheveux","Shampooing","Conditioner","Gel douche","Accessoire rasage","Accessoire chaussure","Produit chaussure","Ceinture","Portefeuille","Textile","Porte monnaie","Porte cartes","Sac","Noeud pap","Cravate","Parfum","Echarpe","Produit esthetique","Trousse","Bonnet","Casquette","Acomptes","Clients","ESTHETIQUE","PRESTATION"],nt=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],ft={cash:"Espèces",card:"Carte bancaire",contactless:"Sans contact",check:"Chèque",gift_card:"Bon cadeau",amex:"Amex",free:"Gratuit",technical:"Technique"},j=i([]),x=i(""),N=i(!1),w=i(new Date().getFullYear()),f=i(null),_=i(""),k=i(""),A=i("performance"),H=i(!1),K=i(!1),C=i([]),z=i([]),F=i([]),V=i([]),h=i(0),R=i(0),it=i(0),W=i(0),B=i(0),P=i(0),$=y(()=>j.value.find(s=>s.id===x.value)),_t=y(()=>R.value>0?h.value/R.value:0),kt=y(()=>C.value.length===0?"—":[...C.value].sort((e,a)=>a.amount-e.amount)[0]?.name??"—"),wt=y(()=>C.value.reduce((s,e)=>s+e.count,0)),ut=y(()=>C.value.reduce((s,e)=>s+e.amount,0)),Ct=y(()=>C.value.reduce((s,e)=>s+e.amountHT,0)),Tt=y(()=>z.value.reduce((s,e)=>s+e.amountHT,0)),X=y(()=>{if(x.value==="__all__")return"Tout le monde";const s=$.value;return s?`${s.first_name} ${s.last_name}`:""}),St=()=>{const s=document.querySelector("[data-print-content]");if(!s)return;const e=window.open("","_blank");if(!e){alert("Autorisez les pop-ups pour télécharger le PDF.");return}const a=f.value!==null?`${nt[f.value]} ${w.value}`:_.value&&k.value?`${_.value} au ${k.value}`:`${w.value}`;e.document.write(`<!DOCTYPE html><html><head><meta charset="utf-8"><title>Stats Employé - ${X.value}</title>
<style>
  @page { size: A4 portrait; margin: 10mm; }
  * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; color: #000; }
  body { padding: 10mm; }
  h1 { font-size: 16px; margin-bottom: 6px; text-align: center; }
  h2 { font-size: 13px; margin: 12px 0 6px; }
  table { width: 100%; border-collapse: collapse; font-size: 10px; margin-bottom: 12px; }
  th, td { border: 1px solid #ccc; padding: 3px 6px; text-align: right; }
  th { background: #f3f4f6; font-weight: 600; }
  td:first-child, th:first-child { text-align: left; }
  tfoot td { font-weight: bold; background: #f9fafb; }
</style></head><body>
<h1>Statistiques Employé — ${X.value}</h1>
<h2 style="text-align:center;font-weight:normal;color:#666">${a}</h2>
${s.innerHTML}
</body></html>`),e.document.close(),e.focus(),setTimeout(()=>{e.print()},400)},At=y(()=>Math.max(...F.value.map(s=>s.total),1)),Pt=y(()=>Math.max(...V.value.map(s=>s.amount),1)),$t=y(()=>{const s=new Date().getFullYear();return Array.from({length:5},(e,a)=>s-a)}),qt=y(()=>{if(_.value&&k.value)return{start:_.value,end:k.value};if(f.value!==null){const s=w.value,e=f.value,a=`${s}-${String(e+1).padStart(2,"0")}-01`,b=new Date(s,e+1,0).getDate(),I=`${s}-${String(e+1).padStart(2,"0")}-${String(b).padStart(2,"0")}`;return{start:a,end:I}}return{start:`${w.value}-01-01`,end:`${w.value}-12-31`}}),u=s=>s.toFixed(2),Mt=s=>new Date(s).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"}),Dt=s=>{f.value=s,_.value="",k.value=""},Et=()=>{f.value=null},ct=()=>{_.value&&k.value&&(f.value=null)},jt=async()=>{const{data:s}=await lt.from("vendors").select("*").eq("is_active",!0);s&&(j.value=s.map(a=>({id:a.id,first_name:a.first_name,last_name:a.last_name,initials:a.initials??"",color:a.color??"#6B7280"})));const e=J.query.vendorId;e&&j.value.some(a=>a.id===e)&&(x.value=e)},Nt=async()=>{if(x.value){H.value=!0,K.value=!0;try{const{start:s,end:e}=qt.value,a=x.value==="__all__";let b=lt.from("sales").select(`
        id,
        total,
        created_at,
        items:sale_items(id, product_name, quantity, subtotal_ttc, product_id),
        payments:payments(method, amount)
      `).gte("created_at",`${s}T00:00:00`).lte("created_at",`${e}T23:59:59.999`).eq("status","completed");a||(b=b.eq("vendor_id",x.value));const{data:I,error:Z}=await b;if(Z)throw console.error("Erreur Supabase stats employé:",Z),Z;const q=I||[],tt=new Set;for(const n of q)for(const r of n.items||[])r.product_id&&tt.add(r.product_id);const gt=new Map;if(tt.size>0){const{data:n}=await lt.from("products").select("id, name, type, category:categories(name)").in("id",Array.from(tt));if(n)for(const r of n)gt.set(r.id,{name:r.name,type:r.type??"product",categoryName:r.category?.name??"Autre"})}h.value=q.reduce((n,r)=>n+r.total,0),R.value=q.length;const M=new Map;for(const n of Q)M.set(n,{name:n,count:0,amount:0,amountHT:0});const L=new Map;let xt=0,mt=0,yt=0,pt=0;for(const n of q)for(const r of n.items||[]){const m=r.product_id?gt.get(r.product_id):null,T=m?.categoryName??"Autre",Ht=m?.type??"product";M.has(T)||M.set(T,{name:T,count:0,amount:0,amountHT:0});const at=M.get(T);if(at.count+=r.quantity,at.amount+=r.subtotal_ttc,at.amountHT+=r.subtotal_ttc/(1+vt),Ht==="service"){mt+=r.quantity,pt+=r.subtotal_ttc;const U=r.product_name||m?.name||"Service";L.has(U)||L.set(U,{name:U,count:0,amount:0,amountHT:0});const st=L.get(U);st.count+=r.quantity,st.amount+=r.subtotal_ttc,st.amountHT+=r.subtotal_ttc/(1+vt)}else xt+=r.quantity,yt+=r.subtotal_ttc}const et=[];for(const n of Q){const r=M.get(n);r&&r.amount>0&&et.push(r)}for(const[n,r]of M)!Q.includes(n)&&r.amount>0&&et.push(r);C.value=et,z.value=Array.from(L.values()).sort((n,r)=>r.amount-n.amount),it.value=xt,W.value=mt,B.value=yt,P.value=pt;const O=new Map;for(const n of q)for(const r of n.payments||[]){const m=r.method;O.has(m)||O.set(m,{method:m,label:ft[m]||m,amount:0,count:0});const T=O.get(m);T.amount+=r.amount,T.count+=1}V.value=Array.from(O.values()).sort((n,r)=>r.amount-n.amount);const Y=new Map;for(const n of q){const r=n.created_at.split("T")[0];Y.has(r)||Y.set(r,{date:r,total:0,count:0});const m=Y.get(r);m.total+=n.total,m.count+=1}F.value=Array.from(Y.values()).sort((n,r)=>n.date.localeCompare(r.date))}catch(s){console.error("Erreur chargement stats employé:",s)}finally{H.value=!1}}};return Ft(x,s=>{if(s&&s!=="__all__")dt.replace({query:{...J.query,vendorId:s}});else if(s==="__all__"){const e={...J.query};delete e.vendorId,dt.replace({query:e})}}),Vt(jt),(s,e)=>(d(),l("main",Zt,[t("div",te,[t("div",ee,[e[8]||(e[8]=t("div",null,[t("h1",{class:"text-xl lg:text-2xl font-bold text-gray-900 dark:text-white"},"Statistiques Employé"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Performance individuelle par période")],-1)),K.value&&!H.value?(d(),l("button",{key:0,onClick:St,class:"inline-flex items-center gap-2 px-4 py-2 bg-amber-600 text-white rounded-xl hover:bg-amber-700 transition-colors"},[c(g(Jt),{class:"w-4 h-4"}),e[7]||(e[7]=rt(" Télécharger PDF ",-1))])):v("",!0)]),t("div",ae,[e[12]||(e[12]=t("label",{class:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Sélectionner un employé",-1)),j.value.length===0?(d(),l("div",se," Chargement des employés... ")):(d(),l("div",re,[t("button",{type:"button",onClick:e[0]||(e[0]=a=>N.value=!N.value),class:"w-full sm:w-96 flex items-center gap-3 px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl text-left hover:border-emerald-400 dark:hover:border-emerald-500 transition-colors"},[x.value==="__all__"?(d(),l(p,{key:0},[c(g(G),{class:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}),e[9]||(e[9]=t("span",{class:"text-sm font-medium text-gray-900 dark:text-white"},"Tout le monde",-1))],64)):$.value?(d(),l(p,{key:1},[t("div",{style:D({backgroundColor:$.value.color}),class:"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold shrink-0"},o($.value.initials),5),t("span",oe,o($.value.first_name)+" "+o($.value.last_name),1)],64)):(d(),l(p,{key:2},[c(g(G),{class:"w-5 h-5 text-gray-400"}),e[10]||(e[10]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Choisir un employé...",-1))],64)),c(g(Rt),{class:"w-4 h-4 ml-auto text-gray-400"})]),N.value?(d(),l("div",le,[t("button",{type:"button",onClick:e[1]||(e[1]=a=>{x.value="__all__",N.value=!1}),class:E(["w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border-b border-gray-200 dark:border-gray-700",x.value==="__all__"&&"bg-emerald-50 dark:bg-emerald-900/20"])},[c(g(G),{class:"w-5 h-5 text-emerald-600 dark:text-emerald-400 shrink-0"}),e[11]||(e[11]=t("span",{class:"text-sm font-medium text-gray-900 dark:text-white"},"Tout le monde",-1))],2),(d(!0),l(p,null,S(j.value,a=>(d(),l("button",{key:a.id,type:"button",onClick:b=>{x.value=a.id,N.value=!1},class:E(["w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",x.value===a.id&&"bg-emerald-50 dark:bg-emerald-900/20"])},[t("div",{style:D({backgroundColor:a.color}),class:"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold shrink-0"},o(a.initials),5),t("span",ne,o(a.first_name)+" "+o(a.last_name),1)],10,de))),128))])):v("",!0)]))]),t("div",ie,[t("div",ue,[e[13]||(e[13]=t("label",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300"},"Année :",-1)),ot(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>w.value=a),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-lg text-sm"},[(d(!0),l(p,null,S($t.value,a=>(d(),l("option",{key:a,value:a},o(a),9,ce))),128))],512),[[Bt,w.value]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2 block"},"Mois :",-1)),t("div",ge,[(d(),l(p,null,S(nt,(a,b)=>t("button",{key:b,type:"button",onClick:I=>f.value===b?Et():Dt(b),class:E(["px-3 py-1.5 rounded-lg text-xs font-medium transition-colors",f.value===b?"bg-emerald-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"])},o(a.substring(0,3)),11,xe)),64))])]),t("div",me,[t("div",null,[e[15]||(e[15]=t("label",{class:"text-xs font-medium text-gray-600 dark:text-gray-400 block mb-1"},"Du",-1)),ot(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>_.value=a),onChange:ct,type:"date",class:"px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-lg text-sm"},null,544),[[bt,_.value]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"text-xs font-medium text-gray-600 dark:text-gray-400 block mb-1"},"Au",-1)),ot(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>k.value=a),onChange:ct,type:"date",class:"px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-lg text-sm"},null,544),[[bt,k.value]])]),t("button",{onClick:Nt,disabled:H.value||!x.value,class:"inline-flex items-center gap-2 px-5 py-2 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[c(g(It),{class:"w-4 h-4"}),e[17]||(e[17]=t("span",null,"Calculer",-1))],8,ye)]),x.value?v("",!0):(d(),l("p",pe," Veuillez sélectionner un employé avant de calculer. "))]),H.value?(d(),l("div",be,[c(g(Qt),{class:"w-8 h-8 text-gray-400 animate-spin"})])):K.value?(d(),l(p,{key:2},[t("div",ve,[t("button",{onClick:e[5]||(e[5]=a=>A.value="performance"),class:E(["px-5 py-2 rounded-lg text-sm font-medium transition-colors",A.value==="performance"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"])}," Performance ",2),t("button",{onClick:e[6]||(e[6]=a=>A.value="statistiques"),class:E(["px-5 py-2 rounded-lg text-sm font-medium transition-colors",A.value==="statistiques"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"])}," Statistiques ",2)]),A.value==="performance"?(d(),l("div",fe,[t("div",_e,[t("div",ke,[t("h2",we," Totaux — "+o(X.value),1)]),t("div",Ce,[t("table",Te,[e[20]||(e[20]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-600"},[t("th",{class:"px-4 py-2.5 text-left font-semibold text-gray-700 dark:text-gray-300"},"Catégorie"),t("th",{class:"px-4 py-2.5 text-right font-semibold text-gray-700 dark:text-gray-300"},"Nb"),t("th",{class:"px-4 py-2.5 text-right font-semibold text-gray-700 dark:text-gray-300"},"Prix HT"),t("th",{class:"px-4 py-2.5 text-right font-semibold text-gray-700 dark:text-gray-300"},"Prix TTC"),t("th",{class:"px-4 py-2.5 text-right font-semibold text-gray-700 dark:text-gray-300"},"Montant")])],-1)),t("tbody",Se,[(d(!0),l(p,null,S(C.value,a=>(d(),l("tr",{key:a.name,class:E(["text-gray-900 dark:text-gray-100",a.count===0&&"opacity-40"])},[t("td",Ae,o(a.name),1),t("td",Pe,o(a.count),1),t("td",$e,o(u(a.amountHT))+" €",1),t("td",qe,o(u(a.amount))+" €",1),t("td",Me,o(u(a.amount))+" €",1)],2))),128))]),t("tfoot",null,[t("tr",De,[e[19]||(e[19]=t("td",{class:"px-4 py-2.5"},"Total",-1)),t("td",Ee,o(wt.value),1),t("td",je,o(u(Ct.value))+" €",1),t("td",Ne,o(u(ut.value))+" €",1),t("td",He,o(u(ut.value))+" €",1)])])])])]),z.value.length>0?(d(),l("div",ze,[t("div",Fe,[t("h2",Ve,[c(g(ht),{class:"w-4 h-4"}),e[21]||(e[21]=rt(" Prestations (Services) ",-1))])]),t("div",Re,[t("table",Be,[e[23]||(e[23]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-600"},[t("th",{class:"px-4 py-2.5 text-left font-semibold text-gray-700 dark:text-gray-300"},"Service"),t("th",{class:"px-4 py-2.5 text-right font-semibold text-gray-700 dark:text-gray-300"},"Nb"),t("th",{class:"px-4 py-2.5 text-right font-semibold text-gray-700 dark:text-gray-300"},"Prix HT"),t("th",{class:"px-4 py-2.5 text-right font-semibold text-gray-700 dark:text-gray-300"},"Prix TTC"),t("th",{class:"px-4 py-2.5 text-right font-semibold text-gray-700 dark:text-gray-300"},"Montant")])],-1)),t("tbody",Ie,[(d(!0),l(p,null,S(z.value,a=>(d(),l("tr",{key:a.name,class:"text-gray-900 dark:text-gray-100"},[t("td",Le,o(a.name),1),t("td",Oe,o(a.count),1),t("td",Ye,o(u(a.amountHT))+" €",1),t("td",Ue,o(u(a.amount))+" €",1),t("td",Ge,o(u(a.amount))+" €",1)]))),128))]),t("tfoot",null,[t("tr",Je,[e[22]||(e[22]=t("td",{class:"px-4 py-2.5"},"Total Prestations",-1)),t("td",Qe,o(W.value),1),t("td",Ke,o(u(Tt.value))+" €",1),t("td",We,o(u(P.value))+" €",1),t("td",Xe,o(u(P.value))+" €",1)])])])])])):v("",!0)])):v("",!0),A.value==="statistiques"?(d(),l(p,{key:1},[t("div",Ze,[t("div",ta,[t("div",ea,[t("div",aa,[c(g(Lt),{class:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})])]),t("p",sa,o(u(h.value))+" €",1),e[24]||(e[24]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Total CA",-1))]),t("div",ra,[t("div",oa,[t("div",la,[c(g(Kt),{class:"w-5 h-5 text-blue-600 dark:text-blue-400"})])]),t("p",da,o(R.value),1),e[25]||(e[25]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Nombre de ventes",-1))]),t("div",na,[t("div",ia,[t("div",ua,[c(g(Ot),{class:"w-5 h-5 text-amber-600 dark:text-amber-400"})])]),t("p",ca,o(u(_t.value))+" €",1),e[26]||(e[26]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Panier moyen",-1))]),t("div",ga,[t("div",xa,[t("div",ma,[c(g(Wt),{class:"w-5 h-5 text-purple-600 dark:text-purple-400"})])]),t("p",ya,o(kt.value),1),e[27]||(e[27]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Top catégorie",-1))])]),t("div",pa,[t("div",ba,[e[28]||(e[28]=t("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider mb-4"}," CA journalier ",-1)),F.value.length===0?(d(),l("div",ha," Aucune donnée ")):(d(),l("div",va,[(d(!0),l(p,null,S(F.value,a=>(d(),l("div",{key:a.date,class:"flex items-center gap-3"},[t("span",fa,o(Mt(a.date)),1),t("div",_a,[t("div",{class:"h-full bg-gradient-to-r from-emerald-500 to-emerald-400 dark:from-emerald-600 dark:to-emerald-500 rounded-lg transition-all duration-500",style:D({width:`${a.total/At.value*100}%`})},null,4),a.total>0?(d(),l("span",ka,o(u(a.total))+" € ",1)):v("",!0)]),t("span",wa,o(a.count)+"v.",1)]))),128))]))]),t("div",Ca,[t("h3",Ta,[c(g(Xt),{class:"w-4 h-4 text-gray-500 dark:text-gray-400"}),e[29]||(e[29]=rt(" Modes de paiement ",-1))]),V.value.length===0?(d(),l("div",Sa," Aucune donnée ")):(d(),l("div",Aa,[(d(!0),l(p,null,S(V.value,a=>(d(),l("div",{key:a.method,class:"flex items-center gap-3"},[t("div",Pa,[t("div",$a,[t("span",qa,o(a.label),1),t("span",Ma,o(u(a.amount))+" €",1)]),t("div",Da,[t("div",{class:"h-full bg-gradient-to-r from-blue-500 to-blue-400 dark:from-blue-600 dark:to-blue-500 rounded-full",style:D({width:`${a.amount/Pt.value*100}%`})},null,4)]),t("p",Ea,o(a.count)+" paiement(s)",1)])]))),128))]))])]),t("div",ja,[e[32]||(e[32]=t("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider mb-4"}," Produits vs Services ",-1)),t("div",Na,[t("div",Ha,[t("div",za,[c(g(Yt),{class:"w-6 h-6 text-blue-600 dark:text-blue-400"})]),t("div",Fa,[e[30]||(e[30]=t("p",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Produits",-1)),t("p",Va,o(it.value)+" article(s)",1)]),t("div",Ra,[t("p",Ba,o(u(B.value))+" €",1),h.value>0?(d(),l("p",Ia,o((B.value/h.value*100).toFixed(0))+"% ",1)):v("",!0)])]),t("div",La,[t("div",Oa,[c(g(ht),{class:"w-6 h-6 text-purple-600 dark:text-purple-400"})]),t("div",Ya,[e[31]||(e[31]=t("p",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Services",-1)),t("p",Ua,o(W.value)+" prestation(s)",1)]),t("div",Ga,[t("p",Ja,o(u(P.value))+" €",1),h.value>0?(d(),l("p",Qa,o((P.value/h.value*100).toFixed(0))+"% ",1)):v("",!0)])])]),h.value>0?(d(),l("div",Ka,[t("div",{class:"h-full bg-gradient-to-r from-blue-500 to-blue-400 transition-all duration-500",style:D({width:`${B.value/h.value*100}%`})},null,4),t("div",{class:"h-full bg-gradient-to-r from-purple-500 to-purple-400 transition-all duration-500",style:D({width:`${P.value/h.value*100}%`})},null,4)])):v("",!0)])],64)):v("",!0)],64)):(d(),l("div",he,[c(g(G),{class:"w-12 h-12 mx-auto mb-3 opacity-40"}),e[18]||(e[18]=t("p",{class:"text-sm"},"Sélectionnez un employé et une période puis cliquez sur Calculer",-1))]))])]))}});export{rs as default};
