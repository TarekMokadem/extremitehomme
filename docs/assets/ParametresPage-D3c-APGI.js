import{l as A,d as H,r as c,a as I,o as j,c as x,e as r,f as u,z as m,g as t,W as z,y as D,F as q,h as P,t as G,i as n,v as i,B as W,k as b}from"./index-CAqGcB1x.js";import{u as $,a as C,I as L,b as M,S as T,P as J}from"./formatInputs-C7qAZfy6.js";import{R as N}from"./refresh-cw-CbmeH-aP.js";const K=A("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]),O={class:"flex-1 p-4 lg:p-6 overflow-auto bg-gray-50 dark:bg-gray-900"},Q={class:"max-w-2xl mx-auto space-y-6"},X={class:"flex items-center justify-between"},Y={class:"text-xl lg:text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2"},Z=["disabled"],_={key:0,class:"flex justify-center py-12"},ee={key:0,class:"text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/30 px-4 py-2 rounded-xl"},re={key:1,class:"text-sm text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/30 px-4 py-2 rounded-xl"},ae={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},te={class:"px-5 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center gap-2"},de={class:"p-5 space-y-4"},se=["value","maxlength"],le=["value","maxlength"],oe=["disabled"],ne={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},ie={class:"px-5 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center gap-2"},ge={class:"p-5 space-y-4"},ue=["disabled"],ye={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},pe={class:"px-5 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center gap-2"},xe={class:"p-5 space-y-4"},me={class:"pt-2 border-t border-gray-100 dark:border-gray-700"},be=["disabled"],we=H({__name:"ParametresPage",setup(ke){const{loadSettings:V,saveSetting:k,salonInfo:f,tvaRates:v,ticketHeader:w,ticketFooter:S,isLoading:h,isSaving:E}=$(),d=c({name:"",address:"",phone:"",siret:""}),l=c({normal:.2,reduced:.1,super_reduced:.055}),s=c({line1:"",line2:"",line3:""}),y=c({line1:"",line2:""}),o=I(!1),p=I("");function U(){d.name=f.value.name,d.address=f.value.address,d.phone=C(f.value.phone||""),d.siret=M(f.value.siret||""),l.normal=v.value.normal,l.reduced=v.value.reduced,l.super_reduced=v.value.super_reduced,s.line1=w.value.line1,s.line2=w.value.line2??"",s.line3=w.value.line3??"",y.line1=S.value.line1,y.line2=S.value.line2??""}async function F(){p.value="",o.value=!1;try{await k("salon_info",{...d}),o.value=!0,setTimeout(()=>o.value=!1,2500)}catch(g){p.value=g instanceof Error?g.message:"Erreur lors de l'enregistrement"}}async function R(){p.value="",o.value=!1;try{await k("tva_rates",{...l}),o.value=!0,setTimeout(()=>o.value=!1,2500)}catch(g){p.value=g instanceof Error?g.message:"Erreur lors de l'enregistrement"}}async function B(){p.value="",o.value=!1;try{await k("ticket_header",{line1:s.line1,line2:s.line2,line3:s.line3}),await k("ticket_footer",{line1:y.line1,line2:y.line2}),o.value=!0,setTimeout(()=>o.value=!1,2500)}catch(g){p.value=g instanceof Error?g.message:"Erreur lors de l'enregistrement"}}return j(async()=>{await V(),U()}),(g,e)=>(b(),x("main",O,[r("div",Q,[r("div",X,[r("div",null,[r("h1",Y,[u(t(z),{class:"w-7 h-7 text-gray-600 dark:text-gray-400"}),e[13]||(e[13]=m(" Paramètres ",-1))]),e[14]||(e[14]=r("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Informations du commerce et des tickets",-1))]),r("button",{onClick:e[0]||(e[0]=a=>{t(V)(),U()}),disabled:t(h),class:"inline-flex items-center gap-2 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-xl hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors disabled:opacity-50"},[u(t(N),{class:D(["w-4 h-4",t(h)&&"animate-spin"])},null,8,["class"]),e[15]||(e[15]=m(" Actualiser ",-1))],8,Z)]),t(h)?(b(),x("div",_,[u(t(N),{class:"w-8 h-8 text-gray-400 dark:text-gray-500 animate-spin"})])):(b(),x(q,{key:1},[p.value?(b(),x("p",ee,G(p.value),1)):P("",!0),o.value?(b(),x("p",re," Paramètres enregistrés. ")):P("",!0),r("section",ae,[r("div",te,[u(t(K),{class:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e[16]||(e[16]=r("h2",{class:"font-semibold text-gray-900 dark:text-white"},"Informations du salon",-1))]),r("div",de,[r("div",null,[e[17]||(e[17]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Nom du commerce",-1)),n(r("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>d.name=a),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Extrémités Homme"},null,512),[[i,d.name]])]),r("div",null,[e[18]||(e[18]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Adresse",-1)),n(r("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>d.address=a),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"123 rue Example"},null,512),[[i,d.address]])]),r("div",null,[e[19]||(e[19]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Téléphone",-1)),r("input",{value:d.phone,type:"tel",inputmode:"numeric",autocomplete:"tel",maxlength:t(L).phone,placeholder:"01 23 45 67 89",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",onInput:e[3]||(e[3]=a=>d.phone=t(C)(a.target.value))},null,40,se)]),r("div",null,[e[20]||(e[20]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"SIRET",-1)),r("input",{value:d.siret,type:"text",inputmode:"numeric",maxlength:t(L).siret,placeholder:"123 456 789 00012",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",onInput:e[4]||(e[4]=a=>d.siret=t(M)(a.target.value))},null,40,le)]),r("button",{onClick:F,disabled:t(E),class:"inline-flex items-center gap-2 px-4 py-2 bg-gray-900 dark:bg-emerald-600 dark:hover:bg-emerald-500 text-white rounded-xl hover:bg-gray-800 disabled:opacity-50"},[u(t(T),{class:"w-4 h-4"}),e[21]||(e[21]=m(" Enregistrer ",-1))],8,oe)])]),r("section",ne,[r("div",ie,[u(t(J),{class:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e[22]||(e[22]=r("h2",{class:"font-semibold text-gray-900 dark:text-white"},"Taux de TVA",-1))]),r("div",ge,[e[30]||(e[30]=r("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Ces taux sont utilisés pour l’affichage et les calculs. Le taux normal s’applique par défaut aux services. ",-1)),r("div",null,[e[23]||(e[23]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Taux normal (%)",-1)),n(r("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>l.normal=a),type:"number",min:"0",max:"1",step:"0.01",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},null,512),[[i,l.normal,void 0,{number:!0}]]),e[24]||(e[24]=r("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Ex. 0,20 pour 20 %",-1))]),r("div",null,[e[25]||(e[25]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Taux réduit (%)",-1)),n(r("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>l.reduced=a),type:"number",min:"0",max:"1",step:"0.01",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},null,512),[[i,l.reduced,void 0,{number:!0}]]),e[26]||(e[26]=r("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Ex. 0,10 pour 10 %",-1))]),r("div",null,[e[27]||(e[27]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Taux super réduit (%)",-1)),n(r("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>l.super_reduced=a),type:"number",min:"0",max:"1",step:"0.01",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent"},null,512),[[i,l.super_reduced,void 0,{number:!0}]]),e[28]||(e[28]=r("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Ex. 0,055 pour 5,5 %",-1))]),r("button",{onClick:R,disabled:t(E),class:"inline-flex items-center gap-2 px-4 py-2 bg-gray-900 dark:bg-emerald-600 dark:hover:bg-emerald-500 text-white rounded-xl hover:bg-gray-800 disabled:opacity-50"},[u(t(T),{class:"w-4 h-4"}),e[29]||(e[29]=m(" Enregistrer ",-1))],8,ue)])]),r("section",ye,[r("div",pe,[u(t(W),{class:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e[31]||(e[31]=r("h2",{class:"font-semibold text-gray-900 dark:text-white"},"Ticket — En-tête et pied de page",-1))]),r("div",xe,[e[38]||(e[38]=r("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Texte affiché en haut et en bas du ticket (impression ou aperçu). ",-1)),r("div",null,[e[32]||(e[32]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"En-tête — Ligne 1",-1)),n(r("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>s.line1=a),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Nom du salon"},null,512),[[i,s.line1]])]),r("div",null,[e[33]||(e[33]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"En-tête — Ligne 2",-1)),n(r("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>s.line2=a),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Adresse ou téléphone"},null,512),[[i,s.line2]])]),r("div",null,[e[34]||(e[34]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"En-tête — Ligne 3",-1)),n(r("input",{"onUpdate:modelValue":e[10]||(e[10]=a=>s.line3=a),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"SIRET ou autre"},null,512),[[i,s.line3]])]),r("div",me,[e[35]||(e[35]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Pied de page — Ligne 1",-1)),n(r("input",{"onUpdate:modelValue":e[11]||(e[11]=a=>y.line1=a),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:"Merci de votre visite !"},null,512),[[i,y.line1]])]),r("div",null,[e[36]||(e[36]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Pied de page — Ligne 2",-1)),n(r("input",{"onUpdate:modelValue":e[12]||(e[12]=a=>y.line2=a),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:placeholder-gray-400 rounded-xl focus:ring-2 focus:ring-gray-900 dark:focus:ring-emerald-500 focus:border-transparent",placeholder:""},null,512),[[i,y.line2]])]),r("button",{onClick:B,disabled:t(E),class:"inline-flex items-center gap-2 px-4 py-2 bg-gray-900 dark:bg-emerald-600 dark:hover:bg-emerald-500 text-white rounded-xl hover:bg-gray-800 disabled:opacity-50"},[u(t(T),{class:"w-4 h-4"}),e[37]||(e[37]=m(" Enregistrer ",-1))],8,be)])])],64))])]))}});export{we as default};
