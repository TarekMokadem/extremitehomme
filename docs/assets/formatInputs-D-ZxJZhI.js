import{c as m,a as i,r as d,s as y}from"./index-8JeweAIN.js";const S=m("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);const x=m("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),o={salon_info:{name:"Extrémités Homme",address:"",phone:"",siret:""},tva_rates:{normal:.2,reduced:.1,super_reduced:.055},ticket_header:{line1:"Extrémités Homme",line2:"",line3:""},ticket_footer:{line1:"Merci de votre visite !",line2:""},loyalty:{points_per_euro:1,euros_per_point:.01,enabled:!1}},l=d({}),u=d(!1),f=d(!1);function E(){const s=async()=>{u.value=!0;try{const{data:a,error:t}=await y.from("settings").select("key, value");if(t)throw t;const r={};(a||[]).forEach(c=>{r[c.key]=c.value}),Object.keys(o).forEach(c=>{r[c]==null&&(r[c]=o[c])}),l.value=r}catch(a){console.error("Erreur chargement paramètres:",a),Object.keys(o).forEach(t=>{l.value[t]=o[t]})}finally{u.value=!1}},e=async(a,t)=>{f.value=!0;try{const{error:r}=await y.from("settings").upsert({key:a,value:t,updated_at:new Date().toISOString()},{onConflict:"key"});if(r)throw r;l.value[a]=t}catch(r){throw console.error("Erreur sauvegarde paramètre:",r),r}finally{f.value=!1}},n=a=>{const t=l.value[a];return t??o[a]??{}},p=i(()=>n("salon_info")),v=i(()=>n("tva_rates")),$=i(()=>n("ticket_header")),g=i(()=>n("ticket_footer")),_=i(()=>n("loyalty"));return{loadSettings:s,saveSetting:e,get:n,salonInfo:p,tvaRates:v,ticketHeader:$,ticketFooter:g,loyaltyConfig:_,isLoading:u,isSaving:f}}function h(s){return s.replace(/\D/g,"")}function w(s){const e=h(s).slice(0,10);return e.length<=2?e:e.length<=4?`${e.slice(0,2)} ${e.slice(2)}`:e.length<=6?`${e.slice(0,2)} ${e.slice(2,4)} ${e.slice(4)}`:e.length<=8?`${e.slice(0,2)} ${e.slice(2,4)} ${e.slice(4,6)} ${e.slice(6)}`:`${e.slice(0,2)} ${e.slice(2,4)} ${e.slice(4,6)} ${e.slice(6,8)} ${e.slice(8)}`}function H(s){const e=h(s).slice(0,14);return e.length<=3?e:e.length<=6?`${e.slice(0,3)} ${e.slice(3)}`:e.length<=9?`${e.slice(0,3)} ${e.slice(3,6)} ${e.slice(6)}`:`${e.slice(0,3)} ${e.slice(3,6)} ${e.slice(6,9)} ${e.slice(9)}`}function b(s){return h(s).slice(0,5)}const I={phone:14,siret:18,postalCode:5};export{I,S as P,x as S,w as a,H as b,b as f,E as u};
